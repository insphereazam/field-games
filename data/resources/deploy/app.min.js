jQuery(document).ready(function(a){a(function(){var e=require("switchery");if(Array.prototype.forEach){var b=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));b.forEach(function(f){var g=new e(f)})}else{var b=document.querySelectorAll(".js-switch");for(var c=0;c<b.length;c++){var d=new e(b[c])}}});a(function(){a(".lazyload").lazyload({threshold:200})});a(function(){a("#mp-menu img.lazyload").lazyload({event:"sporty"})});a(window).bind("load",function(){var b=setTimeout(function(){a("#mp-menu img.lazyload").trigger("sporty")},3000)});a(document).ready(function(){var c=document.body.clientWidth,d=768,f=true;var h=document.body.clientWidth,b=640,e=true;var g=function(){f=(c>d)?false:true;e=(h>b)?false:true};g();a("#MobileNav").click(function(i){i.preventDefault();a(this).toggleClass("active");a("nav").toggleClass("active");a(".mobile-push").toggleClass("active");a(".sub-menu").removeClass("active");a(".mobile-overlay").toggleClass("active")});a("a.parent-menu").click(function(j){j.preventDefault();var i=a(this).attr("data-id");a("#"+i).addClass("active")});a(".sub-menu a.backward").click(function(i){i.preventDefault();a(this).parent().parent().removeClass("active")});a(".mobile-overlay").click(function(){a("#MobileNav").trigger("click")})});a(".custom-select").selectbox();a(".w195 .sbHolder").on("click",function(b){a(".w195 .sbHolder").toggleClass("current")});a(document).on("click",function(b){if(a(b.target).is(".w195 .sbHolder")===false){a(".w195 .sbHolder").removeClass("selected")}});a(".w305 .sbHolder").on("click",function(b){a(".w305 .sbHolder").toggleClass("current")});a(document).on("click",function(b){if(a(b.target).is(".w305 .sbHolder")===false){a(".w305 .sbHolder").removeClass("selected")}})});jQuery(document).ready(function(){jQuery("#featured-blogs-slider").owlCarousel({navigation:true,slideSpeed:300,pagination:true,singleItem:false,items:1,itemsCustom:false,itemsDesktop:[1199,1],itemsDesktopSmall:[980,1],itemsTablet:[768,1],itemsTabletSmall:false,itemsMobile:[479,1]});jQuery("#recent-articles-slider").owlCarousel({navigation:true,slideSpeed:300,pagination:true,singleItem:false,items:2,itemsCustom:false,itemsDesktop:[1199,1],itemsDesktopSmall:[980,1],itemsTablet:[768,1],itemsTabletSmall:false,itemsMobile:[479,1]});jQuery("#insight-follower-slider").owlCarousel({navigation:true,slideSpeed:300,pagination:true,singleItem:false,items:1,itemsCustom:false,itemsDesktop:[1199,1],itemsDesktopSmall:[980,1],itemsTablet:[768,1],itemsTabletSmall:false,itemsMobile:[479,1]});jQuery("#owl-thumbnails").owlCarousel({items:4,itemsDesktop:[1199,4],itemsDesktopSmall:[980,2],itemsTablet:[768,2],itemsMobile:[479,1],pagination:false,navigation:true,loop:true,autoplay:true,autoplayTimeout:1000,navigationText:["<i class='fa fa-angle-left fa-2x'></i>","<i class='fa fa-angle-right fa-2x'></i>"]})});$(document).ready(function(){$("img[data-retina]").retina({checkIfImageExists:true});$(".dropdown-state").hover(function(){$(this).addClass("open")},function(){$(this).removeClass("open")});jQuery(".weather-dropdown").hide();jQuery(".dropdown-weather").on("click","a",function(){$(".weather-dropdown").animate({opacity:"toggle"},{duration:500},function(){$(".weather-dropdown").fadeIn()});jQuery(".dropdown-weather").toggleClass("selected")});jQuery(".users-dropdown").hide();jQuery(".dropdown-users a").click(function(){$(".users-dropdown").animate({opacity:"toggle"},{duration:500},function(){$(".users-dropdown").fadeIn()});jQuery(".dropdown-users").toggleClass("selected")});jQuery(".userProfileDropdown").hide();jQuery(".userProfileHolder .drop").click(function(){$(".userProfileDropdown").animate({opacity:"toggle"},{duration:500},function(){$(".userProfileDropdown").fadeIn()});jQuery(".userProfileHolder").toggleClass("selected")});jQuery("#changeLocation").hide();jQuery(".weather-widget").on("click"," a.choose",function(){$("#changeLocation").fadeIn();jQuery(".weather-widget").toggleClass("selected")});jQuery(".shareTooltips").hide();$("body").on("click",".btnShare",function(){$(this).next(".shareTooltips").animate({opacity:"toggle"},{duration:500},function(){$(this).next(".shareTooltips").fadeIn()});jQuery(this).toggleClass("selected")});jQuery(".megaDropdownLabel").click(function(){jQuery(".megaDropdown").slideToggle({opacity:"toggle"},{duration:500});jQuery(".arrowLabel").toggleClass("selected")});jQuery(".megaMenu ul li a").click(function(){jQuery(".megaMenu ul li a").removeClass("selected");jQuery(this).addClass("selected")});$(".scroller-blogs").slimScroll({size:"7px",color:"#b4b4b4",opacity:1,height:"auto",distance:"0px",disableFadeOut:true,railVisible:true,alwaysVisible:true});$(function(){$(".polpular-writers ul").on("click","li",function(d){$(".polpular-writers ul li").removeClass("selected");$(this).addClass("selected")});$(".daily-ten ul").on("click","li",function(){$(".daily-ten ul li").removeClass("selected");$(this).addClass("selected")});$(".trending ul").on("click","li",function(){$(".trending ul li").removeClass("selected");$(this).addClass("selected")});$("#side-feature ul").on("click","li",function(){$("#side-feature ul li").removeClass("selected");$(this).addClass("selected")});$(".hdr-sharing #social-sharing").on("click",function(d){$(".hdr-sharing").toggleClass("selected")});$(".hdr-controls li a").click(function(){$(".hdr-controls li a").removeClass("active");$(this).addClass("active")});$(".edit-post-control-block li a").click(function(){$(".edit-post-control-block li a").removeClass("active");$(this).addClass("active")});$(".pallete a").click(function(){$(".pallete a").removeClass("active");$(this).addClass("active")});$("#filter a").click(function(){$("#filter a").removeClass("selected");$(this).addClass("selected")});$(".blog-control-btn li a").click(function(){$(".blog-control-btn li a").removeClass("selected");$(this).addClass("selected")})});$(document).ready(function(){$(".hdr-search a").click(function(){$(".search-block").slideToggle("slow")})});$("#profile-section").children().clone().appendTo(".responsive-profile-section");$(".responsive-profile-close").on("click",function(d){d.preventDefault();$("body").removeClass("no-scroll");$(".responsive-profile-section").removeClass("open");return false});function b(d){alert("Added a tag: "+d)}function c(d){alert("Removed a tag: "+d)}function a(e,d){alert("Changed a tag: "+d)}$(function(){})});$(".modal").on("shown.bs.modal",function(a){$(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+(10*$("body").data("fv_open_modals")));$(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack")});$(".panel-heading a").click(function(){$(".panel-heading").removeClass("active");$(this).parents(".panel-heading").addClass("active");$(".panel-title").removeClass("active");$(this).parent().addClass("active")});$(document).ready(function(){var a=$("#ajax-modal");$(".ajax .login-signup").on("click",function(){$("body").modalmanager("loading");setTimeout(function(){a.load("login-signup.php","",function(){a.modal()})},1000)});$(".ajax .upload-profile").on("click",function(){$("body").modalmanager("loading");setTimeout(function(){a.load("profile-pic-upload.php","",function(){a.modal()})},1000)})});var ApplicationController=(function(e){var c=function(l){var m=[],n=0,o=0,k=0;l+="";while(n<l.length){o=l.charCodeAt(n)&255;k=0;if(o<=191){o=(o&127);k=1}else{if(o<=223){o=(o&31);k=2}else{if(o<=239){o=(o&15);k=3}else{o=(o&7);k=4}}}for(var j=1;j<k;++j){o=((o<<6)|(l.charCodeAt(j+n)&63))}if(k==4){o-=65536;m.push(String.fromCharCode(55296|((o>>10)&1023)),String.fromCharCode(56320|(o&1023)))}else{m.push(String.fromCharCode(o))}n+=k}return m.join("")};var g=function(){if(e(".content-page").hasClass("no-height-check")){return}var k=e(window).height();var n=e("#footer-wrap").height();var i=e(".content-page").height();var j=e(".navigational-area").height();var l=e(".header").height();var m=40+50+50;var p=l+j+i+n+m;if(k>p){var o=k-p;var q=i+o;e(".content-page").css("min-height",q+"px")}};var b=function(){var j=e(".news__article").height();var i=e(".news__sidebar").height();var l=60+60;var k=j+l;console.log(k+","+i);if(k<=600){e(".ArticlePageSidebarItem3").addClass("hide");e(".ArticlePageSidebarItem4").addClass("hide");e(".ArticlePageSidebarItem5").addClass("hide")}else{if(k<=800){e(".ArticlePageSidebarItem4").addClass("hide");e(".ArticlePageSidebarItem5").addClass("hide")}else{if(k<=1200){e(".ArticlePageSidebarItem5").addClass("hide")}}}};var h=function(j){var l={ref:window.location.href};var k=e.extend({},l,j);var i=e("#ajax-modal");e("body").modalmanager("loading");setTimeout(function(){i.load(baseHttpPath+"/auth/modal-login-signup?ref="+escape(k.ref),"",function(){i.modal()})},500)};var f=function(){e("a.forceLogin, button.forceLogin").click(function(k){if(!isUserLoggedIn){k.preventDefault();var i=e(this).attr("href");if(isLoginPopupEnabled!==undefined&&isLoginPopupEnabled!==1&&strLoginUrl!==undefined&&strLoginUrl!==""){var j=(i===undefined||i==="#"||i.indexOf("javascript:")!=-1)?window.location.href:i;window.location=strLoginUrl+"?ref="+escape(j)}else{if(i===undefined||i==="#"){h()}else{h({ref:i})}}}else{return true}})};var a=function(){e("body").on("click","div.mobileShareBtn",function(i){i.preventDefault()});e("body").on("click",".btnPlay",function(j){j.preventDefault();var i=e(this).data("videoid");var k=e(this).data("title");if(i!==undefined&&i!==""){e.fancybox.open([{href:"http://www.youtube.com/embed/"+i+"?autoplay=1",title:k,type:"iframe"}])}});e("body").on("click",".btnRead",function(i){var j=e(this).data("posturl");if(j!==undefined&&j!==""){window.location=j}});e("a.no-link").click(function(i){i.preventDefault()})};var d=function(l,k){if(k!=null){var j=new Date(k)}else{var j=new Date()}var i=j.getDate();var m=j.getMonth()+1;var n=j.getFullYear();if(i<10){i="0"+i}if(m<10){m="0"+m}return n+l+m+l+i};return{adjustArticlePageContents:function(){b()},adjustFooterPosition:function(){g()},jsUTF8Decode:function(i){return c(i)},loginModal:function(){h()},dateFormat:function(j,i){return d(j,i)},init:function(){f();a()}}}(jQuery));(function(a){a.fn.youtubePlay=function(b){var d={selector:"a.youtube-link",showSelector:"div.lt-stacked-img",containerClass:"image-cover thumb302",iframeClass:"thumb302",ajaxFindClass:"",ajaxShowSelector:"",ajaxContainerClass:"",ajaxIframeClass:""};var c=a.extend({},d,b);return this.on("click",c.selector,function(i){i.preventDefault();i.stopPropagation();var h=a(this).attr("href");if(h===undefined){if(a(this).hasClass("video-overlay")){h=a(this).data("link")}else{h=a(this).closest("video-overlay").data("link")}}var g="";var f=c.showSelector;if(a(this).hasClass(c.ajaxFindClass)){f=c.ajaxShowSelector}if(a(this).find(f).presence()){g=a(this).find(f)}else{if(a(this).parent(f).presence()){g=a(this).parent(f)}else{g=a(this).closest(f)}}if(a(this).hasClass(c.ajaxFindClass)){a(g).html("<div class='"+c.ajaxContainerClass+"'><iframe class='"+c.ajaxIframeClass+"' src='"+h+"' frameborder='0' height='100%' width='100%' allowfullscreen='true'></iframe></div>")}else{a(g).html("<div class='"+c.containerClass+"'><iframe class='"+c.iframeClass+"' src='"+h+"' frameborder='0' height='100%' width='100%' allowfullscreen='true'></iframe></div>")}})};a.fn.vimeoPlay=function(b){var d={selector:"a.vimeo-link",showSelector:"div.lt-stacked-img",containerClass:"image-cover thumb302",iframeClass:"thumb302",ajaxFindClass:"",ajaxShowSelector:"",ajaxContainerClass:"",ajaxIframeClass:""};var c=a.extend({},d,b);return this.on("click",c.selector,function(j){j.preventDefault();j.stopPropagation();var h=a(this).attr("href");if(h===undefined){if(a(this).hasClass("vimeo-video-overlay")){h=a(this).data("link")}else{h=a(this).closest("vimeo-video-overlay").data("link")}}var k=h.split("/");var i=k[parseInt(k.length)-1];var g="";var f=c.showSelector;if(a(this).hasClass(c.ajaxFindClass)){f=c.ajaxShowSelector}if(a(this).find(f).presence()){g=a(this).find(f)}else{if(a(this).parent(f).presence()){g=a(this).parent(f)}else{g=a(this).closest(f)}}if(a(this).hasClass(c.ajaxFindClass)){a(g).html("<div class='"+c.ajaxContainerClass+"'><iframe class='"+c.ajaxIframeClass+"' src='//player.vimeo.com/video/"+i+"?autoplay=1' frameborder='0' height='100%' width='100%' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>")}else{a(g).html("<div class='"+c.containerClass+"'><iframe class='"+c.iframeClass+"' src='//player.vimeo.com/video/"+i+"?autoplay=1' frameborder='0' height='100%' width='100%' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>")}})};a.fn.presence=function(){return this.length!==0&&this}}(jQuery));var clubs_index_club='{{#each this}}<li><a href="http://{{url_prefix}}.'+blogsHostURL+'" style="background:none repeat scroll 0 0 {{hex_color}};" target="_blank"><div class="img-thumbnail"><img src="{{logoImageURL}}" alt="{{title}}" class="img-responsive"></div><div class="description"><div class="fullwidth"><h4>{{title}}</h4><p>{{club_name}}</p><button type="button" class="{{#loggedUser this.status}} {{else}} forceLogin {{/loggedUser}} follow {{#if following}}selected{{/if}}" aria-label="Like" data-id="{{id}}" data-status="{{#if following}}unfollow{{else}}follow{{/if}}"><i class="fa fa-star"></i>{{#if following}}Following{{else}}Follow{{/if}}</button></div></div></a></li>{{/each}}';var popular_blogs_popular='{{#each this}}<li><a href="http://{{url_prefix}}.'+blogsHostURL+'" target="_blank"><button type="button" class="like {{#loggedUser this.status}} FollowBlog {{else}} forceLogin {{/loggedUser}} {{#if following}}selected{{/if}}" aria-label="Like" data-id="{{id}}" data-status="{{#if following}}unfollow{{else}}follow{{/if}}"><span aria-hidden="true"><i class="fa fa-star"></i></span></button><span class="post-count">{{cnt}} {{popularBy filter}}</span><div class="img-thumbnail"><img src="{{logoImageURL}}" alt="{{title}}" class="img-responsive"></div><div class="description"><h4 class="title-ellipsis">{{title}}</h4><p>by {{{display_name}}}</p></div></a></li>{{/each}}';var popular_writers_popular='{{#each this}}<li><a href="'+baseHttpPath+'/profile/{{username}}"><button data-id="{{id}}" data-status="{{#if following}}unfollow{{else}}follow{{/if}}" type="button" class="like {{#loggedUser this.status}} FollowUnfollowUser {{else}} forceLogin {{/loggedUser}} {{#if following}}selected{{/if}}" aria-label="Like"><span aria-hidden="true"><i class="fa fa-star"></i></span></button><span class="post-count">{{cnt}} {{writerBy filterType}}</span><div class="img-thumbnail"><img src="{{profileImageURL}}" alt="{{username}}" class="img-responsive"></div><div class="description"><h4>#{{position}} &nbsp; {{firstname}} {{lastname}}</h4><p>View Profile</p></div></a></li>{{/each}}';var search_fanssearch_search='{{#each this}}<div class="posts-grid" data-id="{{id}}"><a href="{{postUrl}}"><div class="placeholder"><div class="img-thumbnail"><img src="{{postImageURL}}" alt="{{title}}" class="img-responsive"></div><div class="posts-excerpt"><h5 class="game-code upper {{sportClass}}">{{sportTitle}} <span class="time text-right">{{timeElapsed}}</span></h5><h4 class="game-title">{{title}}</h4><p>{{excerpt}}</p><div class="caption"><div class="admin-circle"><img alt="Avatar" src="{{userProfileThumb}}" class="img-responsive"></div><div><p>by <span class="green">{{display_name}}</span></p></div><div class="share-post"><span class="hidden-xs hidden-sm"> {{total_shares}} shares</span> <span class="share"><i class="fa fa-share"></i></span></div></div></div></div>{{/each}}';var userblogs_connect_hashtags='{{#each this}}<li><div class="row"><div class="col-md-12 col-sm-12 col-xs-13"><div class="social-caption">{{hashTag}} {{moderationStatus}}</div></div><div class="col-md-4 col-sm-4 col-xs-3" style="margin-top:-5px;"><a data-blogid="{{blogId}}" data-id="{{tagId}}" href="#" class="button trans button-remove hash-tag-remove" data-type="{{type}}"><i class="fa fa-remove"></i></a></div></div></li>{{/each}}';var userblogs_createeditblog_tags='{{#each this}}<a title="{{inputValue}}" id="" class="tag"><span>{{inputValue}}</span><b title="Remove tag">x</b></a>{{/each}}';var userblogs_permissions_blog='{{#each this}}<li><a class="add-author" href="#"  data-id="{{id}}" data-blogid="{{thisBlogId blog}}" data-referer="modal-box"><button class="close" aria-label="Close" type="button" data-id="{{id}}" data-blogid="{{thisBlogId blog}}"  data-referer="modal-box"><span aria-hidden="true"><i class="fa fa-plus"></i></span></button><div class="img-thumbnail"><img src="{{profileImageURL}}" alt="{{username}}" class="img-responsive"></div><div class="description"><h4>{{firstname}} {{lastname}}</h4><p>{{username}}</p></div></a></li>{{/each}}';var userblogs_permissions_writers='<li class="writer-{{id}}"><a href="'+baseHttpPath+'/profile/{{username}}"><button type="button" class="close remove-author" aria-label="Close" onclick="return false;" data-id="{{id}}" data-blogid="{{thisBlog id}}"><span aria-hidden="true"><i class="fa fa-close"></i></span></button><div class="img-thumbnail"><img src="{{profileImageURL}}" alt="{{username}}" width="88"></div><div class="description"><h4>{{firstname}} {{lastname}}</h4><p>View Profile</p></div></a></li>';var userblogs_blog_loadposts='{{#each this}}<li id="postId_{{id}}" class="{{published_status}}"><div class="articles"><div class="img-thumbnail"><img src="{{postThumbImage}}" alt="" class="img-responsive"></div><div class="description no"><div class="row"><div class="col-md-10 col-sm-10 col-xs-16"><h4>{{title}}</h4><p class="post-status">{{#unless isPost}}<span>{{source}}</span> {{/unless}}<span>{{published_status}}</span> <span>{{created_at_date}}</span></p></div><div class="col-md-6 col-sm-6 col-xs-16"><ul class="descr-button">{{#if showDeleteBtn}}<li><button type="button" data-id="{{id}}" class="deletePost" data-type="{{postType}}" data-hasworkflowaccess="{{hasWorkflowAccess}}" {{#unless isPost}}data-post="social"{{/unless}}><i class="fa fa-trash"></i><br>Delete</button></li>{{/if}}{{#if isPost}}<li class="selected"><a target="_blank" class="text-center" href="'+baseHttpPath+'/post/edit/{{id}}"><i class="fa fa-cog"></i><br>Edit</a></li>{{/if}}<li><a href="{{post_url}}" target="_blank" class="text-center" ><i class="fa fa-arrow-circle-right"></i><br>View</a></li></ul></div></div></div></div></li>{{/each}}';var home_blog_posts='{{#each this}}{{#ifIsEmpty source}}<div class="posts-grid"><a href="/article/index/{{post_id}}/{{slug}}"><div class="placeholder"><div class="img-thumbnail"><img src="{{postImage}}" alt="{{title}}" class="oy lazyload img-responsive"><div class="overlay"><button type="button" class="btnmove"><i class="fa fa-arrows"></i></button><button type="button" class="btnhide"><i class="fa fa-eye-slash"></i>Hide</button><button type="button" class="btnhide"><i class="fa fa-heart-o"></i>Feature</button><button type="button" class="btnhide"><i class="fa fa-edit"></i>Edit</button></div></div><div class="posts-excerpt"><h5 class="game-code upper {{sport_nick}}">{{sport_nick}} <span class="time text-right">{{created_at}}</span></h5><h4 class="game-title">{{title}}</h4><p>{{excerpt}}</p><div class="caption"><div class="admin-circle"><img alt="Avatar" src="{{userThumb}}" class="img-responsive"></div><div><p>by <span class="green">{{display_name}}</span></p></div><div class="share-post"><span class="hidden-xs hidden-sm">{{shares}} shares</span> <span class="share"><i class="fa fa-share"></i></span></div></div></div></div></a></div>{{else}}<div class="posts-grid social"><a href="#"><div class="placeholder"><div class="social-caption"><div class="admin-circle"><img alt="{{firstname}}" src="{{userThumb}}" class="img-responsive"></div><div class="username">{{firstname}}</div><div class="author">@{{toLowerCase firstname}}</div><span class="time text-right">{{created_at}}</span><div class="social-icon-display"><i class="fa fa-{{source}}"></i></div></div><div class="img-thumbnail"><img src="{{postImage}}" alt="" class="oy lazyload img-responsive"></div><div class="posts-excerpt"><p>{{excerpt}}</p></div></div></a></div>{{/ifIsEmpty}}{{/each}}';var userblogs_connect_sources='{{#each this}}<li><a class="add-source" data-id="{{thisBlog blogId}}" data-ref="{{id}}" href="#"><button class="close" aria-label="Close" type="button" data-id="{{thisBlog blogId}}" data-ref="{{id}}" data-referer="modal-box"><span aria-hidden="true"><i class="fa fa-plus"></i></span></button><div class="img-thumbnail"><img src="{{logoImageURL}}" alt="" class="img-responsive"></div><div class="description"><h4>{{title}}</h4><p>by {{displayName}}</p></div></a></li>{{/each}}';var userblogs_connect_addedSources='<li><a data-id="{{thisBlog blogId}}" data-ref="{{id}}" href="http://{{url_prefix}}.'+blogsHostURL+'"><button class="close remove-source" aria-label="Close" type="button"  data-id="{{thisBlog blogId}}" data-ref="{{id}}"><span aria-hidden="true"><i class="fa fa-close"></i></span></button><div class="img-thumbnail"><img src="{{logoImageURL}}" alt="" class="img-responsive"></div><div class="description"><h4>{{title}}</h4><p>by {{display_name}}</p></div></a></li>';var home_scores_fetchScores='{{#each this}} <div class="owl-item" style="width: 300px;"><div class="item"><div class="col-md-16 scores-item"><div class="scores-block-element"><table class="table"><thead><tr class="{{classNick}}"><th colspan="3" style="padding-left:0px;padding-right:0px;"><table width="100%" cellpadding="0" cellspacing="0"><tr><th width="33%">{{sportTitle}} </th><th style="text-align:center;">{{startDate}}</span></th><th width="33%">{{matchStatus}}</th></tr></table></th></tr></thead><tbody><tr><td width="8%"><span class="flag"><img class="lazyload"  src="{{team1Logo}}" width="19"></span></td><td>{{homeSquadName}}</td><td>{{homeSquadScore}}</td></tr><tr><td width="8%"><span class="flag"><img class="lazyload"  src="{{team2Logo}}" width="19"></span></td><td>{{awaySquadName}}</td><td>{{awaySquadScore}}</td></tr></tbody></table></div></div></div></div>{{/each}}';var home_widget_fixtures='{{#each this}}<li><div class="row"><div class="col-lt"><span class="flag"><img src="{{team1FlagImage}}" alt="" class="img-responsive"></span><span class="title">{{team1Name}}</span></div><div class="col-rt">{{dateStr}}</div></div><div class="row"><div class="col-lt"><span class="flag"><img src="{{team2FlagImage}}" alt="" class="img-responsive"></span><span class="title">{{team2Name}}</span></div><div class="col-rt">{{timeStr}}</div></div></li>{{/each}}';var workflow_container='{{#each this }} <div class="workflow-container" id="block-grid-{{id}}" data-position="{{level}}" data-workflow="{{workflow_id}}"><div class="workflow-header" data-id="{{id}}" data-blogid="{{blog_id}}"><div class="holder"><h2>{{title}}</h2><span class="workflow-controls"><a class="link-effect edit-title" href="javascript:;" data-mode="edit" >Edit</a>{{#if allowDelete}}<a class="link-effect delete-group" href="javascript:;">Delete</a>{{/if}}</span></div><div class="infotips" data-tooltip="{{title}} Group add or remove members to assign privileges"><span class="fa fa-info-circle"></span></div></div><div class="workflow-container-block" id="block-{{id}}" data-id="{{id}}" data-blogid="{{blog_id}}">{{#each authors}}<div class="profile-holder" data-id="{{id}}" data-workgroupuserid="{{workflow_group_user_id}}"><ul><li class="profile-holder-lt"><span class="thumb-65x65"><img class="img-responsive" alt="{{username}}" src="{{profileImageURL}}"></span><span class="name">{{firstname}} {{lastname}}</span></li><li class="profile-holder-rt"><a href="javascript:;" class="remove-author"><i class="fa fa-close"></i></a></li></ul></div>{{/each}}<a href="#" class="button block btn-dashed large add-workflow-user" data-modal="#addWorkflowUserModal" data-id="{{id}}">Add Members <i class="fa fa-plus"></i></a></div></div>{{#unless @last}}<div class="add-group-block"><a href="javascript:;" class="button btn-dashed small groupModal" data-position="{{level}}" data-modal="#addWorkflowGroup">Add Group <i class="fa fa-plus"></i></a></div>{{/unless}}{{/each}}';var workflow_selectbox='<select id="selectWorkflow" name="SelectWorkflow" class="custom-select" data-blogid="{{thisBlog id}}"><option value="">Select Workflow</option>{{#each this}}<option value="{{id}}">{{title}}</option>{{/each}}</select>';var user_permissions_workflow='{{#each this}}<li><a class="add-author" href="#"  data-workflowid="{{workflow workflow}}" data-id="{{id}}" data-blogid="{{thisBlogId blog}}" data-referer="modal-box"><button class="close" aria-label="Close" type="button" data-id="{{id}}" data-blogid="{{thisBlogId blog}}"  data-workflowid="{{workflow workflow}}"  data-referer="modal-box"><span aria-hidden="true"><i class="fa fa-plus"></i></span></button><div class="img-thumbnail"><img src="{{profileImageURL}}" alt="{{username}}" class="img-responsive"></div><div class="description"><h4>{{firstname}} {{lastname}}</h4><p>{{username}}</p></div></a></li>{{/each}}';var users_workflow='<div class="profile-holder" data-id="{{id}}" data-workgroupuserid="{{workflow_group_user_id}}"><ul><li class="profile-holder-lt"><span class="thumb-65x65"><img class="img-responsive" alt="{{username}}" src="{{profileImageURL}}"></span><span class="name">{{firstname}} {{lastname}}</span></li><li class="profile-holder-rt"><a href="javascript:;" class="remove-author"><i class="fa fa-close"></i></a></li></ul></div>';(function(a){a.fn.GettyImages=function(b){var d={pageSize:32,currentPage:1,itemRowCount:4,inputObj:a("<input/>"),thumbsOuterContainer:a("<div/>"),thumbsDisplayContainer:a("<div/>"),loadMoreButton:a("<button/>"),displayPageNumbersElement:a("<span/>"),onSuccess:false,onError:false,onImageSelect:false};var c=a.extend({},d,b);return this.each(function(){var g=a(this);var f="";var e=false;a(c.loadMoreButton).click(function(h){h.preventDefault();e=true;c.currentPage=c.currentPage+1;a(g).trigger("submit")});a(g).submit(function(i){i.preventDefault();var h=a(c.inputObj).val();if(h===""){a().General_ShowNotification({message:"Please enter the search phrase",type:"error"});return false}if(f!==h){f=h;c.currentPage=1;a(c.thumbsDisplayContainer).empty();a(c.thumbsOuterContainer).addClass("hide")}else{if(!e){return}}a.ajax({type:"get",url:baseHttpPath+"/general/search-getty-images",dataType:"json",data:{s:h,limit:c.pageSize,page:c.currentPage},success:function(o,q,n){if(o.totalImages==0){a(c.thumbsOuterContainer).addClass("hide")}else{a(c.thumbsOuterContainer).removeClass("hide");a(c.displayPageNumbersElement).html("Page: "+o.currentPage+"/"+o.totalPages);var l;var m=a("<div/>",{"class":"row has-margin-bottom-20"});var p=0;for(var k in o.images){if(p==0){l=a(m).clone()}var j=o.images[k];p++;a("<img/>",{src:j.display_sizes.thumb,"class":"img-responsive","data-id":k,title:j.caption,"data-artist":j.artist}).appendTo(a("<a/>",{href:"#"}).appendTo(a("<div/>",{"class":"col-md-4 col-sm-4 col-xs-8"}).appendTo(l)).click(function(t){t.preventDefault();a(this).addClass("selected");if(c.onImageSelect&&typeof c.onImageSelect==="function"){var s=a(this).find("img");var r=o.images[s.data("id")];c.onImageSelect({imageId:s.data("id"),imageSrc:r.display_sizes.thumb,previewImageSrc:r.display_sizes.preview,keywords:r.keywords,caption:s.attr("title"),artist:s.data("artist")})}}));if(p==c.itemRowCount){p=0;a(l).appendTo(c.thumbsDisplayContainer)}}if(p>0){p=0;a(l).appendTo(c.thumbsDisplayContainer)}}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(o,obj)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(obj,j.responseText)}else{a().General_ShowErrorMessage({message:j.responseText})}},beforeSend:function(k,j){a(".loader").removeClass("hide")},complete:function(j,k){a(".loader").addClass("hide");e=false}});return false})})}}(jQuery));(function(a){a.fn.General_AddRemoveSpinnerIcon=function(b){var d={};var c=a.extend({},d,b);return this.each(function(){var e=a(this);var f=a(this).attr("class");if(a(this).hasClass("fa-spinner")){a(this).attr("class",a(this).data("origcss"))}else{a(this).data("origcss",f);a(this).attr("class","fa fa-spinner fa-spin")}})};a.fn.General_AddRemoveAjaxLoader=function(c){var d={bgColor:"#dcdcdc",duration:800,opacity:0.7,classOveride:false};this.options=a.extend(d,c);this.container=a(this);this.init=function(){var e=this.container;this.remove();var f=a("<div></div>").css({"background-color":this.options.bgColor,opacity:this.options.opacity,width:e.width(),height:e.height(),position:"absolute",top:"0px",left:"0px","z-index":99999}).addClass("ajax_overlay");if(this.options.classOveride){f.addClass(this.options.classOveride)}e.append(f.append(a("<div></div>").addClass("ajax_loader")).fadeIn(this.options.duration))};this.remove=function(){var e=this.container.children(".ajax_overlay");if(e.length){e.fadeOut(this.options.classOveride,function(){e.remove()})}};var b=this.container.children(".ajax_overlay");if(b.length){this.remove()}else{this.init()}};a.fn.General_ShowErrorMessage=function(b){var d={message:"",type:"error",timeout:2000,title:"Error"};var c=a.extend({},d,b);if(c.message==""){return}bootbox.alert({title:c.title,message:c.message})};a.fn.General_ShowNotification=function(b){var d={message:"",type:"success",timeout:2000};var c=a.extend({},d,b);a.noty.closeAll();if(a("#noty_topRight_layout_container").length>0){a("#noty_topRight_layout_container").remove()}var e=noty({type:c.type,text:c.message,layout:"topRight",timeout:c.timeout,animation:{open:"animated bounceInRight",close:"animated bounceOutRight",easing:"swing",speed:500}})};a.fn.deleteBlog=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(h){h.preventDefault();var f=parseInt(a(this).data("id"));var g=a(this);bootbox.confirm({title:"Confirm",message:"Do You really want to delete this blog?",callback:function(i){if(i===true){a.ajax({type:"POST",url:baseHttpPath+"/user/delete-blog",dataType:"json",data:{id:f,_csrf:a('meta[name="csrf-token"]').attr("content")},success:function(k,l,j){if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,g)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(g,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(g)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(g)}}})}}})})})}}(jQuery));(function(a){a.fn.followCode=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(i){i.preventDefault();var f=parseInt(a(this).data("id"));var g=a(this).data("status");var h=a(this);if(g==="unfollow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-code",dataType:"json",data:{id:f,status:"unfollow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","follow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}else{if(g==="follow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-code",dataType:"json",data:{id:f,status:"follow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","unfollow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}}})})};a.fn.followBlog=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(i){i.preventDefault();var g=parseInt(a(this).data("id"));var f=a(this).data("status");var h=a(this);if(f==="unfollow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-blog",dataType:"json",data:{id:g,status:"unfollow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","follow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}else{if(f==="follow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-blog",dataType:"json",data:{id:g,status:"follow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","unfollow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}}})})};a.fn.followWriter=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(i){i.preventDefault();var g=parseInt(a(this).data("id"));var f=a(this).data("status");var h=a(this);if(f==="unfollow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-writer",dataType:"json",data:{id:g,status:"unfollow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","follow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}else{if(f==="follow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-writer",dataType:"json",data:{id:g,status:"follow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","unfollow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}}})})};a.fn.followPost=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(i){i.preventDefault();var g=parseInt(a(this).data("id"));var f=a(this).data("status");var h=a(this);if(f==="unfollow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-post",dataType:"json",data:{id:g,status:"unfollow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","follow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}else{if(f==="follow"){a.ajax({type:"POST",url:baseHttpPath+"/user/follow-post",dataType:"json",data:{id:g,status:"follow",_csrf:yii.getCsrfToken()},success:function(k,l,j){a(h).data("status","unfollow");if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k,h)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(h,j.responseText)}},beforeSend:function(k,j){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend(h)}},complete:function(j,k){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete(h)}}})}}})})}}(jQuery));(function(a){a.fn.SearchBlogs=function(b){var d={isClub:false,currentPage:1,followButton:"</button>",inputObj:a("<input/>"),searchItemsOuterContainer:a("<div/>"),searchItemsContainer:a("<div/>"),loadMoreButton:a("<button/>"),displayPageNumbersElement:a("<span/>"),searchButton:a("<button/>"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();c.currentPage=c.currentPage+1;a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.currentPage=1;a(f).trigger("submit")});a(f).submit(function(i){i.preventDefault();var g=a(c.inputObj).val();if(g===""){a().General_ShowNotification({message:"Please enter the search term"});return false}if(e!==g){e=g;c.currentPage=1}var h=baseHttpPath+"/search/blogs";if(c.isClub){h=baseHttpPath+"/search/clubs"}a.ajax({type:"post",url:h,dataType:"json",data:{search:g,page:c.currentPage,_csrf:yii.getCsrfToken()},success:function(k,m,j){a(c.searchItemsOuterContainer).removeClass("hide");if(k.totalRecords==0){a(c.searchItemsContainer).html('<p class="no-data">No blogs found for '+g+".</p>");a(c.loadMoreButton).addClass("hide");a(c.displayPageNumbersElement).addClass("hide")}else{var l=a(c.searchItemsContainer).find(c.followButton).length;a(c.displayPageNumbersElement).removeClass("hide");a(c.displayPageNumbersElement).html("Page: "+k.currentPage+"/"+k.totalPages);if(l<=0||c.currentPage<=1){a(c.searchItemsContainer).html(k.html)}else{a(k.html).appendTo(c.searchItemsContainer)}a(c.loadMoreButton).removeClass("hide");if(k.currentPage>=k.totalPages){a(c.loadMoreButton).addClass("hide")}}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(k)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(j.responseText)}else{a().General_ShowErrorMessage({message:j.responseText})}},beforeSend:function(k,j){a(".loader").removeClass("hide")},complete:function(j,k){a(".loader").addClass("hide")}});return false})})};a.fn.SearchUsers=function(b){var d={currentPage:1,followButton:"</button>",inputObj:a("<input/>"),searchItemsOuterContainer:a("<div/>"),searchItemsContainer:a("<div/>"),loadMoreButton:a("<button/>"),displayPageNumbersElement:a("<span/>"),searchButton:a("<button/>"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();c.currentPage=c.currentPage+1;a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.currentPage=1;a(f).trigger("submit")});a(f).submit(function(h){h.preventDefault();var g=a(c.inputObj).val();if(g===""){a().General_ShowNotification({message:"Please enter the search term"});return false}if(e!==g){e=g;c.currentPage=1}a.ajax({type:"post",url:baseHttpPath+"/search/users",dataType:"json",data:{search:g,page:c.currentPage,_csrf:yii.getCsrfToken()},success:function(j,l,i){a(c.searchItemsOuterContainer).removeClass("hide");if(j.totalRecords==0){a(c.searchItemsContainer).html('<p class="no-data">No users found for '+g+".</p>");a(c.loadMoreButton).addClass("hide");a(c.displayPageNumbersElement).addClass("hide")}else{var k=a(c.searchItemsContainer).find(c.followButton).length;a(c.displayPageNumbersElement).removeClass("hide");a(c.displayPageNumbersElement).html("Page: "+j.currentPage+"/"+j.totalPages);if(k<=0||c.currentPage<=1){a(c.searchItemsContainer).html(j.html)}else{a(j.html).appendTo(c.searchItemsContainer)}a(c.loadMoreButton).removeClass("hide");if(j.currentPage>=j.totalPages){a(c.loadMoreButton).addClass("hide")}}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(j)}},error:function(i,k,j){if(c.onError&&typeof c.onError==="function"){c.onError(i.responseText)}else{a().General_ShowErrorMessage({message:i.responseText})}},beforeSend:function(j,i){a(".loader").removeClass("hide")},complete:function(i,j){a(".loader").addClass("hide")}});return false})})};a.fn.SearchYoutube=function(b){var d={nextPageToken:"",modalContainer:a("#ModalYoutube"),inputObj:a("#SearchYoutubeVideos input.SearchYoutubeInput"),searchItemsOuterContainer:a("div.YoutubeVideosOuterContainer"),searchItemsContainer:a("ul.YoutubeVideosListContainer"),loadMoreButton:a("button.YoutubeLoadMore"),searchButton:a("#SearchYoutubeVideos button.SearchYoutubeBtn"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();if(a(this).data("next-page-token")){c.nextPageToken=a(this).data("next-page-token")}a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.nextPageToken="";a(f).trigger("submit")});a(f).submit(function(j){j.preventDefault();var g=a(c.inputObj).val();if(g===""){a().General_ShowNotification({message:"Please enter the search term",type:"error"});return false}if(e!==g){e=g;c.nextPageToken="";a(c.searchItemsContainer).html("");a(c.loadMoreButton).addClass("hide")}var i=a("#youtube-search-item-template").html();var h=Handlebars.compile(i);a.ajax({type:"post",url:baseHttpPath+"/search/youtube",dataType:"json",data:{search:g,nextPageToken:c.nextPageToken,_csrf:yii.getCsrfToken()},success:function(n,q,m){a(c.searchItemsOuterContainer).removeClass("hide");if(n.videos.length>0){var p=a(c.searchItemsContainer).find("li").length;if(p<=0||c.nextPageToken===""){a(c.searchItemsContainer).html("")}for(var l in n.videos){var k={videoId:n.videos[l].id,imgSrc:n.videos[l].thumbnail,title:n.videos[l].title,description:n.videos[l].description,largeImage:n.videos[l].image};var o=h(k);a(o).appendTo(c.searchItemsContainer)}if(n.nextPageToken===""){a(c.loadMoreButton).addClass("hide");a(c.loadMoreButton).data("next-page-token","")}else{a(c.loadMoreButton).removeClass("hide");a(c.loadMoreButton).data("next-page-token",n.nextPageToken)}}else{a(c.searchItemsContainer).html('<p class="no-data">No videos found.</p>');a(c.loadMoreButton).addClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(n)}},error:function(k,m,l){if(c.onError&&typeof c.onError==="function"){c.onError(k.responseText)}else{a().General_ShowErrorMessage({message:k.responseText,type:"error"})}},beforeSend:function(l,k){a(".loader",c.modalContainer).removeClass("hide")},complete:function(k,l){a(".loader",c.modalContainer).addClass("hide")}});return false})})};a.fn.SearchInstagram=function(b){var d={minId:"",modalContainer:a("#ModalInstagram"),inputObj:a("#SearchInstagramForm input.SearchInstagramInput"),searchItemsOuterContainer:a("div.InstagramOuterContainer"),searchItemsContainer:a("ul.InstagramListContainer"),loadMoreButton:a("button.InstagramLoadMore"),searchButton:a("#SearchInstagramForm button.SearchInstagramBtn"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();if(a(this).data("min-id")){c.minId=a(this).data("min-id")}a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.maxId="";a(f).trigger("submit")});a(f).submit(function(j){j.preventDefault();var h=a(c.inputObj).val();if(h===""){a().General_ShowNotification({message:"Please enter the search term",type:"error"});return false}if(e!==h){e=h;c.maxId="";a(c.searchItemsContainer).html("");a(c.loadMoreButton).addClass("hide")}var g=a("#instagram-search-item-template").html();var i=Handlebars.compile(g);a.ajax({type:"post",url:baseHttpPath+"/search/instagram",dataType:"json",data:{search:h,minId:c.minId,_csrf:yii.getCsrfToken()},success:function(n,q,m){a(c.searchItemsOuterContainer).removeClass("hide");var p=a(c.searchItemsContainer).find("li").length;if(n.media.length>0){if(p<=0&&c.minId===""){a(c.searchItemsContainer).html("")}for(var l in n.media){var k={thumbnail:n.media[l].userImage,postedTime:n.media[l].createdAt,userName:n.media[l].userName,screenName:n.media[l].userScreenName,description:n.media[l].text,id:n.media[l].id,link:n.media[l].link};var o=i(k);a(o).appendTo(c.searchItemsContainer)}if(n.min_tag_id===""){a(c.loadMoreButton).addClass("hide").data("min-id","")}else{a(c.loadMoreButton).removeClass("hide").data("min-id",n.min_tag_id)}}else{if(p<=0){a(c.searchItemsContainer).html('<p class="no-data">No records found.</p>')}a(c.loadMoreButton).addClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(n)}},error:function(k,m,l){if(c.onError&&typeof c.onError==="function"){c.onError(k.responseText)}else{a().General_ShowErrorMessage({message:k.responseText,type:"error"})}},beforeSend:function(l,k){a(".loader",c.modalContainer).removeClass("hide")},complete:function(k,l){a(".loader",c.modalContainer).addClass("hide")}});return false})})};a.fn.SearchTwitter=function(b){var d={maxId:"",modalContainer:a("#ModalTwitterInternal"),inputObj:a("#SearchTwitterForm input.SearchTwitterInput"),searchItemsOuterContainer:a("div.TwitterOuterContainer"),searchItemsContainer:a("ul.TwitterListContainer"),loadMoreButton:a("button.TwitterLoadMore"),searchButton:a("#SearchTwitterForm button.SearchTwitterBtn"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();if(a(this).data("max-id")){c.maxId=a(this).data("max-id")}a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.maxId="";a(f).trigger("submit")});a(f).submit(function(j){j.preventDefault();var h=a(c.inputObj).val();if(h===""){a().General_ShowNotification({message:"Please enter the search term",type:"error"});return false}if(e!==h){e=h;c.maxId="";a(c.searchItemsContainer).html("");a(c.loadMoreButton).addClass("hide")}var g=a("#search-tweet-item-template").html();var i=Handlebars.compile(g);a.ajax({type:"post",url:baseHttpPath+"/search/twitter",dataType:"json",data:{search:h,maxId:c.maxId,_csrf:yii.getCsrfToken()},success:function(n,q,m){a(c.searchItemsOuterContainer).removeClass("hide");if(n.tweets.length>0){var p=a(c.searchItemsContainer).find("li").length;if(p<=0||c.maxId===""){a(c.searchItemsContainer).html("")}for(var l in n.tweets){var k={thumbnail:n.tweets[l].userImage,postedTime:n.tweets[l].createdAt,userName:n.tweets[l].userName,screenName:n.tweets[l].userScreenName,description:n.tweets[l].text,id:n.tweets[l].id};var o=i(k);a(o).appendTo(c.searchItemsContainer)}if(n.maxId===""){a(c.loadMoreButton).addClass("hide").data("max-id","")}else{a(c.loadMoreButton).removeClass("hide").data("max-id",n.maxId)}}else{a(c.searchItemsContainer).html('<p class="no-data">No tweets found.</p>');a(c.loadMoreButton).addClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(n)}},error:function(k,m,l){if(c.onError&&typeof c.onError==="function"){c.onError(k.responseText)}else{a().General_ShowErrorMessage({message:k.responseText,type:"error"})}},beforeSend:function(l,k){a(".loader",c.modalContainer).removeClass("hide")},complete:function(k,l){a(".loader",c.modalContainer).addClass("hide")}});return false})})};a.fn.SearchVimeo=function(b){var d={nextPageToken:"",modalContainer:a("#ModalVimeo"),inputObj:a("#SearchVimeoVideos input.SearchVimeoInput"),searchItemsOuterContainer:a("div.VimeoVideosOuterContainer"),searchItemsContainer:a("ul.VimeoVideosListContainer"),loadMoreButton:a("button.VimeoLoadMore"),searchButton:a("#SearchVimeoVideos button.SearchVimeoBtn"),onSuccess:false,onError:false};var c=a.extend({},d,b);return this.each(function(){var f=a(this);var e="";a(c.loadMoreButton).click(function(g){g.preventDefault();if(a(this).data("next-page-token")){c.nextPageToken=a(this).data("next-page-token")}a(f).trigger("submit")});a(c.searchButton).click(function(g){g.preventDefault();c.nextPageToken="";a(f).trigger("submit")});a(f).submit(function(j){j.preventDefault();var g=a(c.inputObj).val();if(g===""){a().General_ShowNotification({message:"Please enter the search term",type:"error"});return false}if(e!==g){e=g;c.nextPageToken="";a(c.searchItemsContainer).html("");a(c.loadMoreButton).addClass("hide");a(c.searchItemsOuterContainer).addClass("hide")}var i=a("#vimeo-search-item-template").html();var h=Handlebars.compile(i);a.ajax({type:"post",url:baseHttpPath+"/search/vimeo",dataType:"json",data:{search:g,nextPageToken:c.nextPageToken,_csrf:yii.getCsrfToken()},success:function(n,q,m){a(c.searchItemsOuterContainer).removeClass("hide");if(n.videos.length>0){var p=a(c.searchItemsContainer).find("li").length;if(p<=0||c.nextPageToken===""){a(c.searchItemsContainer).html("")}for(var l in n.videos){var k={videoId:n.videos[l].id,imgSrc:n.videos[l].thumbnail,title:n.videos[l].title,description:n.videos[l].description,largeImage:n.videos[l].image};var o=h(k);a(o).appendTo(c.searchItemsContainer)}if(n.nextPageToken===""){a(c.loadMoreButton).addClass("hide");a(c.loadMoreButton).data("next-page-token","")}else{a(c.loadMoreButton).removeClass("hide");a(c.loadMoreButton).data("next-page-token",n.nextPageToken)}}else{a(c.searchItemsContainer).html('<p class="no-data">No videos found.</p>');a(c.loadMoreButton).addClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(n)}},error:function(k,m,l){if(c.onError&&typeof c.onError==="function"){c.onError(k.responseText)}else{a().General_ShowErrorMessage({message:k.responseText,type:"error"})}},beforeSend:function(l,k){a(".loader",c.modalContainer).removeClass("hide")},complete:function(k,l){a(".loader",c.modalContainer).addClass("hide")}});return false})})}}(jQuery));(function(a){a.fn.FansuniteImages=function(b){var d={pageSize:20,currentPage:1,itemRowCount:4,inputObj:a("<input/>"),thumbsOuterContainer:a("<div/>"),thumbsDisplayContainer:a("<div/>"),loadMoreButton:a("<button/>"),displayPageNumbersElement:a("<span/>"),onSuccess:false,onError:false,onImageSelect:false};var c=a.extend({},d,b);return this.each(function(){var g=a(this);var f="";var e=false;a(c.loadMoreButton).click(function(h){h.preventDefault();e=true;c.currentPage=c.currentPage+1;a(g).trigger("submit")});a(g).submit(function(i){i.preventDefault();var h=a(c.inputObj).val();if(h===""){a().General_ShowNotification({message:"Please enter the search phrase",type:"error"});return false}if(f!==h){f=h;c.currentPage=1;a(c.thumbsDisplayContainer).empty();a(c.thumbsOuterContainer).addClass("hide")}else{if(!e){return}}a.ajax({type:"get",url:baseHttpPath+"/general/search-images",dataType:"json",data:{s:h,limit:c.pageSize,page:c.currentPage},success:function(o,q,n){if(o.totalFoundImages==0){a(c.thumbsOuterContainer).removeClass("hide");a(c.loadMoreButton).addClass("hide");a(c.displayPageNumbersElement).addClass("hide");a(c.thumbsOuterContainer).children(".scroller-clubs").html('<p class="no-data">No data found.</p>')}else{a(c.loadMoreButton).removeClass("hide");a(c.displayPageNumbersElement).removeClass("hide");a(c.thumbsOuterContainer).removeClass("hide");if(o.totalImages==0||o.currentPage==o.totalPages){a(c.loadMoreButton).addClass("hide")}a(c.displayPageNumbersElement).html("Page: "+o.currentPage+"/"+o.totalPages);var l;var m=a("<div/>",{"class":"row has-margin-bottom-20"});var p=0;for(var k in o.images){if(p==0){l=a(m).clone()}var j=o.images[k];p++;a("<img/>",{src:j.thumb,"class":"img-responsive","data-id":k,title:j.caption}).appendTo(a("<a/>",{href:"#"}).appendTo(a("<div/>",{"class":"col-md-4 col-sm-4 col-xs-8"}).appendTo(l)).click(function(t){t.preventDefault();a(this).addClass("selected");if(c.onImageSelect&&typeof c.onImageSelect==="function"){var s=a(this).find("img");var r=o.images[s.data("id")];c.onImageSelect({imageId:s.data("id"),imageSrc:r.thumb,caption:s.attr("title")})}}));if(p==c.itemRowCount){p=0;a(l).appendTo(c.thumbsDisplayContainer)}}if(p>0){p=0;a(l).appendTo(c.thumbsDisplayContainer)}}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(o,obj)}},error:function(j,l,k){if(c.onError&&typeof c.onError==="function"){c.onError(obj,j.responseText)}else{a().General_ShowErrorMessage({message:j.responseText})}},beforeSend:function(k,j){a(".loader").removeClass("hide")},complete:function(j,k){a(".loader").addClass("hide");e=false}});return false})})}}(jQuery));var AuthController=(function(c){var b=function(){c(".counter").timer({duration:"1s",callback:function(){var e=parseInt(c(".timer").text());c(".timer").text(e-1);if(e==1){c(".counter").timer("remove");window.location.href=c(".timer").data("ref")}},repeat:true})};var a=function(){c("a.SocialSignupLoginBtn").on("click",function(j){var i=c(this).data("type");var g=c(this).data("action");var f="Social "+g;var k=g+" with "+i;var h=k+" clicked";ga("send","event",f,k,h)})};var d=function(){c("#signin-form").live("submit",function(){var e=c(this).serialize();c.ajax({type:"POST",url:baseHttpPath+"/auth/sign-in",dataType:"json",data:e,success:function(f){if(f.success){window.close()}},error:function(f){c().General_ShowErrorMessage({message:"Invalid Login Credentials"})}});return false})};return{thankyou:function(){b()},trackSocialLoginSignup:function(){a()},signin:function(){d()}}}(jQuery));var PageController=function(b){var a=function(){b("form#contactForm").on("beforeSubmit",function(f,e,c){f.preventDefault();var d=b(this);if(d.find(".has-error").length){return false}b.ajax({url:baseHttpPath+"/page/sendcontactusmail",type:"post",data:d.serialize(),dataType:"json",success:function(g){if(g.success){b("#contactMessage").removeClass("hide");d.slideUp()}else{b("#contactErrorContainerContent").html(g.error);b("#contactErrorContainer").removeClass("hide")}},error:function(g){b("#contactErrorContainerContent").html(g.responseText);b("#contactErrorContainer").removeClass("hide").show()}});return false})};return{init:function(){},contact:a}}(jQuery);var ProfileController=(function(a){return{init:function(){ProfileController.ProfileTab.init();ProfileController.ProfileSettingsTab.init();ProfileController.CustomiseTab.init()}}}(jQuery));ProfileController.ProfileTab=(function(b){var a=function(){Dropzone.autoDiscover=false;var c=new Dropzone("#dropzone",{paramName:"profile_large_media_file",maxFiles:1,init:function(){this.on("success",function(e,d){b("div.user-pic span").html("<img src='"+d+"' class='img-circle img-responsive' />");b("#dropzoneTimer").timer({duration:"2s",callback:function(){c.removeFile(e);b("#dropzoneTimer").timer("remove");b("#profile-pic-upload-modal").modal("hide")},repeat:false})})}});b("button.disconnect").click(function(f){f.preventDefault();f.stopPropagation();var d=b(this).data("social");var g=b(this);bootbox.confirm({title:"Confirm",message:"Do you really want to disconnect this social account?",callback:function(e){if(e){b.ajax({type:"POST",url:baseHttpPath+"/user/disconnect-social",dataType:"json",data:{social:d,_csrf:yii.getCsrfToken()},success:function(i,j,h){b(g).parent("a").removeClass("connected").addClass("not-connected");b(g).remove()},error:function(h,j,i){b().General_ShowErrorMessage({message:h.responseText})}})}}})})};return{init:function(){a()}}}(jQuery));ProfileController.ProfileSettingsTab=(function(b){var a=function(){b(".AddMoreWebsiteUrl").on("click",function(d){d.preventDefault();var c=b(this).attr("shownext");b(".field-usersetting-website_url"+c).slideDown("slow");b(this).hide()});b(".RemoveWebsiteUrl").on("click",function(g){g.preventDefault();var d=b(this).attr("removenum");b("#usersetting-website_url"+d).val("");var h=b(this).parent("div");var f=d-1;var c=h.siblings(".field-usersetting-website_url"+f);c.children(".AddMoreWebsiteUrl").show();b(".field-usersetting-website_url"+d).slideUp("slow")})};return{init:function(){a()}}}(jQuery));ProfileController.CustomiseTab=(function(d){var f=function(){d(".UnfollowCode").followCode({onSuccess:function(l,m){d("#codes li.Code"+d(m).data("id")).remove();if(d("#codes ul.tabular-data-list li").length==0){d("#codes ul.tabular-data-list").addClass("hide");d("#codes p.no-data").removeClass("hide")}d().General_ShowNotification({message:"Successfully unfollowed"})},onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(l){d("i",l).General_AddRemoveSpinnerIcon()}})};var a=function(){d(".UnfollowClub").followBlog({onSuccess:function(l,m){d().General_ShowNotification({message:"Successfully unfollowed"});d("#clubs li.Club"+d(m).data("id")).remove();if(d("#clubs ul.tabular-data-list li").length===0){d("#clubs ul.tabular-data-list").addClass("hide");d("#clubs p.no-data").removeClass("hide")}},onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(l){d("i",l).General_AddRemoveSpinnerIcon()}})};var b=function(){d(".UnfollowBlog").followBlog({onSuccess:function(l,m){d().General_ShowNotification({message:"Successfully unfollowed"});d("#blogs li.Blog"+d(m).data("id")).remove();if(d("#blogs ul.blog-level-lists li").length===0){d("#blogs ul.blog-level-lists").addClass("hide");d("#blogs p.no-data").removeClass("hide")}},onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(l){d("i",l).General_AddRemoveSpinnerIcon()}})};var j=function(){d(".UnfollowWriter").followWriter({onSuccess:function(l,m){d().General_ShowNotification({message:"Successfully unfollowed"});d("#writers li.Writer"+d(m).data("id")).remove();if(d("#writers ul.blog-level-lists li").length===0){d("#writers ul.blog-level-lists").addClass("hide");d("#writers p.no-data").removeClass("hide")}},onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(l){d("i",l).General_AddRemoveSpinnerIcon()}})};var e=function(){d(".WidgetAddClub").followBlog({onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(m){d("i",m).General_AddRemoveSpinnerIcon();if(d(m).data("status")==="follow"){d().General_ShowNotification({message:"Successfully unfollowed"});d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-plus"></i></span>');d("#clubs li.Club"+d(m).data("id")).remove();if(d("#clubs ul.tabular-data-list li").length===0){d("#clubs ul.tabular-data-list").addClass("hide");d("#clubs p.no-data").removeClass("hide")}}else{d().General_ShowNotification({message:"Successfully followed"});d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-close"></i></span>');var l=d(m).parent("li.Club"+d(m).data("id")).clone();d(l).find("a.WidgetAddClub").removeClass("WidgetAddClub").addClass("UnfollowClub").data("status","unfollow");d("#clubs ul.tabular-data-list").append(l);d(".UnfollowClub").unbind("click");a();d("#clubs ul.tabular-data-list").removeClass("hide");d("#clubs p.no-data").addClass("hide")}}})};var h=function(){d(".WidgetAddBlog").followBlog({onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(m){d("i",m).General_AddRemoveSpinnerIcon();if(d(m).data("status")==="follow"){d().General_ShowNotification({message:"Successfully unfollowed"});d(m).children("button").html('<span><i class="fa fa-plus"></i></span>');d("#blogs li.Blog"+d(m).data("id")).remove();if(d("#blogs ul.blog-level-lists li").length===0){d("#blogs ul.blog-level-lists").addClass("hide");d("#blogs p.no-data").removeClass("hide")}}else{d().General_ShowNotification({message:"Successfully followed"});d(m).children("button").html('<span><i class="fa fa-close"></i></span>');var l=d(m).parent("li.Blog"+d(m).data("id")).clone();d(l).find("a.WidgetAddBlog").removeClass("WidgetAddBlog").addClass("UnfollowBlog").data("status","unfollow");d("#blogs ul.blog-level-lists").append(l);d(".UnfollowBlog").unbind("click");b();d("#blogs ul.blog-level-lists").removeClass("hide");d("#blogs p.no-data").addClass("hide")}}})};var g=function(){d(".WidgetAddWriter").followWriter({onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(m){d("i",m).General_AddRemoveSpinnerIcon();if(d(m).data("status")==="follow"){d().General_ShowNotification({message:"Successfully unfollowed"});d(m).children("button").html('<span><i class="fa fa-plus"></i></span>');d("#writers li.Writer"+d(m).data("id")).remove();if(d("#writers ul.blog-level-lists li").length===0){d("#writers ul.blog-level-lists").addClass("hide");d("#writers p.no-data").removeClass("hide")}}else{d().General_ShowNotification({message:"Successfully followed"});d(m).children("button").html('<span><i class="fa fa-close"></i></span>');var l=d(m).parent("li.Writer"+d(m).data("id")).clone();d(l).find("a.WidgetAddWriter").removeClass("WidgetAddWriter").addClass("UnfollowWriter").data("status","unfollow");d("#writers ul.blog-level-lists").append(l);d(".UnfollowWriter").unbind("click");j();d("#writers ul.blog-level-lists").removeClass("hide");d("#writers p.no-data").addClass("hide")}}})};var c=function(){d.ajax({type:"POST",url:baseHttpPath+"/search/popular-blogs",dataType:"json",data:{blogs:1},success:function(p,r,m){if(p.blogs.length>0){var o=d("#addblogwidget-item-template").html();var l=Handlebars.compile(o);for(var n in p.blogs){var q=l(p.blogs[n]);d("ul.BlogsListContainer").append(q)}d("ul.BlogsListContainer").parent("div.portlet-body").parent("div.elem-block").parent("div.blog-level").removeClass("hide");d("#Customise").find("a.UnfollowBlog").each(function(){var s=d(this).data("id");var t=d("#ModalNewBlog").find("a.WidgetAddBlog[data-id="+s+"]");d(t).data("status","unfollow");d(t).children("button").html('<span><i class="fa fa-close"></i></span>')});d("#MyFansUnite").find("button.UnfollowBlog").each(function(){var s=d(this).data("id");var t=d("#ModalNewBlog").find("a.WidgetAddBlog[data-id="+s+"]");d(t).data("status","unfollow");d(t).children("button").html('<span><i class="fa fa-close"></i></span>')});d("a.WidgetAddBlog").unbind("click");h()}},error:function(l,n,m){d().General_ShowErrorMessage({message:l.responseText})},beforeSend:function(m,l){},complete:function(l,m){}})};var k=function(){d.ajax({type:"POST",url:baseHttpPath+"/search/popular-writers",dataType:"json",data:{writers:1},success:function(q,r,n){if(q.writers.length>0){var p=d("#addwriterwidget-item-template").html();var l=Handlebars.compile(p);for(var o in q.writers){var m=l(q.writers[o]);d("ul.WritersListContainer").append(m)}d("ul.WritersListContainer").parent("div.portlet-body").parent("div.elem-block").parent("div.blog-level").removeClass("hide");d("#Customise").find("a.UnfollowWriter").each(function(){var s=d(this).data("id");var t=d("#ModalNewWriter").find("a.WidgetAddWriter[data-id="+s+"]");d(t).data("status","unfollow");d(t).children("button").html('<span><i class="fa fa-close"></i></span>')});d("a.WidgetAddWriter").unbind("click");g()}},error:function(l,n,m){d().General_ShowErrorMessage({message:l.responseText})},beforeSend:function(m,l){},complete:function(l,m){}})};var i=function(){f();a();b();j();d(".FollowUnfollowUser").followWriter({onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(m){d("i",m).General_AddRemoveSpinnerIcon();var l=d(m).data("status");(l==="follow")?d(m).removeClass("selected"):d(m).addClass("selected")}});d(".WidgetAddCode").followCode({onError:function(m,l){d().General_ShowErrorMessage({message:l})},beforeSend:function(l){d("i",l).General_AddRemoveSpinnerIcon()},onComplete:function(m){d("i",m).General_AddRemoveSpinnerIcon();if(d(m).data("status")==="follow"){d().General_ShowNotification({message:"Successfully unfollowed"});d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-plus"></i></span>');d("#codes li.Code"+d(m).data("id")).remove();if(d("#codes ul.tabular-data-list li").length==0){d("#codes ul.tabular-data-list").addClass("hide");d("#codes p.no-data").removeClass("hide")}}else{d().General_ShowNotification({message:"Successfully followed"});d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-close"></i></span>');var l=d(m).parent("li.Code"+d(m).data("id")).clone();d(l).find("a.WidgetAddCode").removeClass("WidgetAddCode").addClass("UnfollowCode").data("status","unfollow");d("#codes ul.tabular-data-list").removeClass("hide").append(l);d(".UnfollowCode").unbind("click");f();d("#codes p.no-data").addClass("hide")}}});d("#ModalNewCode").on("shown",function(){d("#ModalNewCode").find("a.WidgetAddCode").each(function(){d(this).data("status","follow");d(this).children("span:eq(1)").children("button").html('<span><i class="fa fa-plus"></i></span>')});d("#Customise").find("a.UnfollowCode").each(function(){var l=d(this).data("id");var m=d("#ModalNewCode").find("a.WidgetAddCode[data-id="+l+"]");d(m).data("status","unfollow");d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-close"></i></span>')})});e();d("#SearchClubsForm").SearchBlogs({isClub:true,followButton:"a.WidgetAddClub",inputObj:d("#SearchClubsForm input.SearchClubsInput"),searchItemsOuterContainer:d("#ModalNewClub div.blog-level"),searchItemsContainer:d("ul.ClubsListContainer"),displayPageNumbersElement:d("span.AddClubPages"),loadMoreButton:d("button.AddClubLoadMore"),searchButton:d("#SearchClubsBtn"),onSuccess:function(l){d(".WidgetAddClub").unbind("click");e()}});d("#ModalNewClub").on("shown",function(){d("#ModalNewClub").find("a.WidgetAddClub").each(function(){d(this).data("status","follow");d(this).children("span:eq(1)").children("button").html('<span><i class="fa fa-plus"></i></span>')});d("#Customise").find("a.UnfollowClub").each(function(){var l=d(this).data("id");var m=d("#ModalNewClub").find("a.WidgetAddClub[data-id="+l+"]");d(m).data("status","unfollow");d(m).children("span:eq(1)").children("button").html('<span><i class="fa fa-close"></i></span>')})});h();d("#SearchBlogsForm").SearchBlogs({isClub:false,followButton:"a.WidgetAddBlog",inputObj:d("#SearchBlogsForm input.SearchBlogsInput"),searchItemsOuterContainer:d("#ModalNewBlog div.blog-level"),searchItemsContainer:d("ul.BlogsListContainer"),displayPageNumbersElement:d("span.AddBlogPages"),loadMoreButton:d("button.AddBlogLoadMore"),searchButton:d("#SearchBlogsBtn"),onSuccess:function(l){d(".WidgetAddBlog").unbind("click");h()}});d("#ModalNewBlog").on("shown",function(){if(d("#ModalNewBlog").find("a.WidgetAddBlog").length==0){c()}d("#ModalNewBlog").find("a.WidgetAddBlog").each(function(){d(this).data("status","follow");d(this).children("button").html('<span><i class="fa fa-plus"></i></span>')});d("#Customise").find("a.UnfollowBlog").each(function(){var l=d(this).data("id");var m=d("#ModalNewBlog").find("a.WidgetAddBlog[data-id="+l+"]");d(m).data("status","unfollow");d(m).children("button").html('<span><i class="fa fa-close"></i></span>')})});g();d("#SearchWritersForm").SearchUsers({followButton:"a.WidgetAddWriter",inputObj:d("#SearchWritersForm input.SearchWritersInput"),searchItemsOuterContainer:d("#ModalNewWriter div.blog-level"),searchItemsContainer:d("ul.WritersListContainer"),displayPageNumbersElement:d("span.AddWriterPages"),loadMoreButton:d("button.AddWriterLoadMore"),searchButton:d("#SearchWritersBtn"),onSuccess:function(l){d(".WidgetAddWriter").unbind("click");g()}});d("#ModalNewWriter").on("shown",function(){if(d("#ModalNewWriter").find("a.WidgetAddWriter").length==0){k()}d("#ModalNewWriter").find("a.WidgetAddWriter").each(function(){d(this).data("status","follow");d(this).children("button").html('<span><i class="fa fa-plus"></i></span>')});d("#Customise").find("a.UnfollowWriter").each(function(){var l=d(this).data("id");var m=d("#ModalNewWriter").find("a.WidgetAddWriter[data-id="+l+"]");d(m).data("status","unfollow");d(m).children("button").html('<span><i class="fa fa-close"></i></span>')})})};return{init:function(){i()}}}(jQuery));ProfileController.MyFansunite=(function(b){var a=function(){b(".posts-excerpt .game-title").autoEllipsisText();b(".blurb").autoEllipsisText({multiline:true,accuracyStep:1});var d=function(e){var g={loader:b("div.loader"),container:b("div.posts"),onSuccess:false,onError:false,beforeSend:false,onComplete:false};var f=b.extend({},g,e);var h=parseInt(b(f.container).data("offset"));if(isNaN(h)){return}h=h+postsOffset;b(f.container).data("offset",h);b.ajax({type:"POST",url:baseHttpPath+"/user/more-posts",dataType:"json",data:{offset:h},success:function(n,j,p){if(n.articles.length>0){var i=b("#user-post-template").html();var q=Handlebars.compile(i);var l=b("#user-social-post-template").html();var m=Handlebars.compile(l);for(var k in n.articles){var o;if(n.articles[k].postId>0){o=q(n.articles[k])}else{o=m(n.articles[k])}b(f.container).append(o)}if(n.articles.length<postsOffset){c.destroy()}else{Waypoint.refreshAll()}}if(f.onSuccess&&typeof f.onSuccess==="function"){f.onSuccess(n)}},error:function(i,k,j){if(f.onError&&typeof f.onError==="function"){f.onError(i.responseText)}},beforeSend:function(j,i){b(f.loader).removeClass("hide");if(f.beforeSend&&typeof f.beforeSend==="function"){f.beforeSend()}},complete:function(i,j){b(f.loader).addClass("hide");if(f.onComplete&&typeof f.onComplete==="function"){f.onComplete()}}})};var c=new Waypoint({element:b("#LoadMoreArticles"),offset:"80%",handler:function(e){if(e=="down"){d({})}}})};return{init:function(){a()}}}(jQuery));var MyBlogController=(function(b){var a=function(){b(".custom-blog-select").change(function(){var d=b(this).closest("div.tab-pane").attr("id").toLowerCase();var c=b(this).val();if(c!=""){if(d==="workflow"){window.location.href=baseHttpPath+"/workflow/index?blogId="+c}else{window.location.href=baseHttpPath+"/user-blogs/"+d+"?blogId="+c}}})};return{init:function(){a();MyBlogController.BlogsTab.init()},create:function(){a();MyBlogController.CreateEditBlog.init()},permission:function(){a();MyBlogController.PermissionsTab.init()},connect:function(){a();MyBlogController.ConnectTab.init()},insights:function(){a();MyBlogController.InsightsTab.init()},facebookPageScroll:function(){MyBlogController.ConnectTab.facebookPageScroll()},newsletter:function(){MyBlogController.Newsletter.init()},workFlow:function(){a();MyBlogController.WorkFlowTab.init()},gallery:function(){a();MyBlogController.Gallery.init()}}}(jQuery));MyBlogController.CreateEditBlog=(function(b){var a=function(){Dropzone.autoDiscover=false;var e=new Dropzone("#dropzone",{paramName:"cover_media_file",addRemoveLinks:false,maxFiles:1,init:function(){this.on("success",function(g,f){b("#blog-cover-image").attr("src",f);b("#createeditblogform-cover_image_getty").val("");b("#createeditblogform-cover_image_upload").val(f);b().General_ShowNotification({message:"Image added successfully"});b("#dropzoneTimer").timer({duration:"2s",callback:function(){e.removeFile(g);b("#dropzoneTimer").timer("remove");b("#ModalCoverImage").modal("hide")},repeat:false})})}});var d=false;b("#GettyImages form").GettyImages({inputObj:b("#GettyImages form input.GettyImagesInput"),thumbsOuterContainer:b("#GettyImages div.blog-level"),thumbsDisplayContainer:b("#GettyImages div.scroller-clubs"),displayPageNumbersElement:b("#GettyImages span.GettyImagesPages"),loadMoreButton:b("#GettyImages button.GettyImagesLoadMore"),onImageSelect:function(g){if(d){b().General_ShowNotification({message:"Image download already in progress",type:"error"});return}var f=g.imageId;b.ajax({type:"post",url:baseHttpPath+"/user-blogs/upload-getty-image",dataType:"json",data:{id:f,_csrf:yii.getCsrfToken()},success:function(j,k,i){var h=j.imageSrc;b("#blog-cover-image").attr("src",h);b("#createeditblogform-cover_image_getty").val("");b("#createeditblogform-cover_image_upload").val(h);b("#ModalCoverImage").modal("hide");b().General_ShowNotification({message:"Image added successfully"})},error:function(h,j,i){b().General_ShowErrorMessage({message:h.responseText,type:"error"});return false},beforeSend:function(i,h){d=true;b("#ModalCoverImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(h,i){d=false;b("#ModalCoverImage .modal-content").General_AddRemoveAjaxLoader()}})}});var c=new Dropzone("#thumbnailDropzone",{paramName:"blog_media_file",addRemoveLinks:false,maxFiles:1,init:function(){this.on("success",function(g,f){var h="<img src='"+f+"' class='img-circle' width='100' height='100' />";b(".profile-upload .user-pic span").html(h);b("#createeditblogform-blog_thumbnail_image_getty").val("");b("#createeditblogform-blog_thumbnail_image_upload").val(f);b().General_ShowNotification({message:"Image added successfully"});b("#dropzoneThumbnailTimer").timer({duration:"2s",callback:function(){c.removeFile(g);b("#dropzoneThumbnailTimer").timer("remove");b("#ModalThumbnailImage").modal("hide")},repeat:false})})}});b("#GettyThumbnailImages form").GettyImages({inputObj:b("#GettyThumbnailImages form input.GettyImagesInput"),thumbsOuterContainer:b("#GettyThumbnailImages div.blog-level"),thumbsDisplayContainer:b("#GettyThumbnailImages div.scroller-clubs"),displayPageNumbersElement:b("#GettyThumbnailImages span.GettyImagesPages"),loadMoreButton:b("#GettyThumbnailImages button.GettyImagesLoadMore"),onImageSelect:function(g){if(d){b().General_ShowNotification({message:"Image download already in progress",type:"error"});return}var f=g.imageId;b.ajax({type:"post",url:baseHttpPath+"/user-blogs/upload-getty-image",dataType:"json",data:{id:f,_csrf:yii.getCsrfToken()},success:function(k,l,j){var h=k.imageSrc;var i="<img src='"+h+"' class='img-circle' width='100' height='100' />";b(".profile-upload .user-pic span").html(i);b("#createeditblogform-thumbnail_image_getty").val("");b("#createeditblogform-thumbnail_image_upload").val(h);b("#ModalThumbnailImage").modal("hide");b().General_ShowNotification({message:"Image added successfully"})},error:function(h,j,i){b().General_ShowErrorMessage({message:h.responseText,type:"error"});return false},beforeSend:function(i,h){d=true;b("#ModalThumbnailImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(h,i){d=false;b("#ModalThumbnailImage .modal-content").General_AddRemoveAjaxLoader()}})}});b("#BlogArticleTags").autocompleter({highlightMatches:true,source:baseHttpPath+"/general/tags",hint:true,empty:false,limit:10,minLength:3});b(".sr-plus").click(function(j){j.preventDefault();var h=b("#blogTags").val();var g=b("#BlogArticleTags").val();if(g===""){return}var i=Handlebars.compile(userblogs_createeditblog_tags);var f=[{inputValue:g}];b("#blogTags").val(h+g+",");b(".autocomplete-selected-item-lists").removeClass("hide").append(i(f));b("#BlogArticleTags").val("")});b(".autocomplete-selected-item-lists").on("click",".tag",function(i){i.preventDefault();var g=b(this);var j=g.attr("title");var h=b("#blogTags");var f=h.val();h.val(f.replace(j+",",""));g.remove();if(h.val()==""){b(".autocomplete-selected-item-lists").addClass("hide")}});b("span.pallete a").click(function(f){f.preventDefault();b("#createeditblogform-hex_color").val(b(this).attr("title"));b(".color-pallete a").removeClass("selected");b(this).addClass("selected")});b(".AddMoreWebsiteUrl").on("click",function(g){g.preventDefault();var f=b(this).attr("shownext");b(".field-createeditblogform-website_url"+f).slideDown("slow");b(this).hide()});b(".RemoveWebsiteUrl").on("click",function(i){i.preventDefault();var g=b(this).attr("removenum");b("#createeditblogform-website_url"+g).val("");var j=b(this).parent("div");var h=g-1;var f=j.siblings(".field-createeditblogform-website_url"+h);f.children(".AddMoreWebsiteUrl").show();b(".field-createeditblogform-website_url"+g).slideUp("slow")});b("button.disconnect").click(function(g){g.preventDefault();g.stopPropagation();var f=b(this).data("social");var h=b(this);bootbox.confirm({title:"Confirm",message:"Do you really want to disconnect this social account?",callback:function(i){if(i){b.ajax({type:"POST",url:baseHttpPath+"/user-blogs/disconnect-social",dataType:"json",data:{social:f,blogId:b(h).data("blogid"),_csrf:yii.getCsrfToken()},success:function(k,l,j){b(h).parent("a").removeClass("connected").addClass("not-connected");b(h).remove()},error:function(j,l,k){b().General_ShowErrorMessage({message:j.responseText})}})}}})})};return{init:function(){a()}}}(jQuery));MyBlogController.BlogsTab=(function(b){var a=function(){var d=function(e){var g={container:"",blogId:0,slideToggle:true};var f=b.extend({},g,e);if(isNaN(f.blogId)||f.blogId<=0){return}if(f.slideToggle==false){f.container.show();b(f.elem).children("i").removeClass("fa-angle-down").addClass("fa-angle-up");b(f.elem).attr("title","Hide post listing");return}f.container.slideToggle();if(b(f.elem).children("i").hasClass("fa-angle-down")){b(f.elem).children("i").removeClass("fa-angle-down").addClass("fa-angle-up");b(f.elem).attr("title","Hide post listing")}else{b(f.elem).children("i").removeClass("fa-angle-up").addClass("fa-angle-down");b(f.elem).attr("title","Display post listing")}};b(".ToggleBlogPosts").on("click",function(h){h.preventDefault();var g=b(this).data("blogid");var f=b("div.BlogPostsContainer"+g);d({container:f,blogId:g,elem:b(this)})});b(".blog-posts-list").click(function(m){m.preventDefault();var k=b(this).data("type");var j=b(this).data("id");var h=b("#published-list_container_"+j);var l=b("#draft-list_container_"+j);var i=b("#review-list_container_"+j);var g=b("#reviewed-published-list_container_"+j);b(".sortData-"+j).removeClass("selected");b(".sortPostData"+j).removeClass("selected");b(this).addClass("selected");if(k=="published"){b(".draft-element",l).addClass("hide");b(".review-element",i).addClass("hide");b(".reviewed-published-element",g).addClass("hide");b(".publish-element",h).removeClass("hide");b(".sortBlogs-"+j).show()}else{if(k=="draft"){b(".draft-element",l).removeClass("hide");b(".publish-element",h).addClass("hide");b(".reviewed-published-element",g).addClass("hide");b(".review-element",i).addClass("hide");b(".sortBlogs-"+j).hide()}else{if(k=="review"){b(".review-element",i).removeClass("hide");b(".publish-element",h).addClass("hide");b(".reviewed-published-element",g).addClass("hide");b(".draft-element",l).addClass("hide");b(".sortBlogs-"+j).hide()}else{if(k=="reviewed-published"){b(".review-element",i).addClass("hide");b(".publish-element",h).addClass("hide");b(".reviewed-published-element",g).removeClass("hide");b(".draft-element",l).addClass("hide");b(".sortBlogs-"+j).hide()}}}}var f=b("div.BlogPostsContainer"+j);d({container:f,slideToggle:false,blogId:j,elem:b(".togglePost-"+j)})});b(".tab-content-inner").on("click",".deletePost",function(h){h.preventDefault();var g=b(this);var f=parseInt(b(this).data("hasworkflowaccess"));if(!isNaN(f)&&f!==1){b().General_ShowErrorMessage({message:"This article is locked and is under review."});return false}bootbox.confirm({title:"Confirm",message:"are you sure you want to delete this post?",callback:function(i){if(i==true){var k=b(g).data("id");var n=b(g).data("type");var j=b(g).closest(".polpular-writers").data("blogid");var e=b('meta[name="csrf-token"]').attr("content");var m=b(g).data("post");var l=null;if(m=="social"){l=1}b.ajax({url:baseHttpPath+"/user/delete-post",type:"post",data:{postId:k,blogId:j,_csrf:e,isSocialPost:l},success:function(q){if(n==="draft"){b("#draft-list_container_"+j).find("#postId_"+k).slideUp();b("#draft-list_container_"+j).find("#postId_"+k).remove();var o=parseInt(b("span.DraftsCount"+j).html());if(!isNaN(o)&&o>0){var p=o-1;if(p>0){b("span.DraftsCount"+j).html(p)}else{b("span.DraftsCountContainer"+j).remove();b("#draft-list_container_"+j+" ul.draft-list").append('<p class="no-data">No draft articles found</p>')}}}else{if(n==="review"){b("#review-list_container_"+j).find("#postId_"+k).slideUp();b("#review-list_container_"+j).find("#postId_"+k).remove();var o=parseInt(b("span.ReviewCount"+j).html());if(!isNaN(o)&&o>0){var p=o-1;if(p>0){b("span.ReviewCount"+j).html(p)}else{b("span.ReviewCountContainer"+j).remove();b("#review-list_container_"+j+" ul.review-list").append('<p class="no-data">No review articles found</p>')}}}else{if(n==="published"){b("#published-list_container_"+j).find("#postId_"+k).slideUp();b("#published-list_container_"+j).find("#postId_"+k).remove();if(b("#published-list_container_"+j+" ul.publish-element").children("li").length<=0){b("#published-list_container_"+j+" ul.publish-element").append('<p class="no-data">No published articles found</p>')}}}}},error:function(o,q,p){b().General_ShowErrorMessage({message:o.responseText})}})}}})});b(".deleteBlog").deleteBlog({onSuccess:function(f,g){b().General_ShowNotification({message:"Successfully deleted"});b("div.blogId_"+b(g).data("id")+"_row").slideUp().remove();var e=parseInt(b(".totalActiveBlogs").data("count"));e=e-1;b(".totalActiveBlogs").data("count",e).html(e)},onError:function(f,e){b().General_ShowErrorMessage({message:e})},beforeSend:function(e){b("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){b("i",e).General_AddRemoveSpinnerIcon()}});b(".check-default").click(function(){var f=b(this).attr("id");if(b(this).filter(":checked").length>0){var g=b(this);var e=b('meta[name="csrf-token"]').attr("content");b.ajax({url:baseHttpPath+"/user-blogs/make-blog-default",type:"post",data:{blogId:f,_csrf:e},dataType:"json",success:function(){b(".check-default").not(g).prop("checked",false);b().General_ShowNotification({message:"Default blog updated successfully."})},error:function(h,j,i){b().General_ShowErrorMessage({message:h.responseText})}})}else{bootbox.alert({title:"Alert!",message:"You must have one default blog.",callback:function(){b(".check-default#"+f).attr("checked","checked")}})}});var c=function(f){var h={listClass:null,listContainer:null,loader:null,onSuccess:false,onError:false,beforeSend:false,onComplete:false,page:0,blogId:0,postType:"published",limit:10,sort:"",replaceExisting:false,};var g=b.extend({},h,f);if(isNaN(g.blogId)||g.blogId<=0){return}if(isNaN(g.page)){return}var e=b('meta[name="csrf-token"]').attr("content");b.ajax({url:baseHttpPath+"/user-blogs/load-more-posts",type:"post",dataType:"json",data:{blog_id:g.blogId,offset:g.offset,post_type:g.postType,limit:g.limit,sort:g.sort,_csrf:e},success:function(k){if(k.success==1){if(k.posts.length>0){if(g.replaceExisting){var i=k.posts;var j=Handlebars.compile(userblogs_blog_loadposts);b(g.listClass,g.listContainer).html(j(i))}else{var i=k.posts;var j=Handlebars.compile(userblogs_blog_loadposts);b(g.listClass,g.listContainer).append(j(i))}}else{if(g.loader!=null){b(g.loader).addClass("hide");b(g.loader).parent().addClass("hide")}}}},error:function(i,k,j){b().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(){if(g.loader!=null){b("i",g.loader).General_AddRemoveSpinnerIcon()}},complete:function(){if(g.loader!=null){b("i",g.loader).General_AddRemoveSpinnerIcon()}}})};b(".loadPosts").click(function(k){k.preventDefault();var m=b(this);var j=b(this).data("blog");var h=b(this).data("type");var g=b(this).data("loadcount");var i=b(this).parent().parent().children("ul").children("li").length;var f=b(".sortData-"+j+".selected").data("sort");var l=b("#published-list_container_"+j);var n=".published-list";if(h=="draft"){l=b("#draft-list_container_"+j);n=".draft-list"}else{if(h=="review"){l=b("#review-list_container_"+j);n=".review-list"}else{if(h=="reviewed-published"){l=b("#reviewed-published-list_container_"+j);n=".reviewed-published-list"}}}c({listContainer:l,listClass:n,loader:m,sort:f,blogId:j,postType:h,limit:g,offset:i})});b(".sortByDate").on("click",function(j){j.preventDefault();var i=b(this);var h=i.data("id");var g=i.data("sort");var l=b(".blog-posts-list.selected").data("type");var k=b("#published-list_container_"+h);var f=".published-list";if(l=="draft"){k=b("#draft-list_container_"+h);f=".draft-list"}else{if(l=="review"){k=b("#review-list_container_"+h);f=".review-list"}else{if(l=="reviewed-published"){k=b("#reviewed-published-list_container_"+h);f=".reviewed-published-list"}}}if(!i.hasClass("selected")){c({listContainer:k,listClass:f,postType:l,blogId:h,sort:g,replaceExisting:true});b(".sortData-"+h).removeClass("selected");i.addClass("selected")}})};return{init:function(){a()}}}(jQuery));MyBlogController.PermissionsTab=(function(){var a=function(){function b(){var g=$(".permissionAddWriter");var f=$(".get-writers-btn");var e=$(".search-query").val();var d=f.data("id");var c=$('meta[name="csrf-token"]').attr("content");if(e==""){$().General_ShowNotification({type:"error",message:"Please enter the search term"});return}$.ajax({url:baseHttpPath+"/user-blogs/search-writers",type:"post",data:{blogId:d,query:e,_csrf:c},dataType:"json",success:function(j){if(j.success==1){$(".row-result",g).show();if(j.writers.length>0){$("#blogWritersList").html("");var h=j.writers;var i=Handlebars.compile(userblogs_permissions_blog);Handlebars.registerHelper("thisBlogId",function(k){return k=d});$(".scroller-codes",g).removeClass("hide");$(".no-data",g).addClass("hide");$("#blogWritersList").append(i(h))}else{$(".scroller-codes",g).addClass("hide");$(".no-data",g).removeClass("hide")}}else{$().General_ShowErrorMessage({message:j.error})}},error:function(h,j,i){$().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){$(".loader",g).removeClass("hide")},complete:function(){$(".loader",g).addClass("hide")}})}$(".get-writers-form").submit(function(c){c.preventDefault();b()});$(".add-author").live("click",function(){var f=$(this);var e=f.data("id");var d=f.data("blogid");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/add-writers",type:"post",data:{authorId:e,blogId:d,_csrf:c},dataType:"json",success:function(h){if(h.success==1){var g=Handlebars.compile(userblogs_permissions_writers);f.find("i").removeClass("fa-plus").addClass("fa-close");f.removeClass("add-author").addClass("remove-author");Handlebars.registerHelper("thisBlog",function(i){return i=d});$("#blogAuthors").removeClass("hide").prepend(g(h.writer));$("#Permissions p.no-data").addClass("hide");$().General_ShowNotification({message:"Successfully added"})}else{$().General_ShowErrorMessage({title:"Alert!",message:"Writer already added! Add other writers"})}},error:function(g,i,h){$().General_ShowErrorMessage({message:g.responseText})},beforeSend:function(){$(".loader").removeClass("hide")},complete:function(){$(".loader").addClass("hide")}})});$(".remove-author").live("click",function(){var c=$(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this writer?",callback:function(e){if(e==true){var g=c.data("id");var f=c.data("blogid");var h=c.data("referer")?c.data("referer"):"";var d=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/remove-author",type:"post",data:{blogId:f,authorId:g,_csrf:d},dataType:"json",success:function(i){if(i.success==1){if(h=="modal-box"){c.find("i").removeClass("fa-close").addClass("fa-plus");c.removeClass("remove-author").addClass("add-author");$("#blogAuthors li.writer-"+g).slideUp("normal",function(){$(this).closest("li").remove();if($("#Permissions #blogAuthors li").length<=1){$("#blogAuthors").addClass("hide");$("#Permissions p.no-data").removeClass("hide")}});$().General_ShowNotification({message:"Successfully removed"})}else{c.closest("li").slideUp("normal",function(){$(this).closest("li").remove();if($("#Permissions #blogAuthors li").length<=1){$("#blogAuthors").addClass("hide");$("#Permissions p.no-data").removeClass("hide")}})}}else{$().General_ShowErrorMessage({message:i.error})}},error:function(i,k,j){$().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(){$(".loader").removeClass("hide")},complete:function(){$(".loader").addClass("hide")}})}}})})};return{init:function(){a()}}}(jQuery));MyBlogController.ConnectTab=(function(){var a=function(){$("button.disconnect").click(function(d){d.preventDefault();d.stopPropagation();var c=$(this).data("social");bootbox.confirm({title:"Confirm",message:"Do you really want to disconnect this social account?",callback:function(f){if(f){var e=$('meta[name="csrf-token"]').attr("content");$.ajax({type:"POST",url:baseHttpPath+"/user/disconnect-social",dataType:"json",data:{social:c,_csrf:e},success:function(h,i,g){$().General_ShowNotification({message:"Social account disconnected successfully"});setTimeout(function(){location.reload()},1000)},error:function(g,i,h){$().General_ShowErrorMessage({message:g.responseText})}})}}})});$("div.elem-block").on("click",".IncludeRetweets",function(g){var f=($(this).is(":checked"))?1:0;var d=$(this).data("id");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/update-twitter-keyword",type:"post",data:{value:f,keywordid:d,action:"include-retweets",_csrf:c},dataType:"json",success:function(e){if(e.success==1){$().General_ShowNotification({message:"Settings updated successfully"})}else{$().General_ShowErrorMessage({message:"Error- Please try again later."})}},error:function(e,i,h){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){}})});$("div.elem-block").on("change",".TweetsType",function(g){var d=$(this).val();var f=$(this).data("id");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/update-twitter-keyword",type:"post",data:{type:d,keywordid:f,action:"tweets-type",_csrf:c},dataType:"json",success:function(e){if(e.success==1){$().General_ShowNotification({message:"Settings updated successfully"})}else{$().General_ShowErrorMessage({message:"Error- Please try again later."})}},error:function(e,i,h){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){}})});$("div.portlet-body").on("click","span[name=include_trusted_source_social_content_blogfeed]",function(){var e=($(".IncludeTrustedSocialContentBlogfeed").is(" :checked"))?1:0;var d=$(".IncludeTrustedSocialContentBlogfeed").data("blogid");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/trusted-source-settings",type:"post",data:{blogId:d,state:e,_csrf:c},dataType:"json",success:function(f){if(f.success==1){$().General_ShowNotification({message:"Settings changed successfully"})}else{$().General_ShowErrorMessage({message:"Error- Please try again later."})}},error:function(f,h,g){$().General_ShowErrorMessage({message:f.responseText})},beforeSend:function(){},complete:function(){}})});$("div.portlet-body").on("click","span[name=bad_words_standard_filter]",function(){var e=($(".badWordStdFilter").is(":checked"))?1:0;var d=$(".badWordStdFilter").data("blogid");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/bad-keyword-settings",type:"post",data:{blogId:d,state:e,_csrf:c},dataType:"json",success:function(f){if(f.success==1){$().General_ShowNotification({message:"Settings changed successfully"})}else{$().General_ShowErrorMessage({message:"Error updating - Please try again."})}},error:function(f,h,g){$().General_ShowErrorMessage({message:f.responseText})},beforeSend:function(){},complete:function(){}})});$(".add-vimeo-channel-group-users").click(function(j){j.preventDefault();var i=$(this);var g=i.data("id");var f=0;var d=$("#vimeo-hash-tags").val();f=$("#vimeo-moderation-status").val();var h="Please enter a keyword.";var c=$('meta[name="csrf-token"]').attr("content");if(d!=""){$.ajax({url:baseHttpPath+"/user-blogs/add-vimeo-channels",type:"post",data:{blogId:g,keyword:d,moderationStatus:f,_csrf:c},dataType:"json",success:function(e){$("#vimeoSearchData").html(e.channels);$(".publish-scrollbar").slimScroll({});$("#vimeoSearchData").modal("show")},error:function(e,l,k){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$("i",i).General_AddRemoveSpinnerIcon()},complete:function(){$("i",i).General_AddRemoveSpinnerIcon()}})}else{$().General_ShowNotification({message:h,type:"error"})}});$("#vimeoSearchData").on("click",".channelListCheckbox",function(){$(".channelListCheckbox:checked").not(this).removeAttr("checked")});$("#vimeoSearchData").on("click",".vimeoChannelAddBtn",function(){var d=$(this);var f=d.data("blogid");var k=d.data("moderation");var h="Please enter a Vimeo channel or user keyword.";var j=$(".channelListCheckbox:checked").data("name");var c=$(".channelListCheckbox:checked").val();var g=$(".channelListCheckbox:checked").data("pic");var i=$(".channelListCheckbox:checked").data("type");var e=$('meta[name="csrf-token"]').attr("content");if(c!=""){$.ajax({url:baseHttpPath+"/user-blogs/add-hash-tags",type:"post",data:{blogId:f,type:"vimeo",vimeoType:i,hashTag:j,typeId:c,typePic:g,moderationStatus:k,_csrf:e},dataType:"json",success:function(o){if(o.limitExceeded==1){bootbox.alert({title:"Alert!",message:"You cannot add more than "+o.tagLimit+" "+o.type+" tags or handles ",});return}else{if(o.success==1){var n=(k==1)?" ("+i+") (Publish)":" ("+i+") (Moderate)";var l=[{hashTag:j,blogId:f,type:"vimeo",tagId:o.tagId,moderationStatus:n}];var m=Handlebars.compile(userblogs_connect_hashtags);$("#vimeo-tags-list").append(m(l));$("#vimeo-hash-tags").val("");$().General_ShowNotification({message:"Successfully added"});$("#vimeoSearchData").modal("hide")}else{$().General_ShowErrorMessage({message:o.error})}}},error:function(l,n,m){$().General_ShowErrorMessage({message:l.responseText})},beforeSend:function(){$("i",d).General_AddRemoveSpinnerIcon();d.html("Please Wait...");d.prop("disabled",true)},complete:function(){$("i",d).General_AddRemoveSpinnerIcon();d.prop("disabled",false);d.html("Add")}})}else{$().General_ShowNotification({message:h,type:"error"})}});$(".add-hash-tags").click(function(k){k.preventDefault();var j=$(this);var h=j.data("type");var g=j.data("id");var d="";var f=0;var i="Please enter a keyword.";if(h=="instagram"){d=$("#instagram-hash-tags").val();f=$("#instagram-moderation-status").val();i="Please enter an instagram handle or hashtag."}else{if(h=="youtube"){d=$("#youtube-hash-tags").val();f=$("#youtube-moderation-status").val();i="Please enter a Youtube channel name."}else{if(h=="vimeo"){d=$("#vimeo-hash-tags").val();f=$("#vimeo-moderation-status").val();i="Please enter a Vimeo channel name."}else{if(h=="twitter"){d=$("#twitter-hash-tags").val();f=$("#twitter-moderation-status").val();i="Please enter a twitter handle or hashtag."}else{if(h=="rss"){d=$("#rss-hash-tags").val();i="Please enter a valid RSS feed url."}else{if(h=="facebookPage"){d=$("#facebook-hash-tags").val();f=$("#facebook-moderation-status").val();i="Please select a Facebook page to add."}else{if(h=="badWords"){d=$("#bad-words-tags").val();i="Please enter a bad keyword."}}}}}}}var c=$('meta[name="csrf-token"]').attr("content");if(d!=""){$.ajax({url:baseHttpPath+"/user-blogs/add-hash-tags",type:"post",data:{blogId:g,type:h,hashTag:d,moderationStatus:f,_csrf:c},dataType:"json",success:function(n){if(n.limitExceeded==1){bootbox.alert({title:"Alert!",message:"You cannot add more than "+n.tagLimit+" "+n.type+" tags or handles ",});return}else{if(n.success==1){if(h=="twitter"){$("#twitter-tags-list").append(n.html);$("#twitter-hash-tags").val("");$(".custom-select").selectbox()}else{if(h=="instagram"){$("#instagram-tags-list").append(n.html);$("#instagram-hash-tags").val("")}else{if(h=="facebookPage"){d=$("#facebook-hash-tags option:selected").text()}var m=(f==1)?"(Publish)":"(Moderate)";if(h=="rss"||h=="badWords"){m=""}var e=[{hashTag:d,blogId:g,type:h,tagId:n.tagId,moderationStatus:m}];var l=Handlebars.compile(userblogs_connect_hashtags);if(h=="youtube"){$("#youtube-tags-list").append(l(e));$("#youtube-hash-tags").val("")}if(h=="vimeo"){$("#vimeo-tags-list").append(l(e));$("#vimeo-hash-tags").val("")}else{if(h=="rss"){$("#rss-tags-list").append(l(e));$("#rss-hash-tags").val("")}else{if(h=="facebookPage"){$("#facebook-tags-list").append(l(e));$("#facebook-hash-tags").val("")}else{if(h=="badWords"){$("#badwords-tags-list").append(l(e));$("#bad-words-tags").val("")}}}}}}$().General_ShowNotification({message:"Successfully added"})}else{$().General_ShowErrorMessage({message:n.error})}}},error:function(e,m,l){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$("i",j).General_AddRemoveSpinnerIcon()},complete:function(){$("i",j).General_AddRemoveSpinnerIcon()}})}else{$().General_ShowNotification({message:i,type:"error"})}});$(".hash-tag-remove").live("click",function(i){i.preventDefault();var h=$(this);var g=h.data("type");var f=h.data("id");var d=h.data("blogid");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/remove-hash-tag",type:"post",data:{blogId:d,type:g,tagId:f,_csrf:c},dataType:"json",success:function(e){if(e.success==1){$(h).closest("li").slideUp()}else{$().General_ShowErrorMessage({message:e.error})}},error:function(e,k,j){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$("i",h).General_AddRemoveSpinnerIcon()},complete:function(){$("i",h).General_AddRemoveSpinnerIcon()}})});function b(){var g=$(".connectAddSources");var f=$(".get-sources-btn");var e=$(".search-query").val();var d=f.data("id");var c=$('meta[name="csrf-token"]').attr("content");if(e==""){$().General_ShowNotification({type:"error",message:"Please enter the search term"});return}$.ajax({url:baseHttpPath+"/user-blogs/search-trusted-sources",type:"post",data:{blogId:d,query:e,_csrf:c},dataType:"json",success:function(j){if(j.success==1){$(".row-result",g).show();if(j.blogs.length>0){$("#blogWritersList").html("");var h=j.blogs;var i=Handlebars.compile(userblogs_connect_sources);Handlebars.registerHelper("loggedUser",function(k,l){var n=l.fn,m=l.inverse;return k=j.loggedUser==true?n():m()});Handlebars.registerHelper("thisBlog",function(k){return k=d});$(".scroller-codes",g).removeClass("hide");$(".no-data",g).addClass("hide");$("#blogWritersList").append(i(h))}else{$(".scroller-codes",g).addClass("hide");$(".no-data",g).removeClass("hide")}}else{$().General_ShowErrorMessage({message:j.error})}},error:function(h,j,i){$().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){$(".loader",g).removeClass("hide")},complete:function(){$(".loader",g).addClass("hide")}})}$(".get-sources-form").submit(function(c){c.preventDefault();b()});$(".add-source").live("click",function(h){h.preventDefault();var f=$(this);var g=f.data("ref");var d=f.data("id");var c=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/add-trusted-sources",type:"post",data:{refBlogId:g,blogId:d,_csrf:c},dataType:"json",success:function(i){if(i.success==1){var e=Handlebars.compile(userblogs_connect_addedSources);f.find("i").removeClass("fa-plus").addClass("fa-close");f.removeClass("add-source").addClass("remove-source");Handlebars.registerHelper("thisBlog",function(j){return j=d});$("#blogAuthors").removeClass("hide").prepend(e(i.blog));$("#Connect p.no-data").addClass("hide");$().General_ShowNotification({message:"Successfully added"})}else{$().General_ShowErrorMessage({title:"Alert!",message:"Source already added! Add other source."})}},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$(".loader").removeClass("hide")},complete:function(){$(".loader").addClass("hide")}})});$(".remove-source").live("click",function(d){d.preventDefault();var c=$(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this source from the blog?",callback:function(f){if(f==true){var g=$(c).data("id");var h=$(c).data("ref");var i=$(c).data("referer")?$(c).data("referer"):"";var e=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/user-blogs/remove-trusted-sources",type:"post",data:{blogId:g,refBlogId:h,_csrf:e},dataType:"json",success:function(j){if(j.success==1){if(i=="modal-box"){$(c).find("i").removeClass("fa-close").addClass("fa-plus");$(c).removeClass("remove-source").addClass("add-source");$("#blogAuthors li.source-"+id).slideUp("normal",function(){$(this).closest("li").remove();if($("#Connect #blogAuthors li").length<=1){$("#blogAuthors").addClass("hide");$("#Connect p.no-data").removeClass("hide")}});$().General_ShowNotification({message:"Successfully removed"})}else{$(c).closest("li").slideUp("normal",function(){$(this).closest("li").remove();if($("#Connect #blogAuthors li").length<=1){$("#blogAuthors").addClass("hide");$("#Connect p.no-data").removeClass("hide")}})}}else{$().General_ShowErrorMessage({message:j.error})}},error:function(j,l,k){$().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(){$(".loader").removeClass("hide")},complete:function(){$(".loader").addClass("hide")}})}}})})};return{init:function(){a()},facebookPageScroll:function(){$("html,body").animate({scrollTop:$("#facebookPages").offset().top-20},2000)}}}(jQuery));MyBlogController.InsightsTab=(function(){var b=function(){$(".FollowUnfollowWriter").followWriter({onError:function(d,c){$().General_ShowErrorMessage({message:c})},beforeSend:function(c){$("i",c).General_AddRemoveSpinnerIcon()},onComplete:function(d){$("i",d).General_AddRemoveSpinnerIcon();var c=$(d).data("status");(c==="follow")?$(d).removeClass("selected"):$(d).addClass("selected");(c==="follow")?$().General_ShowNotification({message:"Successfully unfollowed"}):$().General_ShowNotification({message:"Successfully followed"})}})};var a=function(){b();$("button.ArticlePerformanceLoadMore").on("click",function(d){var c=parseInt($(this).data("blogid"));var f=parseInt($(this).data("offset"));if(isNaN(c)||c<=0||isNaN(f)){$(this).addClass("hide");return}var g=$(this);$.ajax({type:"POST",url:baseHttpPath+"/user-blogs/more-recent-posts",dataType:"json",data:{blogId:c,offset:f,_csrf:yii.getCsrfToken()},success:function(h,i,e){if(h.success===1){$("div.RecentArticlesContainer").append(h.html);$(g).data("offset",(f+10))}if(h.totalCount<10){$(g).remove()}},error:function(e,i,h){$().General_ShowErrorMessage({message:e.responseText})}})});$("div.InsightsContainer").on("click","a.ArticlePerformance",function(i){var d=$(this).data("postid");var g=$(this).data("loaded");if(g==1){return}var c=$('meta[name="csrf-token"]').attr("content");var f=$(this).attr("href");var h=$(this);$.ajax({url:baseHttpPath+"/user-blogs/article-performance",type:"post",data:{postId:d,_csrf:c},dataType:"json",success:function(k){$(f).html(k.html);$(h).data("loaded",1);var j=$("div.postKnobWrapper"+d).find(".fu_knob");var e=$("div.postKnobWrapper"+d).find(".fu_knob_number_sign");var l=$("div.postKnobWrapper"+d).find(".fu_knob_number");j.knob({displayInput:false});e.css({visibility:"visible",lineHeight:"210px"});if(!jQuery.browser.mobile){j.val(0).trigger("change");$("div.postKnobWrapper"+d).one("inview",function(n,m){if(m){$({value:0}).animate({value:j.data("number")},{duration:1000,easing:"swing",step:function(){var o=Math.ceil(this.value);j.val(o).trigger("change");l.html(o)}})}})}else{l.html(j.data("number"))}$(".PostYearChart"+d).addClass("hide")},error:function(e,k,j){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){}})});$("ul.blogdata-viewcounts li").on("click",function(f){f.preventDefault();var d=$(this).data("duration");var c=$(this).data("type");if(d===undefined||c===undefined){return}$(this).siblings("li").removeClass("selected");$(this).addClass("selected");if(d==="month"){$("#blogChartMonthViews").addClass("hide");$("#blogChartMonthPosts").addClass("hide");switch(c){case"views":$("#blogChartMonthViews").removeClass("hide");break;case"posts":$("#blogChartMonthPosts").removeClass("hide");break}}else{$("#blogChartYearViews").addClass("hide");$("#blogChartYearPosts").addClass("hide");switch(c){case"views":$("#blogChartYearViews").removeClass("hide");break;case"posts":$("#blogChartYearPosts").removeClass("hide");break}}});$(".blogdata-details .wemoyr a").on("click",function(d){d.preventDefault();var c=$(this).data("duration");$(".blogdata-details .wemoyr").find("a").removeClass("selected");$(this).addClass("selected");if(c==="month"){$(".BlogChartMonth").removeClass("hide");$(".BlogChartYear").addClass("hide")}else{$(".BlogChartMonth").addClass("hide");$(".BlogChartYear").removeClass("hide")}});$("div.RecentArticlesContainer").on("click","div.postdata-details span.wemoyr a",function(d){d.preventDefault();var c=$(this).data("duration");var f=$(this).data("postid");$(".post-chart-"+f+" .wemoyr").find("a").removeClass("selected");$(this).addClass("selected");if(c==="month"){$(".PostMonthChart"+f).removeClass("hide");$(".PostYearChart"+f).addClass("hide")}else{$(".PostMonthChart"+f).addClass("hide");$(".PostYearChart"+f).removeClass("hide")}});$("#blogChartYearPosts").addClass("hide");$("#blogChartMonthPosts").addClass("hide");$(".BlogChartYear").addClass("hide");$(".fu_knob_wrapper").each(function(){var d=$(this).find(".fu_knob");var c=$(this).find(".fu_knob_number_sign");var e=$(this).find(".fu_knob_number");d.knob({displayInput:false});c.css({visibility:"visible",lineHeight:"210px"});if(!jQuery.browser.mobile){d.val(0).trigger("change");$(this).one("inview",function(g,f){if(f){$({value:0}).animate({value:d.data("number")},{duration:1000,easing:"swing",step:function(){var h=Math.ceil(this.value);d.val(h).trigger("change");e.html(h)}})}})}else{e.html(d.data("number"))}})};return{init:function(){a()}}}(jQuery));MyBlogController.WorkFlowTab=(function(){var a=function(){$("#worflowForm").submit(function(f){f.preventDefault();var d=$(this);var g=$("#workflow-title",d).val();var c=$(this).data("id");var b=$('meta[name="csrf-token"]').attr("content");if(g==""){$().General_ShowNotification({type:"error",message:"Please enter workflow title"});return}$.ajax({url:baseHttpPath+"/workflow/update-workflow",type:"post",data:{blogId:c,title:g,action:"addWorkflow",_csrf:b},dataType:"json",success:function(h){if(h.success==1){var e=Handlebars.compile(workflow_selectbox);Handlebars.registerHelper({thisBlog:function(i){return i=c}});$(".select-workflow-box").html(e(h.listWorkflow));$("#selectWorkflow").val(h.selectedWorkflowId).trigger("change");$("#selectWorkflow").selectbox();$().General_ShowNotification({message:"Workflow added Successfully."})}},error:function(e,i,h){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){$("#workFlowModel").modal("hide")}})});$(".select-workflow-box").on("change","#selectWorkflow",function(g){g.preventDefault();var f=$(".main-workflow-container");var c=$(".loader");var h=$(this).val();var d=$(this).data("blogid");var b=$('meta[name="csrf-token"]').attr("content");if(isNaN(h)||h<=0){return}$.ajax({url:baseHttpPath+"/workflow/index",type:"post",data:{id:h,blogId:d,_csrf:b},dataType:"json",success:function(i){if(i.success==1){var e=Handlebars.compile(workflow_container);f.html(e(i.workflowGroup));if(!i.isDeleteWorkflow){$(".delete-workflow").removeClass("hide")}}},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){c.removeClass("hide")},complete:function(){c.addClass("hide");$(".delete-workflow").data("id",h).removeClass("hide")}})});$(".delete-workflow").click(function(c){c.preventDefault();var b=$(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this workflow?",callback:function(e){if(e){var g=b.data("id");var f=b.data("blogid");var d=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/workflow/update-workflow",type:"post",data:{workflowId:g,blogId:f,action:"deleteWorkflow",_csrf:d},dataType:"json",success:function(h){if(h.success==1){$().General_ShowNotification({message:"Workflow deleted successfully."})}},error:function(h,j,i){$().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){},complete:function(){window.location=baseHttpPath+"/workflow/index?blogId="+f}})}}})});$(".main-workflow-container").on("click",".edit-title",function(f){f.preventDefault();var d=$(this);var h=d.data("mode");if(h=="edit"){var g=d.closest(".holder").children("h2").text();d.closest(".workflow-header").children(".infotips").addClass("infotips-resize");d.closest(".holder").children("h2").text("").append($("<input  />",{value:g,"class":"c9n-ippt group-title"}));$(".group-title").focus();d.data("mode","update");d.text("Save");return}var c=d.closest(".workflow-header").data("blogid");var j=d.closest(".workflow-header").data("id");var i=d.closest(".holder").find("input").val();var b=$('meta[name="csrf-token"]').attr("content");if(i==""){$().General_ShowNotification({type:"error",message:"Please enter group title"});return}$.ajax({url:baseHttpPath+"/workflow/update-workflow",type:"post",data:{id:j,blogId:c,workflowId:$("#selectWorkflow").val(),title:i,action:"updateGroup",_csrf:b},dataType:"json",success:function(e){if(e.success==1){$().General_ShowNotification({message:"Group title updated successfully"})}},error:function(e,l,k){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){d.closest(".workflow-header").children(".infotips").removeClass("infotips-resize");d.closest(".holder").children("h2").text("").append(i);d.data("mode","edit");d.text("Edit")}})});$(".main-workflow-container").on("click",".delete-group",function(d){d.preventDefault();var b=$(this);var c=$(".main-workflow-container");bootbox.confirm({title:"Confirm",message:"Do you really want to remove this group?",callback:function(g){if(g){var j=b.closest(".workflow-header").data("id");var h=b.closest(".workflow-header").data("blogid");var i=b.closest(".workflow-container").data("workflow");var f=b.closest(".workflow-container").data("position");var e=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/workflow/update-workflow",type:"post",data:{id:j,blogId:h,workflowId:i,position:f,action:"deleteGroup",_csrf:e},dataType:"json",success:function(l){if(l.success==1){var k=Handlebars.compile(workflow_container);c.html(k(l.listWorkflow));$().General_ShowNotification({message:"Group deleted successfully."})}},error:function(k,m,l){$().General_ShowErrorMessage({message:k.responseText})},beforeSend:function(){},complete:function(){}})}}})});$(".main-workflow-container").on("click",".groupModal",function(d){d.preventDefault();var c=$(this).data("modal");var b=$(this).data("position");var f=$("#selectWorkflow option:selected").val();$("#workflow-group-form").data("id",f);$("#workflow-group-form").data("position",b);$(c).modal("show")});$("#workflow-group-form").submit(function(i){i.preventDefault();var b=$(this);var l=$("#addWorkflowGroup");var f=$(".main-workflow-container");var k=b.find("#group-title").val();var h=b.data("id");var j=b.data("position");var d=b.data("blogid");var g=(j>0)?parseInt(j)+1:1;var c=$('meta[name="csrf-token"]').attr("content");if(k==""){$().General_ShowNotification({type:"error",message:"Please enter group title"});return}$.ajax({url:baseHttpPath+"/workflow/update-workflow",type:"post",data:{workflowId:h,blogId:d,title:k,position:g,action:"addGroup",_csrf:c},dataType:"json",success:function(m){if(m.success==1){var e=Handlebars.compile(workflow_container);f.html(e(m.workflowGroup));$().General_ShowNotification({message:"Successfully saved"})}},error:function(e,n,m){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){},complete:function(){$("#group-title").val("");$(l).modal("hide")}})});$(".main-workflow-container").on("click",".add-workflow-user",function(g){g.preventDefault();var c=$(this).data("id");var f=$(this).data("modal");var d=$(f).data("blogid");var b=$('meta[name="csrf-token"]').attr("content");var h=$("#selectWorkflow option:selected").val();$.ajax({url:baseHttpPath+"/workflow/workflow-users",type:"post",data:{blogId:d,workflowGroupId:c,workflowId:h,_csrf:b},dataType:"json",success:function(j){if(j.success==1){$(".row-result",f).show();if(j.authors.length>0){$("#blogAuthorsList").html("");var e=j.authors;var i=Handlebars.compile(user_permissions_workflow);Handlebars.registerHelper({thisBlogId:function(k){return k=d},workflow:function(k){return k=c}});$(".scroller-codes",f).removeClass("hide");$(".no-data",f).addClass("hide");$("#blogAuthorsList").append(i(e))}else{$(".scroller-codes",f).addClass("hide");$(".no-data",f).removeClass("hide")}}else{$().General_ShowErrorMessage({message:j.error})}},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$(".loader",f).removeClass("hide")},complete:function(){$(".loader",f).addClass("hide");$(f).modal("show")}})});$("#addWorkflowUserModal").on("click",".add-author",function(g){g.preventDefault();var f=$(this);var c=f.data("id");var d=f.data("blogid");var h=f.data("workflowid");var b=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/workflow/add-workflow-user",type:"post",data:{authorId:c,blogId:d,workflowId:h,_csrf:b},dataType:"json",success:function(j){if(j.success==1){var i=Handlebars.compile(users_workflow);$("#block-"+h).prepend(i(j.author));f.parent("li").slideUp("normal",function(){f.parent("li").remove()});var e=f.closest("ul.blog-level-lists").find("li").length;if(e<=1){$(".scroller-codes",$("#addWorkflowUserModal")).addClass("hide");$(".no-data",$("#addWorkflowUserModal")).removeClass("hide")}$().General_ShowNotification({message:"Successfully added"})}else{$().General_ShowErrorMessage({title:"Alert!",message:"Authors already added in this group"})}},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){$(".loader").removeClass("hide")},complete:function(){$(".loader").addClass("hide")}})});$(".main-workflow-container").on("click",".remove-author",function(c){c.preventDefault();var b=$(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this author?",callback:function(e){if(e){var j=b.closest(".workflow-container-block").data("id");var i=b.closest(".workflow-container").data("workflow");var h=b.closest(".workflow-container-block").data("blogid");var g=b.closest(".profile-holder").data("id");var f=b.closest(".profile-holder").data("workgroupuserid");var d=$('meta[name="csrf-token"]').attr("content");$.ajax({url:baseHttpPath+"/workflow/remove-workflow-user",type:"post",data:{workflowGroupAuthorId:f,workflowId:i,workflowGroupId:j,blogId:h,authorId:g,_csrf:d},dataType:"json",success:function(k){if(k.success==1){b.closest(".profile-holder").slideUp("normal",function(){b.closest(".profile-holder").remove()});$().General_ShowNotification({message:"Author successfully removed"})}else{$().General_ShowErrorMessage({message:k.error})}},error:function(k,m,l){$().General_ShowErrorMessage({message:k.responseText})},beforeSend:function(){$("i",b).General_AddRemoveSpinnerIcon()},complete:function(){$("i",b).General_AddRemoveSpinnerIcon()}})}}})})};return{init:function(){a()}}}(jQuery));MyBlogController.Newsletter=(function(b){var a=function(){b(".custom-blog-select").change(function(){var c=b(this).val();if(c!=""){window.location.href=baseHttpPath+"/user-blogs/newsletter?blogId="+c}});b("button.SelectAllUserList").on("click",function(c){c.preventDefault();b("#UserListPanel input[type=checkbox]").attr("checked",true)});b("button.UnSelectUserList").on("click",function(c){c.preventDefault();b("#UserListPanel input[type=checkbox]").attr("checked",false)});b("#content-editor").freshereditor({toolbar_selector:"#toolbar",excludes:["removeFormat","insertheading4"]});b("#content-editor").freshereditor("edit",true)};return{init:function(){a()}}}(jQuery));MyBlogController.AdsManager=(function(c){var b=function(){a({selector:"#adsDropzone"});c("#adsManagerModal").on("click",".adsManagerSaveBtn",function(k){k.preventDefault();var g=c(this);var f=c("#ads-id").val();var i=g.data("blogid");var n=c("#ads-title").val();var d=c("#ads-url").val();var m=c("#ads-block-type").val();var j=c("#ads-status option:selected").val();var l=[];c(".ads-images").each(function(){l.push(c(this).val())});var h=c('meta[name="csrf-token"]').attr("content");if(n===""){c().General_ShowNotification({type:"error",message:"Title must not be blank"});return}if(l.length<=0){if(typeof f==="undefined"||f<=0){c().General_ShowNotification({type:"error",message:"Please select an image"});return}}c.ajax({url:baseHttpPath+"/user-blogs/ads-manager",type:"post",data:{id:f,blogId:i,title:n,status:j,url:d,type:m,images:l,_csrf:h},dataType:"json",success:function(o){if(o.success==1){var e=(f>0)?"updated":"created";c().General_ShowNotification({message:"Ad "+e+" successfully"});c("#adsManagerModal").modal("hide");window.location.reload()}else{c().General_ShowErrorMessage({message:o.error})}},error:function(e,p,o){c().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){c("i",g).General_AddRemoveSpinnerIcon()},complete:function(){c("i",g).General_AddRemoveSpinnerIcon()}})});c(".removeAds").on("click",function(h){h.stopPropagation();h.preventDefault();var g=c(this);var i=g.data("id");var f=g.data("blogid");var d=c('meta[name="csrf-token"]').attr("content");bootbox.confirm("Do you want to remove this ad?",function(e){if(e){c.ajax({url:baseHttpPath+"/user-blogs/remove-ads-manager",type:"post",data:{blogId:f,id:i,_csrf:d},dataType:"json",success:function(j){if(j.success==1){c().General_ShowNotification({message:"Ad removed successfully"});window.location.reload()}else{c().General_ShowErrorMessage({message:j.error})}},error:function(j,l,k){c().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(){c("i",g).General_AddRemoveSpinnerIcon()},complete:function(){c("i",g).General_AddRemoveSpinnerIcon()}})}})});c("body").on("hidden.bs.modal",".modal",function(){c(this).removeData("bs.modal");location.reload()});c(".updateAds").on("click",function(h){h.stopPropagation();h.preventDefault();var g=c(this);var i=g.data("id");var f=g.data("blogid");var d=c('meta[name="csrf-token"]').attr("content");c.ajax({url:baseHttpPath+"/user-blogs/load-ads-manager",type:"post",data:{blogId:f,id:i,_csrf:d},dataType:"json",success:function(e){if(e.success==1){c("#adsManagerModal").html(e.modelHtml);c(".custom-select").selectbox();a({selector:"#updateAdsDropzone",media:e.media})}else{c().General_ShowErrorMessage({message:e.error})}},error:function(e,k,j){c().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(){c("i",g).General_AddRemoveSpinnerIcon()},complete:function(){c("i",g).General_AddRemoveSpinnerIcon();c("#adsManagerModal").modal("show")}})})};var a=function(d){Dropzone.autoDiscover=false;var e=new Dropzone(d.selector,{paramName:"ads_media_files",addRemoveLinks:true,maxFiles:1,init:function(){if(typeof d.media!=="undefined"&&d.media!==""){e=this;var f={name:d.media.filename,size:d.media.filesize,status:Dropzone.ADDED,accepted:true};e.emit("addedfile",f);e.emit("thumbnail",f,d.media.cdn_path);e.files.push(f)}this.on("success",function(i,h){var g='<input type="hidden" class="ads-images" name="images[]" value="'+h+'">';c(".ads-images",c("#upload-ads-images")).remove();c("#upload-ads-images").append(g);c().General_ShowNotification({message:"Image added successfully"})})}})};return{init:function(){b()}}}(jQuery));MyBlogController.Gallery=(function(b){var a=function(){b(".fancybox").fancybox();Dropzone.autoDiscover=false;var c=new Dropzone("#galleryDropzone",{paramName:"gallery_media_files",addRemoveLinks:true,maxFiles:1,init:function(){this.on("success",function(f,e){b(".no-images").addClass("hide");var d='<input type="hidden" class="gallery-images" name="CreateEditBlogForm[galleryImages][]" value="'+e+'">';b(".featuredGallery").append(d);var i=b("#gallery-template").html();var g=Handlebars.compile(i);var h=g({image:baseHttpPath+e});b("#gallery-section").append(h);b().General_ShowNotification({message:"Image added successfully"});b("#ModalGallery").modal("hide");this.removeAllFiles()})}});b("#gallery-section").on("click",".RemoveImage",function(g){g.stopPropagation();g.preventDefault();var d=b(this);var f=b(this).parents(".thumbnail").children("img.galleryThumb").attr("src");bootbox.confirm({title:"Confirm",message:"Do you want to remove this Image?",callback:function(e){if(e){b.each(b(".gallery-images"),function(h,j){var i=baseHttpPath+b(j).val();if(f==i){b(j).remove()}});b(d).closest("div.galleryBlock").hide("slow",function(){b(d).closest("div.galleryBlock").remove();if(b("#gallery-section .galleryBlock").length<=0){b(".no-images").removeClass("hide")}else{b(".no-images").addClass("hide")}});b().General_ShowNotification({message:"Image removed successfully"})}}})});b("#gallery-section").on("click",".RemoveMedia",function(i){i.stopPropagation();i.preventDefault();var h=b(this);var f=h.closest(".galleryBlock").data("key");var g=h.closest(".galleryBlock").data("blogid");var d=b('meta[name="csrf-token"]').attr("content");bootbox.confirm({title:"Confirm",message:"Do you want to remove this Image?",callback:function(e){if(e){b.ajax({url:baseHttpPath+"/user-blogs/remove-gallery-images",type:"post",data:{blogId:g,key:f,_csrf:d},dataType:"json",success:function(j){if(j.success==1){b(h).closest("div.galleryBlock").hide("slow",function(){b(h).closest("div.galleryBlock").remove();if(b("#gallery-section .galleryBlock").length<=0){b(".no-images").removeClass("hide")}else{b(".no-images").addClass("hide")}});b().General_ShowNotification({message:"Image removed successfully"})}},error:function(j,l,k){b().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(){b("i",h).General_AddRemoveSpinnerIcon()},complete:function(){b("i",h).General_AddRemoveSpinnerIcon()}})}}})})};return{init:function(){a()}}}(jQuery));var PopularController=(function(a){return{writer:function(){PopularController.PopularWriters.init()},blog:function(){PopularController.PopularBlogs.init()},club:function(){PopularController.ClubBlogs.init()}}}(jQuery));PopularController.ClubBlogs=(function(c){var b=function(){c("button.follow").followBlog({onSuccess:function(d,e){},onError:function(e,d){c().General_ShowErrorMessage({message:d})},beforeSend:function(d){c("i",d).General_AddRemoveSpinnerIcon()},onComplete:function(d){c("i",d).General_AddRemoveSpinnerIcon();(c(d).data("status")==="follow")?c(d).html("<i class='fa fa-star'></i> Follow"):c(d).html("<i class='fa fa-star'></i> Following")}})};var a=function(){b();var e=Handlebars.compile(clubs_index_club);c(".blog-post-search form").submit(function(f){f.preventDefault();d()});c("#filter a").click(function(f){f.preventDefault();if(c(this).hasClass("selected")){return}c("#filter a").removeClass("selected");c(this).addClass("selected");c(".blog-post-search form input.c9n-ippt").val("");d()});function d(){var g=c("#filter a.selected").data("code");var f=c(".blog-post-search input.c9n-ippt").val();c.ajax({url:baseHttpPath+"/clubs/"+g,type:"get",data:{s:f,_csrf:c('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(i){c("#clubBlogs").empty();Handlebars.registerHelper("loggedUser",function(j,k){var m=k.fn,l=k.inverse;return j=i.loggedUser==true?m():l()});var h=i.clubs;if(h.length<=0){c(".polpular-writers").addClass("hide");c(".no-data").removeClass("hide")}else{c(".polpular-writers").removeClass("hide");c(".no-data").addClass("hide");c("#clubBlogs").append(e(h));c(".forceLogin").unbind("click");ApplicationController.init();b()}},error:function(h,j,i){c().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){c("i",c(".blog-post-search form button")).General_AddRemoveSpinnerIcon()},complete:function(){c("i",c(".blog-post-search form button")).General_AddRemoveSpinnerIcon()}})}};return{init:function(){a()}}}(jQuery));PopularController.PopularBlogs=(function(b){var a=function(){b(".title-ellipsis").autoEllipsisText({multiline:true,accuracyStep:1});var d=Handlebars.compile(popular_blogs_popular);b(".blog-post-search form").submit(function(f){f.preventDefault();if(b(".blog-post-search form input.c9n-ippt").val()==""){b().General_ShowNotification({message:"Please enter the search term"});return}b("#filter a").removeClass("selected");c()});b("#filter a").click(function(f){f.preventDefault();if(b(this).hasClass("selected")){return}b("#filter a").removeClass("selected");b(this).addClass("selected");b(".blog-post-search form input.c9n-ippt").val("");c()});function c(){var f=b("#filter a.selected").data("code");var e=b(".blog-post-search input.c9n-ippt").val();b.ajax({url:baseHttpPath+"/popular/blogs/"+f,type:"get",data:{s:e,_csrf:b('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(h){b("#popularBlogs").empty();Handlebars.registerHelper("loggedUser",function(i,j){var l=j.fn,k=j.inverse;return i=h.loggedUser==true?l():k()});Handlebars.registerHelper("popularBy",function(i){return i=h.code});var g=h.clubs;if(g.length<=0){b(".polpular-writers").addClass("hide");b(".no-data").removeClass("hide")}else{b(".polpular-writers").removeClass("hide");b(".no-data").addClass("hide");b("#popularBlogs").append(d(g));if(e!=""){b(".post-count").hide()}b(".forceLogin").unbind("click");ApplicationController.init();Profile.init();b("#popularBlogs .title-ellipsis").autoEllipsisText({multiline:true,accuracyStep:1})}},error:function(g,i,h){b().General_ShowErrorMessage({message:g.responseText})},beforeSend:function(){b("i",b(".blog-post-search form button")).General_AddRemoveSpinnerIcon()},complete:function(){b("i",b(".blog-post-search form button")).General_AddRemoveSpinnerIcon()}})}};return{init:function(){a()}}}(jQuery));PopularController.PopularWriters=(function(b){var c=function(){b(".FollowUnfollowUser").followWriter({onSuccess:function(d,e){},onError:function(e,d){b().General_ShowErrorMessage({message:d})},beforeSend:function(d){b("i",d).General_AddRemoveSpinnerIcon()},onComplete:function(d){b("i",d).General_AddRemoveSpinnerIcon();(b(d).data("status")==="follow")?b(d).removeClass("selected"):b(d).addClass("selected")}})};var a=function(){c();var d=Handlebars.compile(popular_writers_popular);b(".blog-post-search form").submit(function(f){f.preventDefault();if(b(".blog-post-search input.c9n-ippt").val()==""){b().General_ShowNotification({message:"Please enter the search term"});return}b("#filter a").removeClass("selected");e()});b("#filter a").click(function(f){f.preventDefault();if(b(this).hasClass("selected")){return}b("#filter a").removeClass("selected");b(this).addClass("selected");b(".blog-post-search form input.c9n-ippt").val("");e()});function e(){var g=b("#filter a.selected").data("code");var f=b(".blog-post-search input.c9n-ippt").val();if(f!==""){g="posts"}b.ajax({url:baseHttpPath+"/popular/writers/"+g,type:"get",data:{s:f,_csrf:b('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(i){b("#popularWriters").empty();Handlebars.registerHelper("loggedUser",function(j,k){var m=k.fn,l=k.inverse;return j=i.loggedUser==true?m():l()});Handlebars.registerHelper("writerBy",function(j){return j=i.code});var h=i.writers;if(h.length<=0){b(".polpular-writers").addClass("hide");b(".no-data").removeClass("hide")}else{b(".polpular-writers").removeClass("hide");b(".no-data").addClass("hide");b("#popularWriters").append(d(h));b(".forceLogin").unbind("click");ApplicationController.init();c()}},error:function(h,j,i){b().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){b("i",b(".blog-post-search form button")).General_AddRemoveSpinnerIcon()},complete:function(){b("i",b(".blog-post-search form button")).General_AddRemoveSpinnerIcon()}})}};return{init:function(){a()}}}(jQuery));var PostController=(function(a){return{init:function(){PostController.CreateEditStartup.init();PostController.CreateEditPost.init();PostController.ImageCaption.init()},article:function(){PostController.Article.init()},eventPost:function(){PostController.EventPost.init()},addNoFollowToExternalLinks:function(){a("#content-editor").find("a:not([href*='fansunite.com.au'],[href^='#'],[href^='javascript:;'])").each(function(){if(a(this).attr("href")!==undefined){a(this).attr("rel","nofollow")}})},clearMSFormatting:function(e){var b=/(\n|\r| class=(")?Mso[a-zA-Z]+(")?)/g;var d=e.replace(b," ");var g=new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>","gi");d=d.replace(g,"");var c=["start"];for(var f=0;f<c.length;f++){var h=new RegExp(" "+c[f]+'="(.*?)"',"gi");d=d.replace(h,"")}return d},savePost:function(b){var d={formData:{},onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);a.ajax({type:"POST",url:baseHttpPath+"/post/save-post",dataType:"json",data:c.formData,success:function(x,f,u){var h=x.postId;var m=x.images;var g=x.postThumb;var l=x.postThumbMediaId;if(x.postPreviewUrl!==""){a("li.PostPreviewLink").find("a").attr("href",x.postPreviewUrl);a("li.PostPreviewLink").removeClass("hide")}if(g!==""){a(".PostThumbImage").attr("src",g)}if(m.length>0){a("div.PostImageOwlThumbnails").find("div.owl-item").each(function(){a("#owl-thumbnails").data("owlCarousel").removeItem()});for(var i in m){if(m.hasOwnProperty(i)){var n=m[i].media_id;var e=m[i].postImageSrc;var j=m[i].origImgPath;var k=m[i].orig_media_id;var w=m[i].hasOrig;var t=a("#post-image-owl-thumbnail-template").html();var v=Handlebars.compile(t);var r=0;if(m[i].thumb_media_id==l){r=1}var s=n+","+m[i].thumb_media_id+","+m[i].listing_media_id;var y=v({imgSrc:e,postId:h,mediaId:n,selected:r,mediaCaption:m[i].caption,origImgPath:j,hasOrig:w,origMediaId:k,commaSepAssetIds:s});var q=a("#owl-thumbnails");q.data("owlCarousel").addItem(y)}}}var o=parseInt(a(".RepublishBtn").data("blogs-count"));var p=parseInt(a(".RepublishBtn").data("isadmin"));if(!isNaN(o)&&o>1&&p==0){a(".RepublishBtn").data("id",h);a(".RepublishBtn").removeClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(x)}},error:function(e,g,f){if(c.onError&&typeof c.onError==="function"){c.onError(e.responseText)}},beforeSend:function(f,e){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend()}},complete:function(e,f){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete()}}})},setPostLargeImage:function(b){var d={mediaId:0,postId:0,onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);if(b.mediaId===0){return}a.ajax({type:"POST",url:baseHttpPath+"/post/get-post-image",dataType:"json",data:{mediaid:b.mediaId,postid:b.postId,_csrf:yii.getCsrfToken()},success:function(i,j,h){if(i.success==1){var e=i.largeImageSrc;if(e!==""){a(".PostThumbImage").attr("src",e);var f=a("#PostImageThumbnail-"+b.mediaId).data("caption");if(f===""){a(".article-image-caption").addClass("hide")}}else{var g=a(".PostThumbImage").data("defaultimage");a(".PostThumbImage").attr("src",g);a(".article-image-caption").addClass("hide")}if(c.onSuccess&&typeof c.onSuccess==="function"){c.onSuccess(i)}}},error:function(e,g,f){if(c.onError&&typeof c.onError==="function"){c.onError(e.responseText)}},beforeSend:function(f,e){if(c.beforeSend&&typeof c.beforeSend==="function"){c.beforeSend()}},complete:function(e,f){if(c.onComplete&&typeof c.onComplete==="function"){c.onComplete()}}})},bindDeletePostImage:function(){a("#owl-thumbnails").on("click",".DeletePostThumbnail",function(g){g.preventDefault();var b=parseInt(a(this).data("postid"));var f=parseInt(a(this).data("mediaid"));var c=a(this).data("getty-imageid");var h=a(this);var d=a(h).parent("span.btn-absolute").parent("a").children("img").attr("src");bootbox.confirm({title:"Confirm",message:"Do you really want to remove this image?",callback:function(e){if(e){a.ajax({type:"POST",url:baseHttpPath+"/post/delete-image",dataType:"json",data:{id:b,mediaid:f,imgsrc:d,_csrf:yii.getCsrfToken()},success:function(l,o,j){if(c!==""&&c!==undefined){a("div.autocomplete-tags-scroller").find("a.tag").each(function(){var p="PostTag"+c;if(a(this).hasClass(p)){var r=a(this).attr("title");var q=a("#ExistingPostTags").val();a("#ExistingPostTags").val(q.replace(r+",",""));a(this).remove();if(a("#ExistingPostTags").val()===""){a(".autocomplete-selected-item-lists").addClass("hide")}}})}a(h).parent("span.btn-absolute").parent("a").parent("div.thumbnail-elements-logo").parent("div.owl-item").remove();a("#owl-thumbnails").data("owlCarousel").reinit();var n=false;a(".PostImageOwlThumbnails").find("img").each(function(){if(a(this).data("selected")===1){n=true}});if(!n){var k=a(".PostImageOwlThumbnails").find("img").first();if(k.length>0){var m=a(k).data("mediaid");var i=a(k).data("postid");PostController.setPostLargeImage({mediaId:m,postId:i});a(".PostImageOwlThumbnails").find("img").first().data("selected",1);a(".PostImageOwlThumbnails").find("img").first().closest("div.thumbnail-elements-logo ").addClass("selected")}else{a(".PostThumbImage").attr("src",a(".PostThumbImage").data("defaultimage"));a(".article-image-caption").addClass("hide")}}a().General_ShowNotification({message:"Successfully deleted"})},error:function(i,k,j){a().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(j,i){a("i",h).General_AddRemoveSpinnerIcon()},complete:function(i,j){a("i",h).General_AddRemoveSpinnerIcon()}})}}})})},bindSavePost:function(){a(".SavePostBtn, .SavePostDraft, .SavePostPublish, .UpdatePostBtn, .SavePostSubmit").on("click",function(f){f.preventDefault();var i=a(this);var b=0;var g=a(i).data("post-type");var h=(g=="event")?false:true;var k=(g=="event")?"event":"post";if(a(i).hasClass("SavePostSubmit")){if(!confirm("Are you sure you want to submit "+k+" for further review?")){return}b=1}var j=a.trim(a(".PostTitleTextarea").val());if(j===""){a().General_ShowErrorMessage({message:"Please at least give "+k+" a title."});return}var d=parseInt(a(".PostBlogID").val());if(isNaN(d)||d<=0){a().General_ShowErrorMessage({message:"Please select a blog."});return}PostController.addNoFollowToExternalLinks();var c;a("#content-editor").freshereditor("save",function(r,o){c=o;c=PostController.clearMSFormatting(c);if(a(i).data("status")==="published"&&!h){var l=[];if(a.trim(a("#createpost-suburb").val())==""){l.push("Suburb can not empty")}if(a.trim(a("#createpost-contact_name").val())==""){l.push("Contact Name can not empty")}if(a.trim(a("#createpost-contact_email").val())==""){l.push("Contact Email can not empty")}if(a.trim(a("#createpost-contact_number").val())==""){l.push("Contact Number can not empty")}if(a.trim(a("#createpost-address").val())==""){l.push("Address can not empty")}if(l.length>0){var n=l.join("</br>");a().General_ShowErrorMessage({message:n});return}if(a.inArray("image",articleRequiredAttribs)>=0){var m=a("div.PostImageOwlThumbnails").find("img").length;if(m<=0){a().General_ShowErrorMessage({message:"Please select a featured image."});return}}}if(a(i).data("status")==="published"&&h){if(a.inArray("image",articleRequiredAttribs)>=0){var m=a("div.PostImageOwlThumbnails").find("img").length;if(m<=0){a().General_ShowErrorMessage({message:"Please select a featured image."});return}}if(a.inArray("sport",articleRequiredAttribs)>=0){var e=parseInt(a("#createpost-sport_id").val());if(isNaN(e)||e<=0){a().General_ShowErrorMessage({message:"Please select a "+sportLabel});return}}if(a.inArray("tags",articleRequiredAttribs)>=0){if(a.trim(a("#ExistingPostTags").val())===""){a().General_ShowErrorMessage({message:"Please add an article tag."});return}}if(a.inArray("contents",articleRequiredAttribs)>=0){if(a.trim(c)===""){a().General_ShowErrorMessage({message:"Please add something to article contents."});return}}}var p=a("#create-post-form").serializeArray();p.push({name:"CreatePost[post_content]",value:c});p.push({name:"CreatePost[published_status]",value:a(i).data("status")});p.push({name:"CreatePost[postSubmitted]",value:b});var q="";a(".socialPostTo").not(".not-connected").each(function(s){if(a(this).hasClass("active")){q=q+a(this).data("value")+","}});p.push({name:"CreatePost[social_post_to]",value:q});a(".PostImageOwlThumbnails").find("img").each(function(){if(a(this).data("selected")===1){var s=a(this).data("mediaid");p.push({name:"CreatePost[selected_image]",value:s})}});PostController.savePost({formData:a.param(p),onError:function(s){a().General_ShowErrorMessage({message:s})},onSuccess:function(s){a("#createpost-post_id").val(s.postId);a(".DeletePostBtn").removeClass("hide").data("postid",s.postId);a(".SavePostBtn").data("status",s.publishedStatus);if(s.publishedStatus==="published"){a(".SavePostPublish").addClass("hide");a("#sidebar .SavePostDraft").removeClass("hide");a(".UpdatePostBtn").removeClass("hide");a("#resend-post-btn").data("status","published")}else{a("#sidebar .SavePostDraft").addClass("hide");a(".UpdatePostBtn").addClass("hide");a("#resend-post-btn").data("status","draft");if(s.postHasWorkflow===1&&s.workflowGroupType!="publisher"){a(".SavePostPublish").addClass("hide");a(".SavePostSubmit").removeClass("hide")}else{a(".SavePostPublish").removeClass("hide");a(".SavePostSubmit").addClass("hide")}}if(a(".alsoPublishInBtn").data("isadmin")==1){a(".alsoPublishInBtn").removeClass("hide")}else{a(".alsoPublishInBtn").addClass("hide")}if(b===1){a().General_ShowNotification({message:"Successfully submitted for reviewing."});setTimeout(function(){window.location=baseHttpPath+"/user-blogs/index"},1000)}else{a().General_ShowNotification({message:"Successfully saved."})}var u=a(".PostFormContainer").data("poststatus");var t=s.publishedStatus;if(u!=""&&u!=t){window.location=baseHttpPath+"/post/edit/"+s.postId}a(".PostFormContainer").data("poststatus",t)},beforeSend:function(){if(a(i).hasClass("SavePostBtn")){a("i",i).General_AddRemoveSpinnerIcon()}else{a(i).data("origText",a(i).html()).html("Please wait..")}},onComplete:function(){if(a(i).hasClass("SavePostBtn")){a("i",i).General_AddRemoveSpinnerIcon()}else{a(i).html(a(i).data("origText"))}}})})})},bindRemovePostMedia:function(){a("#content-editor").on("click","button.RemovePostMediaBtn",function(b){b.preventDefault();var c=a(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this media?",callback:function(d){if(d){var e=a(c).data("getty-imageid");if(e!==""&&e!==undefined){a("div.autocomplete-tags-scroller").find("a.tag").each(function(){var f="PostTag"+e;if(a(this).hasClass(f)){var h=a(this).attr("title");var g=a("#ExistingPostTags").val();a("#ExistingPostTags").val(g.replace(h+",",""));a(this).remove();if(a("#ExistingPostTags").val()===""){a(".autocomplete-selected-item-lists").addClass("hide")}}})}a(c).closest("div.media-placeholder").remove()}}})})},bindRemoveYoutubeMedia:function(){a("#content-editor").on("click","button.RemoveYouTubeBtn",function(b){b.preventDefault();var c=a(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this video?",callback:function(d){if(d){a(c).closest("div.media-placeholder").remove()}}})})},bindRemoveTweetMedia:function(){a("#content-editor").on("click","button.RemoveTwitterBtn",function(b){b.preventDefault();var c=a(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this tweet?",callback:function(d){if(d){a(c).closest("div.media-placeholder").remove()}}})})},bindRemoveInstagramMedia:function(){a("#content-editor").on("click","button.RemoveInstagramBtn",function(b){b.preventDefault();var c=a(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this instagram entry?",callback:function(d){if(d){a(c).closest("div.media-placeholder").remove()}}})})},bindRemoveVimeoMedia:function(){a("#content-editor").on("click","button.RemoveVimeoBtn",function(b){b.preventDefault();var c=a(this);bootbox.confirm({title:"Confirm",message:"Do you really want to remove this video?",callback:function(d){if(d){a(c).closest("div.media-placeholder").remove()}}})})},addArticleTag:function(c,d){if(c!==""){var h=a("#ExistingPostTags").val();var g=a("#post-tag-template").html();var e=Handlebars.compile(g);var f="";if(d!==undefined){f=d}var b={inputValue:c,gettyImageId:f};a("#ExistingPostTags").val(h+c+",");a(".autocomplete-selected-item-lists").removeClass("hide");a(".autocomplete-selected-item-lists .autocomplete-tags-scroller").append(e(b))}},addFeaturedImage:function(h){var g=h.postId;var o=h.images.thumb.path;var j=h.images.asset.id;var p=h.images.listing.caption;if(g>0){var d=a("#post-image-owl-thumbnail-template").html();var m=Handlebars.compile(d);var e=j+","+h.images.thumb.id+","+h.images.listing.id;var i=false;var l=0;var f="";if(h.images.orig!==undefined&&h.images.orig.id!==undefined){l=h.images.orig.id;f=h.images.orig.path;i=true}var c=m({imgSrc:o,postId:g,mediaId:j,mediaCaption:p,selected:0,commaSepAssetIds:e,gettyImageId:h.gettyImageId,origMediaId:l,origImgPath:f,hasOrig:i});var b=a("#owl-thumbnails");b.data("owlCarousel").addItem(c)}else{var d=a("#post-image-upload-owl-thumbnail-template").html();var m=Handlebars.compile(d);var e=j+","+h.images.thumb.id+","+h.images.listing.id;var l=0;var f="";if(h.hasOwnProperty("uploadVimeoVideoId")){e+=","+h.uploadVimeoVideoId}var c=m({imgSrc:o,postId:0,mediaId:j,mediaCaption:p,selected:0,commaSepAssetIds:e,gettyImageId:h.gettyImageId,origMediaId:l,origImgPath:f,hasOrig:false});var b=a("#owl-thumbnails");b.data("owlCarousel").addItem(c)}var n=false;a(".PostImageOwlThumbnails").find("img").each(function(){if(a(this).data("selected")===1){n=true;var q=a(k).data("postid");var r=a(k).data("mediaid");PostController.setPostLargeImage({postId:q,mediaId:r})}});if(!n){var k=a(".PostImageOwlThumbnails").find("img").first();if(k.length>0){var g=a(k).data("postid");var j=a(k).data("mediaid");PostController.setPostLargeImage({postId:g,mediaId:j});a(k).data("selected",1);a(k).closest("div.thumbnail-elements-logo").addClass("selected")}else{a(".PostThumbImage").attr("src",a(".PostThumbImage").data("defaultimage"))}if(p!==""){a("div.article-image-caption").removeClass("hide");a("p.image-caption").html(p)}}},bindSetFeaturedImage:function(){a("#owl-thumbnails").on("click",".PostImageThumbnail",function(h){h.preventDefault();a(".PostImageOwlThumbnails img").data("selected",0);a("div.thumbnail-elements-logo ").removeClass("selected");var c=parseInt(a(this).data("postid"));var g=parseInt(a(this).data("mediaid"));var f=a(this).attr("src");if(isNaN(c)||isNaN(g)||c<=0||g<=0){if(f.indexOf("thumb")>-1){f=f.replace("thumb","asset")}a(".PostThumbImage").attr("src",f);a(this).data("selected",1);a(this).closest("div.thumbnail-elements-logo ").addClass("selected");var d=a(this).data("caption");if(d!==""){a("div.article-image-caption").removeClass("hide");a("p.image-caption").html(d)}else{a("div.article-image-caption").addClass("hide")}return}var b=a(this);a.ajax({type:"POST",url:baseHttpPath+"/post/update-post-image",dataType:"json",data:{id:c,mediaid:g,_csrf:yii.getCsrfToken()},success:function(j,k,i){PostController.setPostLargeImage({postId:c,mediaId:g});a(b).data("selected",1);a(b).closest("div.thumbnail-elements-logo ").addClass("selected");var e=a(b).data("caption");if(e!==""){a("div.article-image-caption").removeClass("hide");a("p.image-caption").html(e)}else{a("div.article-image-caption").addClass("hide")}a().General_ShowNotification({message:"Successfully updated"})},error:function(e,j,i){a().General_ShowErrorMessage({message:e.responseText})}})})}}}(jQuery));PostController.CreateEditPost=(function(c){var b=function(){c("#TimerDummy").timer({duration:90,repeat:true,restart:true,callback:function(){var i=c(".SavePostBtn").data("post-type");var f=parseInt(c(".SavePostBtn").data("hasworkflowaccess"));if(c(".SavePostBtn").data("status")!=="published"&&f===1&&i=="article"){var h=c.trim(c(".PostTitleTextarea").val());var e=parseInt(c(".PostBlogID").val());if(h===""||isNaN(e)||e<=0){return}c(".SavePostBtn").trigger("click")}else{if(i=="event"){var h=c.trim(c(".PostTitleTextarea").val());var e=parseInt(c(".PostBlogID").val());var d=c.trim(c("#createpost-start_date").val());var g=c.trim(c("#createpost-end_date").val());if(h===""||isNaN(e)||e<=0||d==""||g==""){return}c(".SavePostBtn").trigger("click")}}}})};var a=function(){PostController.bindDeletePostImage();PostController.bindSavePost();PostController.bindRemovePostMedia();PostController.bindRemoveYoutubeMedia();PostController.bindRemoveVimeoMedia();PostController.bindRemoveTweetMedia();PostController.bindRemoveInstagramMedia();PostController.bindSetFeaturedImage();c(".socialPostTo").click(function(f){f.preventDefault();if(c(this).hasClass("active")&&!c(this).hasClass("disabled")){c(this).toggleClass("not-connected")}});c(".ImportURLBtn").on("click",function(g){g.preventDefault();var f=c("#ImportURL").val();if(c.trim(f)===""){c().General_ShowErrorMessage({message:"Please enter the import URL"});return}if(c.trim(c("#createpost-title").val())!==""){c().General_ShowErrorMessage({message:"Title should be empty to import from a URL"});return}var h=c(this);c.ajax({type:"POST",url:baseHttpPath+"/post/import-url",dataType:"json",data:{url:f,_csrf:yii.getCsrfToken()},success:function(l,m,j){if(l.title.length>0){c("#createpost-title").val(l.title)}if(l.description.length>0){c("#content-editor").html("<p>"+l.description+"</p>")}if(l.keywords.length>0){var k=l.keywords.split(",");for(var i in k){var e=k[i];PostController.addArticleTag(e)}}c().General_ShowNotification({message:"Successfully imported"})},error:function(e,j,i){c().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(i,e){c(h).html("<i class='fa fa-spinner fa-spin'></i>")},complete:function(e,i){c(h).html("Import")}})});c("#ArticleTags").autocompleter({highlightMatches:true,source:baseHttpPath+"/general/tags",hint:true,empty:false,limit:20,minLength:3});c(".AddArticleTag").click(function(g){g.preventDefault();var f=c("#ArticleTags").val();if(f===""){return}PostController.addArticleTag(f);c("#ArticleTags").val("")});c("#ArticleTags").keypress(function(g){var f=g.which;if(f===13){g.preventDefault();c(".AddArticleTag").click()}});c(".autocomplete-selected-item-lists").on("click",".tag",function(h){h.preventDefault();var g=c(this);var i=g.attr("title");var f=c("#ExistingPostTags").val();c("#ExistingPostTags").val(f.replace(i+",",""));g.remove();if(c("#ExistingPostTags").val()===""){c(".autocomplete-selected-item-lists").addClass("hide")}});c(".DeletePostBtn").on("click",function(g){g.preventDefault();var f=parseInt(c(this).data("postid"));if(f<=0){return}var h=c(this);bootbox.confirm({title:"Confirm",message:"Do you really want to delete this article?",callback:function(e){if(e){c.ajax({type:"POST",url:baseHttpPath+"/post/delete",dataType:"json",data:{id:f,_csrf:yii.getCsrfToken()},success:function(j,k,i){c().General_ShowNotification({message:"Successfully deleted"});setTimeout(function(){window.location=baseHttpPath+"/user-blogs"},1000)},error:function(i,k,j){c().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(j,i){c("#TimerDummy").timer("remove");c("i",h).General_AddRemoveSpinnerIcon()},complete:function(i,j){c("i",h).General_AddRemoveSpinnerIcon()}})}}})});c(".PostTitleTextarea").on("blur",function(f){var g=c.trim(c(this).val());if(g===""){return}if(c(".PostCustomURL").val()!==""){return}c(".PostCustomURL").val(d(g))});c(".PostCustomURL").on("blur",function(f){c(this).val(d(c(this).val()))});function d(e){e=c.trim(e);if(e===""){return e}e=e.toLowerCase();e=e.replace(/\s/g,"-");e=e.replace(/[^a-zA-Z0-9\-]+/g,"");return e}};c("div.add-thumbnail a").on("click",function(){c(".PostImageAddToContent").html("0")});c("li.TopPostImageLink a").on("click",function(){c(".PostImageAddToContent").html("1")});return{init:function(){a();b()},}}(jQuery));PostController.CreateEditStartup=(function(e){var f;var c;var d=function(){var h=document.getElementById("content-editor"),i,g;h.focus();c=function(o){var k=false,n=false,m=window.getSelection(),l=m.anchorNode,j=m.focusNode;while(l&&l!=document.documentElement){if(l==h){k=true}l=l.parentNode}while(j&&j!=document.documentElement){if(j==h){n=true}j=j.parentNode}if(!k||!n){return}i=window.getSelection();if(i.getRangeAt!==undefined){g=i.getRangeAt(0)}else{if(document.createRange&&i.anchorNode&&i.anchorOffset&&i.focusNode&&i.focusOffset){g=document.createRange();g.setStart(i.anchorNode,i.anchorOffset);g.setEnd(i.focusNode,i.focusOffset)}else{}}f=g};h.onkeyup=c};var a=function(g){var h,l,k;if(f){h=f;l=h.cloneRange();h.collapse(false);var i=document.createElement("div");i.innerHTML=g;var m=document.createDocumentFragment(),k,j;while((k=i.firstChild)){j=m.appendChild(k)}h.insertNode(m)}else{e("#content-editor").append(g)}};var b=function(){d();e("#content-editor").on("focus",function(){c()});e(".autocomplete-tags-scroller").slimScroll({size:"7px",color:"#b4b4b4",opacity:1,height:"50px",distance:"0px",disableFadeOut:true,railVisible:true,alwaysVisible:true});e(".RepublishBtn").duplicatePost({});e("#SearchYoutubeVideos").SearchYoutube({onSuccess:function(m){e(".YoutubeSearchVideoItem").unbind("click");e(".YoutubeSearchVideoItem").on("click",function(r){r.preventDefault();var q=e(this).data("videoid");var p=e("#post-embed-video-template").html();var o=Handlebars.compile(p);var n=o({videoId:q});if(e("#content-editor").html().trim()===""){e("#content-editor").append(n)}else{a(n)}e().General_ShowNotification({message:"Video added successfully"})})}});e("#InsertYoutubeVideos").SearchYoutube({modalContainer:e("#ModalImage"),inputObj:e("#InsertYoutubeVideos input.InsertYoutubeInput"),searchItemsOuterContainer:e("div.InsertYoutubeVideosOuterContainer"),searchItemsContainer:e("ul.InsertYoutubeVideosListContainer"),loadMoreButton:e("button.InsertYoutubeLoadMore"),searchButton:e("#InsertYoutubeVideos button.InsertYoutubeSearchBtn"),onSuccess:function(m){e(".YoutubeSearchVideoItem").unbind("click");e(".YoutubeSearchVideoItem").on("click",function(r){r.preventDefault();var q=e(this).data("videoid");var p=e(this).data("largeimage");var n=parseInt(e("#createpost-post_id").val());var o=0;if(!isNaN(n)&&n>0){o=n}e.ajax({type:"post",url:baseHttpPath+"/post/upload-videos-image",dataType:"json",data:{videoid:q,postid:o,image:p,source:"youtube",_csrf:yii.getCsrfToken()},success:function(t,u,s){PostController.addFeaturedImage(t);e().General_ShowNotification({message:"Video added successfully"})},error:function(s,u,t){e().General_ShowErrorMessage({message:s.responseText,type:"error"});return false},beforeSend:function(t,s){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(s,t){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})})}});e("#SearchVimeoVideos").SearchVimeo({onSuccess:function(m){e(".VimeoSearchVideoItem").unbind("click");e(".VimeoSearchVideoItem").on("click",function(r){r.preventDefault();var q=e(this).data("videoid");var p=e("#post-embed-vimeo-video-template").html();var o=Handlebars.compile(p);var n=o({videoId:q});if(e("#content-editor").html().trim()===""){e("#content-editor").append(n)}else{a(n)}e().General_ShowNotification({message:"Video added successfully"})})}});e("#InsertVimeoVideos").SearchVimeo({modalContainer:e("#ModalImage"),inputObj:e("#InsertVimeoVideos input.InsertVimeoInput"),searchItemsOuterContainer:e("div.InsertVimeoVideosOuterContainer"),searchItemsContainer:e("ul.InsertVimeoVideosListContainer"),loadMoreButton:e("button.InsertVimeoLoadMore"),searchButton:e("#InsertVimeoVideos button.InsertVimeoSearchBtn"),onSuccess:function(m){e(".VimeoSearchVideoItem").unbind("click");e(".VimeoSearchVideoItem").on("click",function(r){r.preventDefault();var q=e(this).data("videoid");var p=e(this).data("largeimage");var n=parseInt(e("#createpost-post_id").val());var o=0;if(!isNaN(n)&&n>0){o=n}e.ajax({type:"post",url:baseHttpPath+"/post/upload-videos-image",dataType:"json",data:{videoid:q,postid:o,image:p,source:"vimeo",_csrf:yii.getCsrfToken()},success:function(t,u,s){PostController.addFeaturedImage(t);e().General_ShowNotification({message:"Video added successfully"})},error:function(s,u,t){e().General_ShowErrorMessage({message:s.responseText,type:"error"});return false},beforeSend:function(t,s){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(s,t){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})})}});e("#dropbox-chooser").click(function(n){n.preventDefault();var m={success:function(o){e.ajax({type:"post",url:baseHttpPath+"/post/upload-dropbox-image",dataType:"json",data:{fileUrl:o[0].link,_csrf:yii.getCsrfToken()},success:function(v,w,s){var q=e(".PostImageAddToContent").html();if(q==="1"){var u=e("#post-embed-images-template").html();var r=Handlebars.compile(u);var p=new Date().getTime();var t=r({imgSrc:v.images.asset.path,blockId:p});if(e("#content-editor").html().trim()===""){e("#content-editor").append(t)}else{a(t)}}else{PostController.addFeaturedImage(v)}e().General_ShowNotification({message:"Image added successfully"})},error:function(p,r,q){e().General_ShowErrorMessage({message:p.responseText,type:"error"});return false},beforeSend:function(q,p){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(p,q){e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})},cancel:function(){},linkType:"direct",multiselect:false,extensions:[".jpg",".png",".gif",".jpeg"]};Dropbox.choose(m)});e("#SearchTwitterForm").SearchTwitter({onSuccess:function(m){e(".TwitterSearchItem").unbind("click");e(".TwitterSearchItem").on("click",function(o){o.preventDefault();var n=e(this).data("id");e.ajax({type:"post",url:baseHttpPath+"/search/twitter-embed-code",dataType:"json",data:{id:n,_csrf:yii.getCsrfToken()},success:function(t,u,r){var t={blockquote:t.html};var s=e("#post-embed-tweets-template").html();var q=Handlebars.compile(s);var p=q(t);if(e("#content-editor").html().trim()===""){e("#content-editor").append(p)}else{a(p)}e().General_ShowNotification({message:"Tweet added successfully"})},error:function(p,r,q){e().General_ShowErrorMessage({message:p.responseText,type:"error"});return false},beforeSend:function(q,p){e("#ModalTwitter .modal-content").General_AddRemoveAjaxLoader()},complete:function(p,q){e("#ModalTwitter .modal-content").General_AddRemoveAjaxLoader()}})})}});e("#SearchInstagramForm").SearchInstagram({onSuccess:function(m){e(".InstagramSearchItem").unbind("click");e(".InstagramSearchItem").on("click",function(p){p.preventDefault();var o=e(this).data("id");var n=e(this).data("link");e.ajax({type:"post",url:baseHttpPath+"/search/instagram-embed-code",dataType:"json",data:{mediaLink:n,_csrf:yii.getCsrfToken()},success:function(u,v,s){var u={blockquote:u.html};var t=e("#post-embed-instagram-template").html();var r=Handlebars.compile(t);var q=r(u);if(e("#content-editor").html().trim()===""){e("#content-editor").append(q)}else{a(q)}e().General_ShowNotification({message:"Media added successfully"})},error:function(q,s,r){e().General_ShowErrorMessage({message:q.responseText,type:"error"});return false},beforeSend:function(r,q){e("#ModalInstagram .modal-content").General_AddRemoveAjaxLoader()},complete:function(q,r){e("#ModalInstagram .modal-content").General_AddRemoveAjaxLoader()}})})}});e("#embed-code-btn").on("click",function(n){n.preventDefault();var m=e("#embed-code-box").val();if(m!=""){m=m.replace('<script async src="//platform.twitter.com/widgets.js" charset="utf-8"><\/script>',"");m=m.replace('<script async defer src="//platform.instagram.com/en_US/embeds.js"><\/script>',"");if(e("#content-editor").html().trim()===""){e("#content-editor").append(m)}else{a(m)}e("#embed-code-box").val("");e("#ModalEmbed").modal("hide")}else{e().General_ShowNotification({message:"Please enter your code to embed.",type:"error"})}});Dropzone.autoDiscover=false;var l=new Dropzone("#dropzone",{paramName:"post_image_file",addRemoveLinks:false,maxFiles:postMaxUploadImages,init:function(){this.on("success",function(q,n){var p=e(".PostImageAddToContent").html();if(p==="1"){var t=e("#post-embed-images-template").html();var r=Handlebars.compile(t);var m=new Date().getTime();var s=r({imgSrc:n,blockId:m});if(e("#content-editor").html().trim()===""){e("#content-editor").append(s)}else{a(s)}}else{var o=JSON.parse(n);PostController.addFeaturedImage(o)}e().General_ShowNotification({message:"Image added successfully"})})}});e("#ModalImage").on("shown",function(){l.removeAllFiles();var n=e(".PostImageAddToContent").html();e("#contentimage").val(n);var m=parseInt(e("#createpost-post_id").val());if(!isNaN(m)&&m>0){e("#dropzone-postid").val(m);e("#dropzone-video-postid").val(m)}if(n==1){e("#ModalImage li.VideoTabs").hide();var o=0;e("ul.maintabs").children("li").each(function(){if(e(this).is(":visible")){o+=1}});e("ul.maintabs").attr("class",function(p,q){return q.replace(/(^|\s)nav-tabs-\S+/g,"")});if(o===3){e("ul.maintabs").addClass("nav-tabs-three")}else{if(o===4){e("ul.maintabs").addClass("nav-tabs-four")}else{if(o===5){e("ul.maintabs").addClass("nav-tabs-five")}}}}else{e("#ModalImage li.VideoTabs").show();var o=e("ul.maintabs").children("li").length;e("ul.maintabs").attr("class",function(p,q){return q.replace(/(^|\s)nav-tabs-\S+/g,"")});if(o===3){e("ul.maintabs").addClass("nav-tabs-three")}else{if(o===4){e("ul.maintabs").addClass("nav-tabs-four")}else{if(o===5){e("ul.maintabs").addClass("nav-tabs-five")}}}}});var g=new Dropzone("#uploadVideoDropzone",{paramName:"post_upload_video",addRemoveLinks:false,acceptedFiles:"video/mp4",autoProcessQueue:false,maxFiles:1,init:function(){var m=document.querySelector("#uploadfile");g=this;m.addEventListener("click",function(){if(e(".videoTitle").val()===""){e().General_ShowNotification({message:"Please enter a title for video.",type:"error"});return}m.innerHTML="Please Wait...";m.disabled=true;g.processQueue()});this.on("sending",function(n,q,o){var p=e(".videoTitle").val();o.append("title",p)});this.on("success",function(p,n){m.innerHTML="Upload";m.disabled=false;var o=JSON.parse(n);PostController.addFeaturedImage(o);e(".videoTitle").val("");g.removeAllFiles();e("#ModalImage").modal("hide");e().General_ShowNotification({message:"Video added successfully"})})}});var h=false;e("#SearchImages form").FansuniteImages({inputObj:e("#SearchImages form input.SearchImagesInput"),thumbsOuterContainer:e("#SearchImages div.blog-level"),thumbsDisplayContainer:e("#SearchImages div.scroller-clubs"),displayPageNumbersElement:e("#SearchImages span.SearchImagesPages"),loadMoreButton:e("#SearchImages button.SearchImagesLoadMore"),onImageSelect:function(r){if(h){e().General_ShowNotification({message:"Image download already in progress",type:"error"});return}var q=r.imageId;var o=r.caption;var p=e(".PostImageAddToContent").html();var m=parseInt(e("#createpost-post_id").val());var n=0;if(!isNaN(m)&&m>0){n=m}e.ajax({type:"post",url:baseHttpPath+"/post/upload-search-image",dataType:"json",data:{id:q,postid:n,contentimage:p,caption:o,_csrf:yii.getCsrfToken()},success:function(x,y,u){if(p==="1"){var w=e("#post-embed-search-images-template").html();var t=Handlebars.compile(w);var s=new Date().getTime();var v=t({imgSrc:x.imageSrc,imageId:q,blockId:s,caption:o});if(e("#content-editor").html().trim()===""){e("#content-editor").append(v)}else{a(v)}}else{PostController.addFeaturedImage(x)}e().General_ShowNotification({message:"Image added successfully"})},error:function(s,u,t){e().General_ShowErrorMessage({message:s.responseText,type:"error"});return false},beforeSend:function(t,s){h=true;e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(s,t){h=false;e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})}});var k=false;e("#GettyImages form").GettyImages({inputObj:e("#GettyImages form input.GettyImagesInput"),thumbsOuterContainer:e("#GettyImages div.blog-level"),thumbsDisplayContainer:e("#GettyImages div.scroller-clubs"),displayPageNumbersElement:e("#GettyImages span.GettyImagesPages"),loadMoreButton:e("#GettyImages button.GettyImagesLoadMore"),onImageSelect:function(m){if(k){e().General_ShowNotification({message:"Image download already in progress",type:"error"});return}var n=m.imageId;var p=m.caption;var t=null;if(e.trim(p)!=""){t=p}if(m.keywords.length>0){for(var r in m.keywords){var s=m.keywords[r];if(s!==""){PostController.addArticleTag(s,n)}}}var q=e(".PostImageAddToContent").html();var o=parseInt(e("#createpost-post_id").val());var u=0;if(!isNaN(o)&&o>0){u=o}e.ajax({type:"post",url:baseHttpPath+"/post/upload-getty-image",dataType:"json",data:{id:n,postid:u,contentimage:q,caption:t,_csrf:yii.getCsrfToken()},success:function(A,B,x){if(q==="1"){var z=e("#post-embed-images-template").html();var w=Handlebars.compile(z);var v=new Date().getTime();var y=w({imgSrc:A.imageSrc,gettyImageId:n,blockId:v,caption:t});if(e("#content-editor").html().trim()===""){e("#content-editor").append(y)}else{a(y)}}else{PostController.addFeaturedImage(A)}e().General_ShowNotification({message:"Image added successfully"})},error:function(v,x,w){e().General_ShowErrorMessage({message:v.responseText,type:"error"});return false},beforeSend:function(w,v){k=true;e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(v,w){k=false;e("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})}});e("textarea.header-name").autogrow({onInitialize:true});e("#content-editor").freshereditor({toolbar_selector:"#toolbar",excludes:["removeFormat","insertheading4"]});e("#content-editor").freshereditor("edit",true);e("#toolbar").find(".toolbar_p").trigger("click");e(".btn-group .btn").click(function(){e(".btn-group .btn").removeClass("active");e(this).addClass("active")});e("#createpost-published_date").datetimepicker({autoclose:true,format:"dd-mm-yyyy HH:ii:ss P",pickerPosition:"bottom-left"});e("#createpost-start_date").datetimepicker({autoclose:true,format:"dd-mm-yyyy HH:ii:ss P",pickerPosition:"bottom-left"});e("#createpost-end_date").datetimepicker({autoclose:true,format:"dd-mm-yyyy HH:ii:ss P",pickerPosition:"bottom-left"});e(".field-createpost-published_date, .field-createpost-start_date, .field-createpost-end_date").on("click",function(m){m.stopPropagation()});e(document).on("click","body",function(m){if(e(m.target).closest(".datetimepicker").length===0){e(".datetimepicker").hide()}});var j=e(".edit-post").offset().top;var i=e("#content-editor").offset().top-e(".toolbar-navbar").outerHeight(true);e(window).scroll(function(){var p=e(".sticky"),n=e(window).scrollTop(),o=e(".editor").parent().width(),m=e(".edit-post-fixed-section").outerHeight(true);if(n>=j){p.addClass("fixed")}else{p.removeClass("fixed")}if(n>=(i-m-j)){e(".editor").addClass("toolbar-fixed").css("top",m+"px").css("width",o+"px")}else{e(".editor").removeClass("toolbar-fixed").css("top","auto").css("width","auto")}});e(window).resize(function(){j=e(".edit-post").offset().top;i=e("#content-editor").offset().top-e(".toolbar-navbar").outerHeight(true)});e(".publish-scrollbar").slimScroll({});e(".alsoPublishInSubmitBtn").click(function(o){var m=[];var n=e("#createpost-post_id").val();e(".alsoPublishInBlogs:checked").not(":disabled").each(function(){m.push(e(this).val())});var p=e(this);if(m.length>0){e.ajax({type:"post",url:baseHttpPath+"/post/also-publish-in",dataType:"json",data:{blogIds:m,postId:n,_csrf:yii.getCsrfToken()},success:function(r,s,q){if(r.success==1){e("#alsoPublishInModal").modal("hide");e().General_ShowNotification({message:"Article successfully published in selected blog(s)."});e(".alsoPublishInBlogs:checked").not(":disabled").attr("disabled","disabled")}},error:function(q,s,r){e().General_ShowErrorMessage({message:q.responseText,type:"error"})},beforeSend:function(r,q){e(p).html("Please wait...")},complete:function(q,r){e(p).html("Submit")}})}else{e().General_ShowNotification({message:"Please select a blog from list to publish article.",type:"error"})}});e(".changeAttribution").click(function(m){e(".changeAttribution:checked").not(this).removeAttr("checked")});e(".changeAttributionBtn").click(function(p){p.preventDefault();var n=0;var m=e(this).data("postid");var o=e("input[type='checkbox'][name='attributionUser']:checked");if(o.length>0){n=o.val()}var q=e(this);if(n>0){e.ajax({type:"post",url:baseHttpPath+"/post/change-attribution",dataType:"json",data:{userId:n,postId:m,_csrf:yii.getCsrfToken()},success:function(s,t,r){if(s.success==1){e("#changeAttributionInModal").modal("hide");e().General_ShowNotification({message:"Attribution applied successfully."})}},error:function(r,t,s){e().General_ShowErrorMessage({message:r.responseText,type:"error"})},beforeSend:function(s,r){e(q).html("Please wait...")},complete:function(r,s){e(q).html("Submit")}})}else{e().General_ShowNotification({message:"Please select a user",type:"error"})}});e(".PostBlogID").on("change",function(){var m=parseInt(e(this).val());if(e(".SavePostBtn").data("status")==="published"){return}if(e(".SavePostBtn").data("post-type")==="event"){return}if(isNaN(m)||m<=0){return}e.ajax({type:"post",url:baseHttpPath+"/post/check-user-workflow",dataType:"json",data:{blogid:m,_csrf:yii.getCsrfToken()},success:function(o,p,n){if(o.workflowExists===1){e(".SavePostPublish").addClass("hide");e(".SavePostSubmit").removeClass("hide")}else{e(".SavePostSubmit").addClass("hide");e(".SavePostPublish").removeClass("hide")}},error:function(n,p,o){e().General_ShowErrorMessage({message:n.responseText,type:"error"})},beforeSend:function(o,n){},complete:function(n,o){}})});e("#resend-post-btn").on("click",function(p){p.preventDefault();var n=parseInt(e(".ResendPostSelectUser").val());if(isNaN(n)||n<=0){e().General_ShowNotification({message:"Please select an author from list",type:"error"});return}var r=e(this);var q=parseInt(e(r).data("postid"));if(isNaN(q)||q<=0){return}var m=e(r).data("status");var o=e("#resend-message").val();e.ajax({type:"post",url:baseHttpPath+"/post/resend-post",dataType:"json",data:{postid:q,userid:n,message:o,_csrf:yii.getCsrfToken()},success:function(t,u,s){e().General_ShowNotification({message:"Article resent successfully"});setTimeout(function(){window.location=baseHttpPath+"/user-blogs/index"},1000)},error:function(s,u,t){e().General_ShowErrorMessage({message:s.responseText,type:"error"})},beforeSend:function(t,s){e(r).html("Please wait...")},complete:function(s,t){e(r).html("Submit")}})})};return{init:function(){b()}}}(jQuery));PostController.Article=(function(c){var a=function(){c(".duplicate-post-plus").duplicatePost({})};var b=function(){a();c(".FollowBlog").followBlog({onSuccess:function(d,e){if(c(e).data("status")==="follow"){c().General_ShowNotification({message:"Blog un-followed successfully."})}else{c().General_ShowNotification({message:"Blog followed successfully."})}},onError:function(e,d){c().General_ShowErrorMessage({message:d})},beforeSend:function(d){c("i",d).General_AddRemoveSpinnerIcon()},onComplete:function(d){c("i",d).General_AddRemoveSpinnerIcon();(c(d).data("status")==="follow")?c(d).html("<i class='fa fa-star'></i> Follow Blog"):c(d).html("<i class='fa fa-star'></i> Following Blog")}});c("#ReportAbuseForm-submit").on("click",function(d){d.preventDefault();if(c.trim(c("#ReportAbuseForm-message").val())===""){c().General_ShowNotification({type:"error",message:"Please provide your message."});return}if(c.trim(c(".ReportAbuseCaptcha").val())===""){c().General_ShowNotification({type:"error",message:"Please provide captcha."});return}c.ajax({type:"POST",url:baseHttpPath+"/article/report-abuse",dataType:"json",data:c("#report-abuse-form").serialize(),success:function(f,g,e){c().General_ShowNotification({message:"Successfully reported as abuse."});c("#ModalReportAbuse").modal("hide");c("a.ReportAbuse").hide()},error:function(e,g,f){c().General_ShowErrorMessage({message:e.responseText})}})});c(".nav-fillslide h3").autoEllipsisText({multiline:true,accuracyStep:1});c(".like-post").click(function(h){h.preventDefault();var g=c(this).hasClass("like")?"like":"unlike";var d=c(this).data("id");var f=yii.getCsrfToken();c.ajax({url:baseHttpPath+"/article/like-post",type:"post",data:{action:g,post_id:d,_csrf:f},dataType:"json",success:function(e){if(e.success==1){if(g=="like"){c(".like-post > span").html(e.total_likes);c(".like-post").removeClass("like").addClass("unlike")}else{c(".like-post > span").html(e.total_likes);c(".like-post").removeClass("unlike").addClass("like")}}},error:function(e,j,i){c().General_ShowErrorMessage({message:e.responseText})}})})};return{init:function(){b()}}}(jQuery));PostController.ImageCaption=(function(b){var a=function(){b("body").on("click",".EditPostThumbnail, button.captionPostMediaBtn",function(j){j.preventDefault();var h=b(this);var g=false;if(h.hasClass("contentImage")){g=true;var i=b(h).closest(".media-placeholder").attr("id");var f=b("#"+i).find(".content-caption").text();b("#saveCaptionBtn").data("content-image-id",i);b("#saveCaptionBtn").data("postid","");b("#saveCaptionBtn").data("mediaid","");b("#updateCaptionText").val(f);b("#saveCaptionBtn").data("content-image",g)}else{var c=h.data("postid");var d=h.data("allmediaids");var f=h.data("caption");b("#updateCaptionText").val(f);b("#saveCaptionBtn").data("postid",c);b("#saveCaptionBtn").data("allmediaids",d);b("#saveCaptionBtn").data("content-image-id","")}b("#ModalImageCaption").modal("show")});b("#saveCaptionBtn").on("click",function(){var i=b(this);var h=i.data("content-image");if(h===true){var f=b(i).data("content-image-id");var e=b("#updateCaptionText").val();if(e==""){b("#"+f).find(".content-caption").html("").addClass("hide")}else{b("#"+f).find(".content-caption").html(e).removeClass("hide")}b("#"+f).find(".captionPostMediaBtn").data("caption",e);b("#ModalImageCaption").modal("hide");b().General_ShowNotification({message:"Caption updated successfully."});return}var c=i.data("postid");var d=i.data("allmediaids");var e=b("#updateCaptionText").val();var g=yii.getCsrfToken();b.ajax({url:baseHttpPath+"/post/update-caption",type:"post",data:{postId:c,mediaIds:d,caption:e,_csrf:g},dataType:"json",success:function(k){if(k.success=="0"){b().General_ShowErrorMessage({message:"Error updating caption."});return}var j=d.split(",");var l=j[0];b("#postThumbnailEditCaptionBtn-"+l).data("caption",e);b("#ModalImageCaption").modal("hide");b("#PostImageThumbnail-"+l).data("caption",e);if(b("#PostImageThumbnail-"+l).data("selected")==1){if(e!==""){b("div.article-image-caption").removeClass("hide");b("p.image-caption").html(e)}else{b("div.article-image-caption").addClass("hide")}}},error:function(j,l,k){b().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(k,j){b(i).text("Saving...")},complete:function(j,k){(i).text("SAVE")}})})};return{init:function(){a()}}}(jQuery));PostController.EventPost=(function(b){var a=function(){var e;var g=b("#addressMap");var i=g.data("latitude");var h=g.data("longitude");var d=g.data("location");google.maps.event.addDomListener(window,"load",c);function c(){var j;var m;if(i!=""&&h!=""){j=i;m=h}else{j=parseFloat(defaultLatitude);m=parseFloat(defaultLongitude)}var l=new google.maps.Map(document.getElementById("addressMap"),{zoom:7,center:{lat:j,lng:m}});var k=new google.maps.Geocoder();document.getElementById("createpost-suburb").addEventListener("change",function(){f(k,l)});if(i!=""&&h!=""){updateMarker=new google.maps.Marker({position:new google.maps.LatLng(i,h),map:l})}}function f(n,o){var m=document.getElementById("createpost-address").value;var l=document.getElementById("createpost-address1").value;var j=document.getElementById("createpost-suburb").value;var k=m+","+l+","+j;n.geocode({address:k},function(q,p){if(p===google.maps.GeocoderStatus.OK){o.setCenter(q[0].geometry.location);if(e){e.setMap(null)}e=new google.maps.Marker({map:o,position:q[0].geometry.location});var s=q[0].geometry.location.lat();var r=q[0].geometry.location.lng();document.getElementById("createpost-latitude").value=s;document.getElementById("createpost-longitude").value=r}else{document.getElementById("createpost-suburb").value="";b().General_ShowErrorMessage({message:"Geocode was not successful for the following reason: "+p})}})}b(".prefill-btn").on("click",function(k){k.preventDefault();var j=parseInt(b(".PostBlogID").val());if(isNaN(j)||j<=0){b().General_ShowErrorMessage({message:"Please select a blog."});return}b("#eventPrefillModal").modal("toggle")});b(".event-prefill-list").on("click",".eventPrefillChkbox",function(j){b(".eventPrefillChkbox:checked").not(this).removeAttr("checked")});b("#eventPrefillModal").on("shown",function(){var j=parseInt(b(".PostBlogID").val());b.ajax({type:"POST",url:baseHttpPath+"/search/blog-events",dataType:"json",data:{blogid:j},success:function(p,q,m){b("ul.event-prefill-list").html("");if(p.events.length>0){var o=b("#event-prefill-template").html();var k=Handlebars.compile(o);for(var n in p.events){var l=k(p.events[n]);b("ul.event-prefill-list").append(l)}b("#eventPrefillModal p.no-data").addClass("hide");b(".eventPrefillSubmitBtn").removeClass("hide")}else{b("#eventPrefillModal p.no-data").removeClass("hide");b(".eventPrefillSubmitBtn").addClass("hide")}},error:function(k,m,l){b().General_ShowErrorMessage({message:k.responseText})},beforeSend:function(l,k){},complete:function(k,l){}})});b(".eventPrefillSubmitBtn").on("click",function(l){l.preventDefault();var j=0;var k=b("input[type='checkbox'][name='eventPrefillChkbox']:checked");if(k.length>0){j=parseInt(k.val())}if(isNaN(j)||j<=0){b().General_ShowErrorMessage({message:"Please select an event."});return}b.ajax({type:"POST",url:baseHttpPath+"/search/event-details",dataType:"json",data:{postid:j},success:function(n,o,m){b("#createpost-venue").val(n.event.venue);b("#createpost-address").val(n.event.address);b("#createpost-address1").val(n.event.address1);b("#createpost-suburb").val(n.event.suburb);b("#createpost-postcode").val(n.event.postcode);b("#createpost-contact_name").val(n.event.contact_name);b("#createpost-contact_email").val(n.event.contact_email);b("#createpost-contact_number").val(n.event.contact_number);b("#createpost-website_url").val(n.event.website_url);b("#createpost-latitude").val(n.event.latitude);b("#createpost-longitude").val(n.event.longitude);b("#eventPrefillModal").modal("toggle")},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})},beforeSend:function(n,m){},complete:function(m,n){}})})};return{init:function(){a()}}}(jQuery));var WriteArticleController=(function(c){var b=function(e){var g={formData:{},onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var f=c.extend({},g,e);if(c.isEmptyObject(f.formData)){return false}c.ajax({type:"POST",url:baseHttpPath+"/post/save-post",dataType:"json",data:f.formData,success:function(i,j,h){if(f.onSuccess&&typeof f.onSuccess==="function"){f.onSuccess(i)}},error:function(h,j,i){if(f.onError&&typeof f.onError==="function"){f.onError(h.responseText)}},beforeSend:function(i,h){if(f.beforeSend&&typeof f.beforeSend==="function"){f.beforeSend()}},complete:function(h,i){if(f.onComplete&&typeof f.onComplete==="function"){f.onComplete()}}})};var d=function(){c("#tags_2_tagsinput").find("span.tag").remove();c("#write-article-form").trigger("reset");c(".sbOptions").find("a[href=#]").trigger("click");c(".WriteArticleThumbnails").html("");c("#tags_2_tag").trigger("focus");c("#tags_2_tag").trigger("blur")};var a=function(){c("button.WriteArticlePublishBtn, a.WriteArticleOpenInEditorBtn").on("click",function(i){i.preventDefault();var j=c(this);var h="draft";if(c(".WriteArticleBlogId").val()===""){c().General_ShowErrorMessage({message:"Please select a blog."});return}if(c(".WriteArticleTitle").val()===""){c().General_ShowErrorMessage({message:"Please provide an article title."});return}if(c(j).hasClass("WriteArticlePublishBtn")){if(c(".WriteArticleSportId").val()===""){c().General_ShowErrorMessage({message:"Please select a sport."});return}if(c(".WriteArticlePostContent").val()===""){c().General_ShowErrorMessage({message:"Please provide post content."});return}if(c(".WriteArticleTags").val()===""){c().General_ShowErrorMessage({message:"Please provide article tag(s)."});return}if(c(".WriteArticleThumbnails").find("img").length<=0){c().General_ShowErrorMessage({message:"Please select an image."});return}h="published"}var g=c("#write-article-form").serializeArray();g.push({name:"CreatePost[published_status]",value:h});b({formData:c.param(g),onError:function(k){c().General_ShowErrorMessage({message:k})},onSuccess:function(k){d();if(c(j).hasClass("WriteArticleOpenInEditorBtn")){window.location=baseHttpPath+"/post/edit/"+k.postId}c().General_ShowNotification({message:"Successfully saved"})},beforeSend:function(){if(c(j).hasClass("WriteArticlePublishBtn")){c(j).data("origText",c(j).html()).html("Please wait..")}else{c("i",j).General_AddRemoveSpinnerIcon()}},onComplete:function(){if(c(j).hasClass("WriteArticlePublishBtn")){c(j).html(c(j).data("origText"))}else{c("i",j).General_AddRemoveSpinnerIcon()}}})});Dropzone.autoDiscover=false;var f=new Dropzone("#dropzone",{paramName:"post_image_file",addRemoveLinks:false,maxFiles:10,init:function(){this.on("success",function(j,l){var k=JSON.parse(l);var o=k.images.thumb.path;var m=k.images.asset.id;var h=c("#write-article-thumbnail-template").html();var n=Handlebars.compile(h);var i=m+","+k.images.thumb.id+","+k.images.listing.id;var g=n({imgSrc:o,commaSepAssetIds:i});c(".WriteArticleThumbnails").append(g);c().General_ShowNotification({message:"Image added successfully"})})}});c("#ModalImage").on("shown",function(){f.removeAllFiles()});var e=false;c("#GettyImages form").GettyImages({inputObj:c("#GettyImages form input.GettyImagesInput"),thumbsOuterContainer:c("#GettyImages div.blog-level"),thumbsDisplayContainer:c("#GettyImages div.scroller-clubs"),displayPageNumbersElement:c("#GettyImages span.GettyImagesPages"),loadMoreButton:c("#GettyImages button.GettyImagesLoadMore"),onImageSelect:function(i){if(e){c().General_ShowNotification({message:"Image download already in progress",type:"error"});return}var h=i.imageId;var g=0;c.ajax({type:"post",url:baseHttpPath+"/post/upload-getty-image",dataType:"json",data:{id:h,postid:g,contentimage:0,_csrf:yii.getCsrfToken()},success:function(o,m,p){var r=o.images.thumb.path;var n=o.images.asset.id;var k=c("#write-article-thumbnail-template").html();var q=Handlebars.compile(k);var l=n+","+o.images.thumb.id+","+o.images.listing.id;var j=q({imgSrc:r,commaSepAssetIds:l});c(".WriteArticleThumbnails").append(j);c().General_ShowNotification({message:"Image added successfully"})},error:function(j,l,k){c().General_ShowErrorMessage({message:j.responseText,type:"error"});return false},beforeSend:function(k,j){e=true;c("#ModalImage .modal-content").General_AddRemoveAjaxLoader()},complete:function(j,k){e=false;c("#ModalImage .modal-content").General_AddRemoveAjaxLoader()}})}})};return{init:function(){a()}}}(jQuery));(function(a){a.fn.duplicatePost=function(b){var d={onSuccess:function(){},onError:function(){},beforeSend:function(){},onComplete:function(){}};var c=a.extend({},d,b);return this.each(function(){var e=a(this);a(e).click(function(h){h.preventDefault();var f=parseInt(a(this).data("id"));var g=a("#ajax-modal");a("body").modalmanager("loading");setTimeout(function(){g.load(baseHttpPath+"/post/modal-duplicate-post?postId="+f,"",function(){a(".republish-scrollbar").slimScroll({});g.modal()})},500)})})};a("#ajax-modal").on("shown",function(){a("#duplicate-post-btn").on("click",function(){var b=[];var c=parseInt(a(this).data("post"));a(".republishInBlogs:checked").not(":disabled").each(function(){b.push(a(this).val())});if(b.length>0){a.ajax({type:"POST",url:baseHttpPath+"/article/duplicate-post",dataType:"json",data:{postId:c,blogIds:b,_csrf:yii.getCsrfToken()},success:function(d){if(d.success==1){a("#ajax-modal").modal("hide");a().General_ShowNotification({message:"Article successfully republished in selected blog(s)."});a(".republishInBlogs:checked").not(":disabled").attr("disabled","disabled")}else{a().General_ShowErrorMessage({message:"Invalid Request"})}},error:function(d,f,e){a().General_ShowErrorMessage({message:d.responseText})},beforeSend:function(){a("#duplicate-post-btn i").General_AddRemoveSpinnerIcon()},onComplete:function(){a("#duplicate-post-btn i").General_AddRemoveSpinnerIcon()}})}})})}(jQuery));var SocialContactsController=(function(a){return{init:function(){SocialContactsController.Invite.init();SocialContactsController.MyFeed.init()}}}(jQuery));SocialContactsController.MyFeed=(function(b){var a=function(){b("button.SelCodes").on("click",function(f){f.preventDefault();var d=b(this).data("action");if(d==="select"){b("ul.fu-fav-sports input[type=checkbox]").attr("checked",true);b(this).data("action","deselect");b(this).html("Unselect all")}else{b("ul.fu-fav-sports input[type=checkbox]").attr("checked",false);b(this).data("action","select");b(this).html("Select all")}});b("button.SelClubs").on("click",function(f){f.preventDefault();var d=b(this).data("action");if(d==="select"){b("ul.fu-fav-clubs input[type=checkbox]").attr("checked",true);b(this).data("action","deselect");b(this).html("Unselect all")}else{b("ul.fu-fav-clubs input[type=checkbox]").attr("checked",false);b(this).data("action","select");b(this).html("Select all")}});b("button.SelWriters").on("click",function(f){f.preventDefault();var d=b(this).data("action");if(d==="select"){b("ul.suggestedwriters button.like").addClass("selected");b(this).data("action","deselect");b(this).html("Unselect all")}else{b("ul.suggestedwriters button.like").removeClass("selected");b(this).data("action","select");b(this).html("Select all")}});b("button.SelBlogs").on("click",function(f){f.preventDefault();var d=b(this).data("action");if(d==="select"){b("ul.suggestedblogs button.like").addClass("selected");b(this).data("action","deselect");b(this).html("Unselect all")}else{b("ul.suggestedblogs button.like").removeClass("selected");b(this).data("action","select");b(this).html("Select all")}});b("ul.suggestedwriters button.like, ul.suggestedblogs button.like").on("click",function(d){d.preventDefault();b(this).toggleClass("selected")});var c=false;b(".SubmitMyFeedBtn").on("click",function(j){j.preventDefault();if(c){return false}c=true;var h=[];var f=0;b("#FUFavSports").find("input[type=checkbox]").each(function(){if(b(this).is(":checked")){h[f]=encodeURIComponent(b(this).val());f++}});var d=[];var f=0;b("#FUFavClubs").find("input[type=checkbox]").each(function(){if(b(this).is(":checked")){d[f]=encodeURIComponent(b(this).val());f++}});var g=[];var f=0;b("ul.suggestedwriters").find("button.like").each(function(){if(b(this).hasClass("selected")){g[f]=encodeURIComponent(b(this).data("id"));f++}});var k=[];var f=0;b("ul.suggestedblogs").find("button.like").each(function(){if(b(this).hasClass("selected")){k[f]=encodeURIComponent(b(this).data("id"));f++}});var l=b(this);b.ajax({url:baseHttpPath+"/social-contacts/index",type:"post",data:{sports:h,clubs:d,writers:g,blogs:k,_csrf:yii.getCsrfToken()},dataType:"json",success:function(e){if(e.success){b().General_ShowNotification({message:"Successfully updated"});setTimeout(function(){window.location=baseHttpPath+"/social-connect/index"},1000)}},error:function(e,m,i){b().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(i,e){b(".SubmitMyFeedBtn").html("Please wait...")},complete:function(e,i){c=false;b(".SubmitMyFeedBtn").html("Submit")}})})};return{init:function(){a()}}}(jQuery));SocialContactsController.Invite=(function(b){var a=function(){b("button.inviteSubmit").on("click",function(d){d.preventDefault();var c=false;b("#InviteForm").find("input[type=checkbox]").each(function(){if(b(this).is(" :checked")){c=true}});if(!c){b().General_ShowErrorMessage({message:"Please select a contact to invite."});return}b("#InviteForm").submit()});b("button.SelectAllSocialContacts").on("click",function(c){c.preventDefault();b("#SocialContactsPanel input[type=checkbox]").attr("checked",true)});b("button.UnSelectSocialContacts").on("click",function(c){c.preventDefault();b("#SocialContactsPanel input[type=checkbox]").attr("checked",false)})};return{init:function(){a()}}}(jQuery));var SocialConnectController=(function(a){return{init:function(){SocialConnectController.Followers.init();SocialConnectController.MyFeed.init()}}}(jQuery));SocialConnectController.MyFeed=(function(b){var a=function(){b(".submitFollower").on("click",function(d){d.preventDefault();var c=[];b("#SocialFollowersPanel").find("input[type=checkbox]").each(function(){if(b(this).is(":checked")){c.push(encodeURIComponent(b(this).val()))}});var f=b(this);if(c.length>0){b.ajax({url:baseHttpPath+"/social-connect/follow",type:"post",data:{SocialFollower:c},dataType:"json",success:function(e){if(e.success){window.location=baseHttpPath+"/social-connect"}},error:function(e,h,g){b().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(g,e){b(f).html("Please wait...")},complete:function(e,g){b(f).html("Follow")}})}})};return{init:function(){a()}}}(jQuery));SocialConnectController.Followers=(function(b){var a=function(){b("button.SelectAllSocialFollowers").on("click",function(c){c.preventDefault();b("#SocialFollowersPanel input[type=checkbox]").attr("checked",true)});b("button.UnSelectSocialFollowers").on("click",function(c){c.preventDefault();b("#SocialFollowersPanel input[type=checkbox]").attr("checked",false)})};return{init:function(){a()}}}(jQuery));var SocialModerationController=(function(b){var a=function(){b(".custom-blog-select").change(function(){var c=b(this).val();if(c!=""){window.location.href=baseHttpPath+"/social-moderation/index?blogId="+c}})};return{init:function(){a();SocialModerationController.SocialFeed.init()},}}(jQuery));SocialModerationController.SocialFeed=(function(b){var a=function(){var d=function(){new AnimOnScroll(document.getElementById("moderationgrid"),{minDuration:0.4,maxDuration:0.7,viewportFactor:0.2})};d();var f=function(i){var k={loader:b("div.load-more-items"),container:b("ul.moderationgrid"),onSuccess:false,onError:false,beforeSend:false,onComplete:false,page:0,blogId:0,socialSource:"all",replaceExisting:false,keywords:null};var j=b.extend({},k,i);if(isNaN(j.blogId)||j.blogId<=0){return}if(isNaN(j.page)){return}b(j.container).data("page",j.page);var h=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/social-moderation/load-more-posts",dataType:"json",data:{blogid:j.blogId,page:j.page,keywords:j.keywords,source:j.socialSource,_csrf:h},success:function(m,n,l){if(j.socialSource==="review"){if(m.articlesCount>0){b("#ModalReview div.modal-body").html(m.html)}else{b("#ModalReview div.modal-body").html('<p class="no-data">No data found.</p>')}b(".reviewList").slimScroll({height:"350px"})}else{if(m.articlesCount>0){if(j.replaceExisting){b(j.container).html(m.html)}else{b(j.container).append(m.html)}if(m.articlesCount<postsOffset){c.destroy()}else{Waypoint.refreshAll()}d()}else{c.destroy();if(j.replaceExisting){b(j.container).html("");b(j.container).css("height","0px")}if(j.page<=0){b(".NoDataModeration").removeClass("hide")}}}if(j.onSuccess&&typeof j.onSuccess==="function"){j.onSuccess(m)}},error:function(l,n,m){if(j.onError&&typeof j.onError==="function"){j.onError(l.responseText)}},beforeSend:function(m,l){b(j.loader).removeClass("hide");b(".NoDataModeration").addClass("hide");if(j.beforeSend&&typeof j.beforeSend==="function"){j.beforeSend()}},complete:function(l,m){b(j.loader).addClass("hide");if(j.onComplete&&typeof j.onComplete==="function"){j.onComplete()}}})};var c=new Waypoint({element:b("#LoadMoreArticles"),offset:"90%",handler:function(l){if(l=="down"){var i=parseInt(b("ul.moderationgrid").data("blogid"));var k=b("#SocialSource option:selected").val();var h=b("#searchSocialFeed").val();var j=parseInt(b("ul.moderationgrid").data("page"));j=j+1;f({page:j,blogId:i,keywords:h,socialSource:k})}}});b("#SocialSource").on("change",function(){var k=b(this).val();var h=b("#searchSocialFeed").val();var i=parseInt(b("ul.moderationgrid").data("blogid"));var j=0;f({page:j,blogId:i,keywords:h,socialSource:k,replaceExisting:true})});b("#ModalReview").on("shown",function(){var h=parseInt(b("ul.moderationgrid").data("blogid"));f({blogId:h,socialSource:"review"})});b("#ModalReview").on("click","button.RemoveFromReview",function(k){k.preventDefault();var j=b(this);var l=b(this).data("postid");var i=b("#moderationgrid").data("blogid");var h=b('meta[name="csrf-token"]').attr("content");if(isNaN(l)||l<=0){b().General_ShowErrorMessage({message:"Invalid Post"});return}b.ajax({type:"POST",url:baseHttpPath+"/social-moderation/session-social-moderation",dataType:"json",data:{id:l,blogId:i,_csrf:h},success:function(m){if(m.success==1){b(j).closest("li").remove();b(".moderationgrid").find("li.SocialArticle"+l).find("a.PinArticleBtn").removeClass("active");if(b("#ModalReview ul.reviewBody li").length<=0){b("#ModalReview div.modal-body").html('<p class="no-data">No data found.</p>')}b().General_ShowNotification({message:"Successfully un-pinned."})}},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})},beforeSend:function(n,m){b("i",j).General_AddRemoveSpinnerIcon()},complete:function(m,n){b("i",j).General_AddRemoveSpinnerIcon()}})});b("#moderationgrid").on("click","a.EditSocialBtn",function(l){l.preventDefault();var k=b(this);var j=b("#ModalNewCode");var h=k.data("postid");var i=b("#postsContent-"+h).children("p").text();b(".edit-social-form",j).data("id",h);b(".editSocialContent",j).val(i);j.modal("show")});b(".edit-social-form").on("submit",function(l){l.preventDefault();var k=b(this);var m=k.data("id");var j=k.data("blogid");var i=b(".editSocialContent",k).val();var h=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/social-moderation/update-social-moderation",dataType:"json",data:{action:"editPost",id:m,blogId:j,content:i,_csrf:h},success:function(n){if(n.success==1){b("#postsContent-"+m).children("p").html(i);d();b().General_ShowNotification({message:"Article updated successfully."})}},error:function(n,p,o){b().General_ShowErrorMessage({message:n.responseText})},beforeSend:function(o,n){},complete:function(n,o){b("#ModalNewCode").modal("hide")}})});b("#moderationgrid").on("click","a.PinArticleBtn",function(k){k.preventDefault();var j=b(this);var m=b(this).data("postid");var i=b("#moderationgrid").data("blogid");var h=b('meta[name="csrf-token"]').attr("content");var l=(b(j).hasClass("active"))?"Un-Pinned":"Pinned";if(isNaN(m)||m<=0){b().General_ShowErrorMessage({message:"Invalid Article"});return}b.ajax({type:"POST",url:baseHttpPath+"/social-moderation/session-social-moderation",dataType:"json",data:{id:m,blogId:i,_csrf:h},success:function(n){if(n.success==1){if(b(j).hasClass("active")){b(j).removeClass("active");b(j).attr("title","Pin")}else{b(j).addClass("active");b(j).attr("title","UnPin")}b().General_ShowNotification({message:"Successfully "+l+"."})}},error:function(n,p,o){b().General_ShowErrorMessage({message:n.responseText})},beforeSend:function(o,n){b("i",j).General_AddRemoveSpinnerIcon()},complete:function(n,o){b("i",j).General_AddRemoveSpinnerIcon()}})});b("#moderationgrid").on("click","a.DeleteSocialBtn",function(m){m.preventDefault();var l=b(this);var n=l.data("postid");var k=l.data("action");var j=b("#moderationgrid").data("blogid");var i="Do you really want to delete this article?";var h="Article deleted successfully.";bootbox.confirm({title:"Confirm",message:i,callback:function(o){if(o){g(j,k,h,n)}}})});b("#moderationgrid").on("click","a.ApproveSocialBtn",function(m){m.preventDefault();var l=b(this);var n=l.data("postid");var k=l.data("action");var j=b("#moderationgrid").data("blogid");var i="Do you really want to publish this article?";var h="Article published successfully.";bootbox.confirm({title:"Confirm",message:i,callback:function(o){if(o){g(j,k,h,n)}}})});b("#ModalReview, ul.allFeedControls, div.chSocialBlocks").on("click",".ApproveSelectedBtn, .DeleteSelectedBtn, a.deleteUnselectedPosts",function(m){m.preventDefault();var l=b(this);var k=b(l).data("action");var j=b("#moderationgrid").data("blogid");if(k==="approvePosts"){i="Do you really want to publish all pinned article(s)?";h="All selected article(s) published successfully."}else{if(k==="deletePosts"){i="Do you really want to delete all pinned article(s)?";h="All selected article(s) deleted successfully."}else{if(k==="deleteRestPosts"){var i="Do you really want to delete all un-pinned article(s)?";var h="All un-pinned article(s) deleted successfully."}}}bootbox.confirm({title:"Confirm",message:i,callback:function(n){if(n){g(j,k,h,"")}}})});function g(j,k,i,l){var h=b('meta[name="csrf-token"]').attr("content");b.ajax({url:baseHttpPath+"/social-moderation/update-social-moderation",type:"post",dataType:"json",data:{id:l,action:k,blogId:j,_csrf:h},success:function(o){if(o.success==1){var m=o.socialPost.length;for(var n=0;n<m;n++){b(".SocialArticle"+o.socialPost[n]).remove()}if(k==="deleteRestPosts"){window.location.reload()}else{var m=b("#moderationgrid li").length;if(m<=0){b(".NoDataModeration").removeClass("hide")}if(b("#ModalReview").hasClass("in")){b("#ModalReview").modal("hide")}}d();b().General_ShowNotification({message:i})}},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})},beforeSend:function(n,m){},complete:function(m,n){}})}function e(h){var i=b("#social-select-filter");i.selectbox("detach");i.val(h);i.selectbox("attach")}b("#searchSocialFeedBtn").on("click",function(l){l.preventDefault();var h=b("#searchSocialFeed").val();if(b.trim(h)===""){b().General_ShowErrorMessage({message:"Enter Hashtags and handles"});return}var i=parseInt(b("ul.moderationgrid").data("blogid"));var j=b("#SocialSource option:selected").val();var k=0;f({page:k,blogId:i,keywords:h,socialSource:j,replaceExisting:true})})};return{init:function(){a()}}}(jQuery));var CropImageController=(function(a){return{init:function(){CropImageController.CropImage.init()}}}(jQuery));CropImageController.CropImage=(function(b){var a=function(){b(".thumbnail-crop-image").cropper({aspectRatio:b("#aspect-ratios").data("thumbnail-w")/b("#aspect-ratios").data("thumbnail-h"),minContainerWidth:600,minContainerHeight:400,minCanvasWidth:600,minCanvasHeight:400,minCropBoxWidth:200,minCropBoxHeight:200,crop:function(f){b(".thumbnailX").val(f.x);b(".thumbnailY").val(f.y);b(".thumbnailWidth").val(f.width);b(".thumbnailHeight").val(f.height);b(".thumbnailRotate").val(f.rotate);b(".thumbnailScaleX").val(f.scaleX);b(".thumbnailScaleY").val(f.scaleY)}});b(".listing-crop-image").cropper({aspectRatio:b("#aspect-ratios").data("listing-w")/b("#aspect-ratios").data("listing-h"),minContainerWidth:600,minContainerHeight:400,minCanvasWidth:600,minCanvasHeight:400,minCropBoxWidth:200,minCropBoxHeight:200,crop:function(f){b(".listingX").val(f.x);b(".listingY").val(f.y);b(".listingWidth").val(f.width);b(".listingHeight").val(f.height);b(".listingRotate").val(f.rotate);b(".listingScaleX").val(f.scaleX);b(".listingScaleY").val(f.scaleY)}});b(".large-crop-image").cropper({aspectRatio:b("#aspect-ratios").data("large-w")/b("#aspect-ratios").data("large-h"),minContainerWidth:600,minContainerHeight:400,minCanvasWidth:600,minCanvasHeight:400,minCropBoxWidth:200,minCropBoxHeight:200,crop:function(f){b(".largeX").val(f.x);b(".largeY").val(f.y);b(".largeWidth").val(f.width);b(".largeHeight").val(f.height);b(".largeRotate").val(f.rotate);b(".largeScaleX").val(f.scaleX);b(".largeScaleY").val(f.scaleY)}});var c;b(".post-thumbnail-controls").on("click",".CropPostImage",function(j){j.preventDefault();var f=parseInt(b(this).data("postid"));var g=b(this).data("allmediaids");if(g!==""){var i=g.split(",");if(i.length>=3){b("#ModalCropImage input.assetMediaId").val(i[0]);b("#ModalCropImage input.thumbMediaId").val(i[1]);b("#ModalCropImage input.listingMediaId").val(i[2])}}var h=parseInt(b(this).data("orig-mediaid"));b("#ModalCropImage input.postId").val(f);b("#ModalCropImage input.origMediaId").val(h);if(isNaN(f)||f<=0||isNaN(h)||h<=0){return}c=b(this).data("orig-image-path");b(".thumbnail-crop-image").attr("src",c);b(".listing-crop-image").attr("src",c);b(".large-crop-image").attr("src",c);b(".thumbnail-crop-image").cropper("replace",c);b(".listing-crop-image").cropper("replace",c);b(".large-crop-image").cropper("replace",c);b("#ModalCropImage").modal("toggle")});b("#ModalCropImage").on("click","button.rotateLeftBtnThumbnail",function(f){f.preventDefault();b(".thumbnail-crop-image").cropper("rotate",-5)});b("#ModalCropImage").on("click","button.rotateRightBtnThumbnail",function(f){f.preventDefault();b(".thumbnail-crop-image").cropper("rotate",5)});b("#ModalCropImage").on("click","button.submitThumbnail",function(g){g.preventDefault();var f=new Object();f.x=b(".thumbnailX").val();f.y=b(".thumbnailY").val();f.width=b(".thumbnailWidth").val();f.height=b(".thumbnailHeight").val();f.rotate=b(".thumbnailRotate").val();f.scalex=b(".thumbnailScaleX").val();f.scaley=b(".thumbnailScaleY").val();f.type="thumbnail";d(f,b(this))});b("#ModalCropImage").on("click","button.submitListing",function(g){g.preventDefault();var f=new Object();f.x=b(".listingX").val();f.y=b(".listingY").val();f.width=b(".listingWidth").val();f.height=b(".listingHeight").val();f.rotate=b(".listingRotate").val();f.scalex=b(".listingScaleX").val();f.scaley=b(".listingScaleY").val();f.type="listing";d(f,b(this))});b("#ModalCropImage").on("click","button.submitLarge",function(g){g.preventDefault();var f=new Object();f.x=b(".largeX").val();f.y=b(".largeY").val();f.width=b(".largeWidth").val();f.height=b(".largeHeight").val();f.rotate=b(".largeRotate").val();f.scalex=b(".largeScaleX").val();f.scaley=b(".largeScaleY").val();f.type="large";d(f,b(this))});var d=function(e,f){e.postid=b("#ModalCropImage input.postId").val();e.origmediaid=b("#ModalCropImage input.origMediaId").val();e.thumbmediaid=b("#ModalCropImage input.thumbMediaId").val();e.assetmediaid=b("#ModalCropImage input.assetMediaId").val();e.listingmediaid=b("#ModalCropImage input.listingMediaId").val();e._csrf=yii.getCsrfToken();b.ajax({url:baseHttpPath+"/post/crop-image",type:"post",data:e,dataType:"json",success:function(k){if(k.success==1){var n=b("#ModalCropImage input.assetMediaId").val();var i=b("#PostImageThumbnail-"+n);b(i).data("mediaid",k.postAssets.media_id);b(i).attr("id","PostImageThumbnail-"+k.postAssets.media_id);var m=b("button.DeletePostThumbnail[data-mediaid="+n+"]");b(m).data("mediaid",k.postAssets.media_id);var h=b("button.EditPostThumbnail[data-mediaid="+n+"]");b(h).data("allmediaids",k.allMediaIds);b(h).data("mediaid",k.postAssets.media_id);b(h).attr("id","postThumbnailEditCaptionBtn-"+k.postAssets.media_id);var g=b("button.CropPostImage[data-mediaid="+n+"]");b(g).data("allmediaids",k.allMediaIds);b(g).data("mediaid",k.postAssets.media_id);var j=b.now();if(e.type==="thumbnail"){b(i).attr("src",k.imageData.cdn_path+"?tmp="+j)}else{if(e.type==="large"){if(b(i).closest("div.thumbnail-elements-logo").hasClass("selected")){b(".PostThumbImage").attr("src",k.imageData.cdn_path+"?tmp="+j)}}else{}}var l=k.allMediaIds.split(",");if(l.length>=3){b("#ModalCropImage input.assetMediaId").val(l[0]);b("#ModalCropImage input.thumbMediaId").val(l[1]);b("#ModalCropImage input.listingMediaId").val(l[2])}}b().General_ShowNotification({message:"Successfully cropped"})},error:function(g,i,h){b().General_ShowErrorMessage({message:g.responseText})},beforeSend:function(h,g){b(f).html("Please wait...")},complete:function(g,h){b(f).html("Select")}})}};return{init:function(){a()}}}(jQuery));var EventController=(function(a){return{pagination:function(){EventController.Pagination.init()},calendar:function(){EventController.Calendar.init()},list:function(){EventController.List.init()},address:function(){EventController.Address.init()},createEvent:function(){EventController.CreateEvent.init()},post:function(){EventController.EventPost.init()},map:function(){EventController.Map.init()}}}(jQuery));EventController.Pagination=(function(b){var a=function(){b(".pagination-date").on("click",function(){var h=b(this);var g=h.data("type");var e=h.data("date");var d=h.data("view");var c=b('meta[name="csrf-token"]').attr("content");var f=(b(h).parent().hasClass("top"))?".top-loader":".bottom-loader";if(g==""||e==""){b().General_ShowErrorMessage({message:"Internal Server Error On Pagination !"});return}b.ajax({type:"POST",url:baseHttpPath+"/event/more-events",dataType:"json",data:{date:e,type:g,viewType:d,_csrf:c},success:function(m,n,l){if(m.success==1){b(".currentDate").text(m.currentMonth);b(".pagination-date, .event-container").data("date",m.currentDate);b(".nextDate").text(m.nextMonth);b(".preDate").text(m.preMonth);if(m.address.length>0){var j=b("#event-address-template").html();var i=Handlebars.compile(j);var k=b(i(m.address));b("#eventAddress").html(k)}else{b("#eventAddress").html("")}if(d=="calendar"){b("#eventCalendar").html(m.template);b("#eventCalendar").append('<div class="calendar-details--modal"></div>')}else{if(d=="list"){if(m.totalRecords<=0){b(".events__pagination").hide();b("#eventList").html("No events found on this month !");b("#eventList").addClass("text-center")}else{b(".events__pagination").show();b("#eventList").html(m.template)}}else{if(d=="map"){b("#eventMap").html(m.template);EventController.Map.init()}}}}},error:function(i,k,j){b().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(j,i){b(f).removeClass("hide")},complete:function(i,j){b(f).addClass("hide")}})})};return{init:function(){a()}}}(jQuery));EventController.Calendar=(function(b){var a=function(){b("tr").each(function(){b("td",this).each(function(){var d=b(this).data("count");var c=b(this).find("a").length;var f=parseInt(d)-parseInt(c);var e=parseInt(f)*parseInt(24);if(!isNaN(e)){b(this).find("a:nth-child(1)").css("margin-top",e+"px")}})});b(document).on("click",".calendar__event",function(g){g.preventDefault();var f=b(this);var d=f.data("id");var c=b('meta[name="csrf-token"]').attr("content");if(d==""||d<=0){b().General_ShowErrorMessage({message:"Internal Server Error On Events !"});return}b.ajax({type:"POST",url:baseHttpPath+"/event/event-model",dataType:"json",data:{postId:d,_csrf:c},success:function(h,i,e){if(h.success==1){b(".calendar-details--modal").html("");b(".calendar-details--modal").append(h.template);b(".calendar-details").simplemodal({appendTo:".calendar-details--modal",overlayClose:!0,containerId:"calendar-details--container",overlayId:"calendar-details--overlay",closeClass:"calendar-details__close",fixed:!1,opacity:60,zIndex:11000})}},error:function(e,i,h){b().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(h,e){},complete:function(e,h){}})})};return{init:function(){a()}}}(jQuery));EventController.List=(function(c){var a=function(){c("a.followEvent").followPost({onSuccess:function(d,e){(c(e).data("status")==="follow")?c(e).html("Add to my events"):c(e).html("Remove from my events")},onError:function(e,d){c().General_ShowErrorMessage({message:d});(c(e).data("status")==="follow")?c(e).html("Add to my events"):c(e).html("Remove from my events")},beforeSend:function(d){c(d).html("Please wait...")},onComplete:function(d){(c(d).data("status")==="follow")?c(d).html("Add to my events"):c(d).html("Remove from my events")}})};var b=function(){a();c(".filter-blog").on("change",function(){var g=c(".event-list__month--current");var e=g.data("month");var i=g.data("year");var f=(c(this).val()>0)?c(this).val():0;var h=c(".event-list__items").data("followed-only");var d=c('meta[name="csrf-token"]').attr("content");if(e===undefined||i===undefined){c().General_ShowErrorMessage({message:"Internal Server Error On Pagination !"});return}c.ajax({type:"POST",url:baseHttpPath+"/event/list",dataType:"json",data:{month:e,year:i,blogId:f,myevents:h,_csrf:d},success:function(k,l,j){if(k.success==1){if(k.eventsCount>0){c(".event-list__items").html(k.html)}else{c(".event-list__items").html('<div class="event-item"><p class="text-center">No Event(s) found !</p></div>')}a()}},error:function(j,l,k){c().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(k,j){c(".blogLoader").removeClass("hide")},complete:function(j,k){c(".blogLoader").addClass("hide")}})});c("a.event-list__month, a.event-list__arrow").on("click",function(l){l.preventDefault();l.stopPropagation();if(c(this).hasClass("event-list__month--current")){return}var f=c(this);var g=f.data("month");var n=f.data("year");var k=c(".event-list__items").data("followed-only");var j=c('meta[name="csrf-token"]').attr("content");var d=c(".filter-blog option:selected").val();var i=0;if(d>0){i=d}if(g===undefined||n===undefined){c().General_ShowErrorMessage({message:"Internal Server Error On Pagination !"});return}var h=c(".event-list__month--current").data("month-itemno");if(c(this).hasClass("event-list__arrow--previous")){if(h==0){window.location=baseHttpPath+"/event/list?act=prev&month="+g+"&year="+n+"&myevents="+k+"&blogid="+i;return}}if(c(this).hasClass("event-list__arrow--next")){if(h==9){window.location=baseHttpPath+"/event/list?act=next&month="+g+"&year="+n+"&myevents="+k+"&blogid="+i;return}}c.ajax({type:"POST",url:baseHttpPath+"/event/list",dataType:"json",data:{month:g,year:n,blogId:i,myevents:k,_csrf:j},success:function(m,o,e){if(m.success==1){if(m.eventsCount>0){c(".event-list__items").html(m.html)}else{c(".event-list__items").html('<div class="event-item"><p class="text-center">No Event(s) found !</p></div>')}c("div.event-list__months a.event-list__month--current").removeClass("event-list__month--current");c("a.event-"+g+"-"+n).addClass("event-list__month--current");c("a.event-list__arrow--previous").data("month",m.prevMonth);c("a.event-list__arrow--previous").data("year",m.prevYear);c("a.event-list__arrow--next").data("month",m.nextMonth);c("a.event-list__arrow--next").data("year",m.nextYear);a()}},error:function(e,o,m){c().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(m,e){c(".loader").removeClass("hide")},complete:function(e,m){c(".loader").addClass("hide")}})})};return{init:function(){b()}}}(jQuery));EventController.Address=(function(b){var a=function(){b(document).on("click",".event-addr-filter",function(){var h=b(this);var f=h.data("address");var e=b(".event-container");var d=b(e).data("view");var g=b(e).data("date");var c=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/event/more-events",dataType:"json",data:{address:f,type:"address",viewType:d,date:g,_csrf:c},success:function(j,k,i){if(j.success==1){if(d=="calendar"){b("#eventCalendar").html(j.template);b("#eventCalendar").append('<div class="calendar-details--modal"></div>')}else{if(d=="list"){b("#eventList").html(j.template)}else{if(d=="map"){b("#eventMap").html(j.template);EventController.map()}}}}},error:function(i,k,j){b().General_ShowErrorMessage({message:i.responseText})},beforeSend:function(j,i){},complete:function(i,j){}})})};return{init:function(){a()}}}(jQuery));EventController.CreateEvent=(function(b){var a=function(){Dropzone.autoDiscover=false;var f=new Dropzone("#eventDropzone",{url:baseHttpPath+"/event/process-upload-image",paramName:"post_image_file",addRemoveLinks:false,maxFiles:3,acceptedFiles:".jpeg,.jpg,.png",init:function(){this.on("success",function(j,h){var i=JSON.parse(h);var g=i.images.asset.id+","+i.images.thumb.id+","+i.images.listing.id;b("#eventImages").append('<input type="hidden" name="CreatePost[post_images_upload][]" value="'+g+'" />');b().General_ShowNotification({message:"Image added successfully"})});this.on("addedfile",function(){if(this.files.length>1){var g=parseInt(this.files.length)-2;if(this.files[g].status==="error"){this.removeFile(this.files[g])}}})}});f.on("sending",function(g,i,h){h.append("_csrf",yii.getCsrfToken())});b("#content-editor").freshereditor({toolbar_selector:"#toolbar",excludes:["removeFormat","insertheading4"]});b("#content-editor").freshereditor("edit",true);b("#createpost-start_date").datetimepicker({autoclose:true,format:"dd-mm-yyyy HH:ii:ss P",pickerPosition:"bottom-left",});b("#createpost-end_date").datetimepicker({autoclose:true,format:"dd-mm-yyyy HH:ii:ss P",pickerPosition:"bottom-left",});var d;google.maps.event.addDomListener(window,"load",c);function c(){var h=new google.maps.Map(document.getElementById("addressMap"),{zoom:7,center:{lat:parseFloat(defaultLatitude),lng:parseFloat(defaultLongitude)}});var g=new google.maps.Geocoder();b("#createpost-contact_name").on("change",function(){e(g,h)})}function e(h,i){var g=document.getElementById("createpost-address").value+","+document.getElementById("createpost-suburb").value+",Australia";h.geocode({address:g},function(k,j){if(j===google.maps.GeocoderStatus.OK){i.setCenter(k[0].geometry.location);if(d){d.setMap(null)}d=new google.maps.Marker({map:i,position:k[0].geometry.location});i.setZoom(10);var m=k[0].geometry.location.lat();var l=k[0].geometry.location.lng();document.getElementById("createpost-latitude").value=m;document.getElementById("createpost-longitude").value=l}else{document.getElementById("createpost-address").value="";document.getElementById("createpost-suburb").value="";b().General_ShowErrorMessage({message:"Geocode was not successful for the following reason: "+j});return}})}b(".SaveEventBtn").on("click",function(h){h.preventDefault();var i=b(this);var g;b("#content-editor").freshereditor("save",function(n,l){g=l;g=PostController.clearMSFormatting(g);if(b.trim(b("#createpost-title").val())===""){b().General_ShowErrorMessage({message:"Please at least give event a title."});return}var j=[];if(b.trim(b("#createpost-start_date").val())===""){j.push("Start date can not empty")}if(b.trim(b("#createpost-address").val())===""){j.push("Address can not empty")}if(b.trim(b("#createpost-suburb").val())===""){j.push("Suburb can not empty")}if(b.trim(b("#createpost-postcode").val())===""){j.push("Post code can not empty")}if(b.trim(b("#createpost-contact_name").val())===""){j.push("Contact name can not empty")}if(b.trim(b("#createpost-contact_email").val())===""){j.push("Contact email can not empty")}if(j.length>0){var k=j.join("</br>");b().General_ShowErrorMessage({message:k});return}if(b.inArray("image",eventRequiredAttribs)>=0){if(b.trim(b("#createpost-post_images_upload").val())===""){b().General_ShowErrorMessage({message:"Please select a featured image."});return}}var m=b("#create-post-form").serializeArray();m.push({name:"CreatePost[post_content]",value:g});b.ajax({type:"POST",url:baseHttpPath+"/event/create",dataType:"json",data:m,formData:b.param(m),success:function(p,q,o){if(p.success=="1"){b().General_ShowNotification({message:"Event submitted successfully."});setTimeout(function(){window.location.reload(true)},3000)}},error:function(o,q,p){b().General_ShowErrorMessage({message:o.responseText})},beforeSend:function(p,o){b(i).val("Please Wait..");b(i).attr("disabled","disabled")},complete:function(o,p){b(i).val("submit event +");b(i).removeAttr("disabled")}})})})};return{init:function(){a()}}}(jQuery));EventController.EventPost=(function(b){var a=function(){var d=b("#event-map");var h=d.data("latitude");var e=d.data("longitude");var f=d.data("title");var c=new google.maps.LatLng(h,e);google.maps.event.addDomListener(window,"load",g);function g(){var j={center:c,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP};var k=new google.maps.Map(document.getElementById("event-map"),j);var i=new google.maps.Marker({position:c,title:f,});i.setMap(k);google.maps.event.addListener(i,"click",function(){k.setZoom(9);k.setCenter(i.getPosition())})}};return{init:function(){a()}}}(jQuery));EventController.Map=(function(b){var a=function(){var e=b("#map");var c=e.data("info");var f=e.data("ajax");if(f){g()}else{google.maps.event.addDomListener(window,"load",g)}function g(){var i=new google.maps.LatLng(parseFloat(defaultLatitude),parseFloat(defaultLongitude));var l=new google.maps.Map(document.getElementById("map"),{zoom:7,center:i});if(c.length>0){for(var k in c){if(c[k].latitude==""||c[k].longitude==""){continue}var h=new google.maps.Marker({position:{lat:parseFloat(c[k].latitude),lng:parseFloat(c[k].longitude)},map:l});var j="<div><img width='300' height='250' src='"+c[k].picture+"'/><h3>"+c[k].title+"</h3><em>Time:"+c[k].startTime+"-"+c[k].endTime+"</em></div>";d(h,j)}}}function d(h,i){var j=new google.maps.InfoWindow({content:i});h.addListener("click",function(){j.open(h.get("map"),h)})}};return{init:function(){a()}}}(jQuery));var HomeController=(function(a){return{home:function(){HomeController.Home.init()},blog:function(){HomeController.Blog.init()},code:function(){HomeController.Code.init()},post:function(){HomeController.Post.init()},subscription:function(){HomeController.Subscription.init()},}}(jQuery));HomeController.Home=(function(b){b(".playVideo").youtubePlay({showSelector:"div.play-container",containerClass:"card__image",iframeClass:""});b(".LoadMorePostsContainer").youtubePlay({showSelector:"div.play-container",containerClass:"card__image",iframeClass:""});b(".playVideo").vimeoPlay({showSelector:"div.play-container",containerClass:"card__image",iframeClass:""});b(".LoadMorePostsContainer").vimeoPlay({showSelector:"div.play-container",containerClass:"card__image",iframeClass:""});var c=function(i){var g=parseInt(b(i).data("id"));var h=parseInt(b(i).data("social"));var f=parseInt(b(i).data("position"));var e=(b(i).hasClass("selected"))?"unpinning":"pinning";if(isNaN(g)||g<=0||isNaN(f)||f<=0){b().General_ShowErrorMessage({message:"Error "+e+" article."});return}var d=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/post/toggle-pin-post",dataType:"json",data:{id:g,position:f,social:h,blogid:blogId,_csrf:d},success:function(k,l,j){if(b(i).hasClass("selected")){b(i).removeClass("selected");b(i).attr("title","Pin");b().General_ShowNotification({message:"Successfully unpinned."})}else{b(i).addClass("selected");b(i).attr("title","Un-Pin");b().General_ShowNotification({message:"Successfully pinned."})}},error:function(j,l,k){b().General_ShowErrorMessage({message:j.responseText})},beforeSend:function(k,j){b("i",i).General_AddRemoveSpinnerIcon()},complete:function(j,k){b("i",i).General_AddRemoveSpinnerIcon()}})};var a=function(){b("body").on("click",".social-share",function(j){j.preventDefault();var h=b(this).data("url");var i=b(this).data("type");if(h===undefined||h===""){return}window.open(h,"sharewin-"+i,"height=500,width=650,resizable=1")});function d(){e();g()}function g(){b("div.Swappable div.ln-article").draggable({helper:"clone",revert:true,zIndex:100,scroll:true,scrollSensitivity:100,cursorAt:{left:150,top:50},appendTo:"body",start:function(i,k){var j=b(k.helper).data("postimage");var h=b(k.helper).data("posttext");if(j!==""){b("div.SwappingHelper img.post-image").attr("src",j)}else{b("div.SwappingHelper img.post-image").attr("src",postImgPlaceHolder)}b("div.SwappingHelper p.post-text").html(h);b(k.helper).html(b("div.SwappingHelper").html())}})}function e(){b("div.Swappable div.ln-article").droppable({hoverClass:"ui-state-hover",drop:function(h,q){var t=b(q.draggable);var p=b(this);var j=parseInt(b(t).data("position"));var n=parseInt(b(t).data("postid"));var u=parseInt(b(t).data("social"));var r=b(t).data("type");var s=parseInt(b(p).data("position"));var m=parseInt(b(p).data("postid"));var l=parseInt(b(p).data("social"));var o=b(p).data("type");b(this).after(q.draggable.clone().removeAttr("style"));b(q.draggable).after(b(this).clone());b(q.helper).remove();b(q.draggable).remove();b(this).remove();var k=b('meta[name="csrf-token"]').attr("content");if(isNaN(blogId)||blogId<=0){return}var i={blogId:blogId,sourcePosition:j,sourcePostId:n,sourceIsSocial:u,sourceType:r,destinationPosition:s,destinationPostId:m,destinationIsSocial:l,destinationType:o,_csrf:k};b.ajax({url:baseHttpPath+"/home/swap-posts",type:"post",data:i,dataType:"json",success:function(x){if(x.success){var v=ApplicationController.jsUTF8Decode(x.article1html);var w=ApplicationController.jsUTF8Decode(x.article2html);if(u===1){b(".SocialPost"+x.article1).replaceWith(v)}else{b(".ArticlePost"+x.article1).replaceWith(v)}if(l===1){b(".SocialPost"+x.article2).replaceWith(w)}else{b(".ArticlePost"+x.article2).replaceWith(w)}}b(".lazyload").lazyload({threshold:200});d();b(".card p.card__text").each(function(){var y,z,A;y=b(this).parent(".card__content").height();A=b(this).position().top;z=b(this).siblings(".card__event")?b(this).siblings(".card__event").outerHeight():0;return b(this).height(y-z-A)});return b(".card p, .card h1").dotdotdot()},error:function(v,x,w){},beforeSend:function(w,v){},complete:function(v,w){}})}})}if(isUserLoggedIn==1&&loggedInUserId>0&&(isUserBlogOwner==1||isUserLeadAuthorOfBlog==1||isUserAdmin==1)){d()}b("div.ln-article, div.LoadMorePostsContainer").on("click",".PinArticleBtn",function(i){i.preventDefault();i.stopPropagation();var h=b(this);c(h)});b("div.ln-article, div.LoadMorePostsContainer").on("click",".DeleteSocialBtn",function(k){k.preventDefault();k.stopPropagation();var j=b(this);var i=parseInt(b(this).data("id"));var h=b('meta[name="csrf-token"]').attr("content");bootbox.confirm({title:"Confirm",message:"Do you really want to delete this post?",callback:function(l){if(l){if(isNaN(i)||i<=0){b().General_ShowErrorMessage({message:"Error deleting article."});return}b.ajax({type:"POST",url:baseHttpPath+"/post/delete-social-post",dataType:"json",data:{id:i,blogfeed:1,blogid:blogId,_csrf:h},success:function(n,o,m){b(".SocialPost"+i).remove();b().General_ShowNotification({message:"Successfully deleted."})},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})},beforeSend:function(n,m){b("i",j).General_AddRemoveSpinnerIcon()},complete:function(m,n){b("i",j).General_AddRemoveSpinnerIcon()}})}}})});b("div.ln-article, div.LoadMorePostsContainer").on("click",".HideBlogArticle",function(k){k.preventDefault();var j=b(this);var i=parseInt(b(this).data("id"));var h=b('meta[name="csrf-token"]').attr("content");var l=b(j).closest("div.cnFeatures").data("type");bootbox.confirm({title:"Confirm",message:"Do you really want to hide this article?",callback:function(m){if(m){if(isNaN(i)||i<=0){b().General_ShowErrorMessage({message:"Error hiding article."});return}b.ajax({type:"POST",url:baseHttpPath+"/post/hide-post",dataType:"json",data:{id:i,blogfeed:1,blogid:blogId,_csrf:h},success:function(o,p,n){b(".ArticlePost"+i).remove();b().General_ShowNotification({message:"Successfully hidden"})},error:function(n,p,o){b().General_ShowErrorMessage({message:n.responseText})},beforeSend:function(o,n){b("i",j).General_AddRemoveSpinnerIcon()},complete:function(n,o){b("i",j).General_AddRemoveSpinnerIcon()}})}}})});b("div.ln-article, div.LoadMorePostsContainer").on("click",".EditSocialBtn",function(l){l.preventDefault();l.stopPropagation();var k=b(this);var j=b("#ModalEditSocial");var i=k.data("id");var h=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/post/get-social-post",dataType:"json",data:{id:i,_csrf:h},success:function(n,o,m){b(".SaveEditSocialPost",j).data("id",i);b(".editSocialContent",j).val(n.post.text);j.modal("show")},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})}})});b("button.SaveEditSocialPost").on("click",function(l){l.preventDefault();l.stopPropagation();var k=b(this);var i=parseInt(b(k).data("id"));var j=b(".editSocialContent").val();var h=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/post/update-social-post",dataType:"json",data:{id:i,text:j,_csrf:h},success:function(n,o,m){b(".SocialPostText"+i).html(j);b("#ModalEditSocial").modal("hide");b().General_ShowNotification({message:"Successfully updated."});b(".card p.card__text").each(function(){var p,q,r;p=b(this).parent(".card__content").height();r=b(this).position().top;q=b(this).siblings(".card__event")?b(this).siblings(".card__event").outerHeight():0;return b(this).height(p-q-r)});return b(".card p, .card h1").dotdotdot()},error:function(m,o,n){b().General_ShowErrorMessage({message:m.responseText})},beforeSend:function(n,m){b("i",k).General_AddRemoveSpinnerIcon()},complete:function(m,n){b("i",k).General_AddRemoveSpinnerIcon()}})});var f=false;b("a.LoadMorePostsBtn").on("click",function(l){l.preventDefault();if(f){return}f=true;var o=b(this);var n=parseInt(b(this).data("offset"));var i=parseInt(b(this).data("first-offset"));var k=parseInt(b(this).data("page"));var m=parseInt(b(this).data("non-pinned-count"));var j=parseInt(b(this).data("blogid"));if(isNaN(j)||j<=0){j=blogId}if(isNaN(j)||j<=0){return}if(isNaN(n)){return}if(n<=0){n=n+i}else{n=n+9}k=k+1;b(this).data("offset",n);b(this).data("page",k);var h=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/home/more-posts",dataType:"json",data:{blogid:j,page:k,nonpinnedcount:m,offset:n,_csrf:h},success:function(r,s,q){b(o).data("non-pinned-count",r.nonPinnedCount);if(r.totalArticles>0){var p=ApplicationController.jsUTF8Decode(r.articlesHtml);b("div.LoadMorePostsContainer").append(p);b(".lazyload").lazyload({threshold:200});if(isUserLoggedIn==1&&loggedInUserId>0&&(isUserBlogOwner==1||isUserLeadAuthorOfBlog==1||isUserAdmin==1)){d()}if(r.totalArticles<9){b(o).addClass("hide")}b(".card p.card__text").each(function(){var t,u,v;t=b(this).parent(".card__content").height();v=b(this).position().top;u=b(this).siblings(".card__event")?b(this).siblings(".card__event").outerHeight():0;return b(this).height(t-u-v)});return b(".card p, .card h1").dotdotdot()}else{b(o).addClass("hide")}},error:function(p,r,q){},beforeSend:function(q,p){b(o).find("i.fa").addClass("fa-spin")},complete:function(p,q){f=false;b(o).find("i.fa").removeClass("fa-spin")}})})};return{init:function(){a()}}}(jQuery));HomeController.Blog=(function(b){var a=function(){b(".topFollowBlogBtn, .accrodianFollowBlogBtn, .followBlogBtn").followBlog({onSuccess:function(c,d){},onError:function(d,c){b().General_ShowErrorMessage({message:c})},beforeSend:function(c){b(c).html("Please wait...")},onComplete:function(d){b("i",d).General_AddRemoveSpinnerIcon();(b(d).data("status")==="follow")?b(d).html("Follow "+b(d).data("name")+" +"):b(d).html("Following "+b(d).data("name")+" -");if(b(d).hasClass("topFollowBlogBtn")){var c=b(".accrodianFollowBlogBtn");b(c).data("status",b(d).data("status"));(b(c).data("status")==="follow")?b(c).html("Follow "+b(c).data("name")+" +"):b(c).html("Following "+b(c).data("name")+" -")}else{if(b(d).hasClass("accrodianFollowBlogBtn")){var c=b(".topFollowBlogBtn");b(c).data("status",b(d).data("status"));(b(c).data("status")==="follow")?b(c).html("Follow "+b(c).data("name")+" +"):b(c).html("Following "+b(c).data("name")+" -")}}}});b(".FollowProfileUser").followWriter({onSuccess:function(c,d){},onError:function(d,c){b().General_ShowErrorMessage({message:c})},beforeSend:function(c){b(c).html("Please wait...")},onComplete:function(c){if(b(c).data("status")==="follow"){b(c).html("Follow "+b(c).data("name")+" +")}else{b(c).html("Following "+b(c).data("name")+" -")}}})};return{init:function(){a()}}}(jQuery));HomeController.Code=(function(b){var a=function(){b(".followCodeBtn").followCode({onSuccess:function(c,d){},onError:function(d,c){b().General_ShowErrorMessage({message:c})},beforeSend:function(c){b(c).html("Please wait...")},onComplete:function(c){(b(c).data("status")==="follow")?b(c).html("Follow "+b(c).data("codename")+" +"):b(c).html("Following "+b(c).data("codename")+" -")}})};return{init:function(){a()}}}(jQuery));HomeController.Post=(function(b){var a=function(){b(".followPostBtn").followPost({onSuccess:function(c,d){},onError:function(d,c){b().General_ShowErrorMessage({message:c})},beforeSend:function(c){b("i",c).General_AddRemoveSpinnerIcon()},onComplete:function(c){b("i",c).General_AddRemoveSpinnerIcon();if(b(c).data("status")==="follow"){b(c).removeClass("selected");b(c).children("span").html("Add to my events")}else{b(c).addClass("selected");b(c).children("span").html("Remove from my events")}}})};return{init:function(){a()}}}(jQuery));HomeController.Subscription=(function(b){var a=function(){b(".form__subscribe").on("submit",function(f){f.preventDefault();var d=b("#subscriptionEmail").val();if(d!=""){var c=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/home/subscription",dataType:"json",data:{email:d,_csrf:c},success:function(g,h,e){if(g.success=1){b().General_ShowNotification({message:"Subscribed successfully."})}},error:function(e,h,g){b().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(g,e){b("#subscriptionBtn").val("Please Wait...")},complete:function(e,g){b("#subscriptionBtn").val("Subscribe");b("#subscriptionEmail").val("")}})}})};return{init:function(){a()}}}(jQuery));var ArticleController=(function(a){return{article:function(){ArticleController.Article.init()}}}(jQuery));ArticleController.Article=(function(b){var a=function(){var c=b(window).width();if(c>992){ApplicationController.adjustArticlePageContents()}b("body").on("click",".btnYoutubePlay",function(f){f.preventDefault();var d=b(this).data("videoid");var g=b(this).data("title");if(d!==undefined&&d!==""){b.fancybox.open([{href:"http://www.youtube.com/embed/"+d+"?autoplay=1",title:g,type:"iframe"}])}});b("body").on("click",".btnVimeoPlay",function(f){f.preventDefault();var d=b(this).data("videoid");var g=b(this).data("title");if(d!==undefined&&d!==""){b.fancybox.open([{href:"http://player.vimeo.com/video/"+d+"?autoplay=1",title:g,type:"iframe"}])}});b("a.like-post").click(function(h){h.preventDefault();var g=b(this).hasClass("like")?"like":"unlike";var d=b(this).data("id");var f=yii.getCsrfToken();b.ajax({url:baseHttpPath+"/article/like-post",type:"post",data:{action:g,post_id:d,_csrf:f},dataType:"json",success:function(e){if(e.success==1){b(".like-post > span").html(e.total_likes+" Likes");if(g=="like"){b(".like-post").removeClass("like").addClass("unlike")}else{b(".like-post").removeClass("unlike").addClass("like")}}},error:function(e,j,i){b().General_ShowErrorMessage({message:e.responseText})}})})};return{init:function(){a()}}}(jQuery));var UserController=(function(a){return{myNews:function(){UserController.MyNews.init()}}}(jQuery));UserController.MyNews=(function(b){var a=function(){b("body").on("click",".social-share",function(g){g.preventDefault();var d=b(this).data("url");var f=b(this).data("type");if(d===undefined||d===""){return}window.open(d,"sharewin-"+f,"height=500,width=650,resizable=1")});var c=false;b("a.LoadMorePostsBtn").on("click",function(h){h.preventDefault();if(c){return}c=true;var j=b(this);var i=parseInt(b(this).data("offset"));var g=parseInt(b(this).data("moreposts-count"));var f=parseInt(b(this).data("firstoffset"));if(isNaN(i)){return}if(isNaN(g)||g<=0){g=10}if(isNaN(f)||f<=0){f=10}i=(i===0)?i+f:i+g;b(this).data("offset",i);var d=b('meta[name="csrf-token"]').attr("content");b.ajax({type:"POST",url:baseHttpPath+"/user/more-posts",dataType:"json",data:{offset:i,limit:g,_csrf:d},success:function(l,m,k){if(l.totalArticles>0){var e=ApplicationController.jsUTF8Decode(l.articlesHtml);b("div.MorePostsContainer").append(e);b(".lazyload").lazyload({threshold:200});if(l.totalArticles<g){b(j).addClass("hide")}b(".card p.card__text").each(function(){var n,o,p;n=b(this).parent(".card__content").height();p=b(this).position().top;o=b(this).siblings(".card__event")?b(this).siblings(".card__event").outerHeight():0;return b(this).height(n-o-p)});return b(".card p, .card h1").dotdotdot()}else{b(j).addClass("hide")}},error:function(e,l,k){},beforeSend:function(k,e){b(j).find("i.fa").addClass("fa-spin")},complete:function(e,k){c=false;b(j).find("i.fa").removeClass("fa-spin")}})})};return{init:function(){a()}}}(jQuery));var SearchController=(function(a){return{init:function(){SearchController.FansSearch.init()},}}(jQuery));SearchController.FansSearch=(function(b){var a=function(){b("body").on("click",".social-share",function(h){h.preventDefault();var f=b(this).data("url");var g=b(this).data("type");if(f===undefined||f===""){return}window.open(f,"sharewin-"+g,"height=500,width=650,resizable=1")});b(".card p.card__text, .card h1.card__heading").dotdotdot();b("form.search").on("submit",function(h){var g=b("input.SearchInput").val();if(b.trim(g)===""){b().General_ShowErrorMessage({message:"Please enter a search term."});h.preventDefault();return}var f=b("button:submit");b("i",f).General_AddRemoveSpinnerIcon()});var d=b("#searchedArticles").data("postcount");if(d>=postsOffsetSearch){var c=new Waypoint({element:b("#load-more"),offset:"90%",handler:function(f){if(f=="down"){e()}}})}function e(){var f=b(".blog-post-search input.c9n-ippt").val();b.ajax({url:baseHttpPath+"/search/fans-search/",type:"get",data:{s:f,_csrf:b('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(l){var h=l.articles;if(h.length<=0){b("#load-more").removeClass("exists");b("#load-more-cover").html("");b(".no-data").removeClass("hide")}else{b(".no-data").addClass("hide");var k=b("#search-post-template").html();var i=Handlebars.compile(k);for(var j in l.articles){var g=i(l.articles[j]);b("#searchedArticles").append(g)}b(".card p.card__text").each(function(){var m,n,o;m=b(this).parent(".card__content").height();o=b(this).position().top;n=b(this).siblings(".card__event")?b(this).siblings(".card__event").outerHeight():0;return b(this).height(m-n-o)});b(".card p.card__text, .card h1.card__heading").dotdotdot()}if(l.articles.length<postsOffsetSearch){c.destroy()}else{Waypoint.refreshAll()}},error:function(g,i,h){b().General_ShowErrorMessage({message:g.responseText})},beforeSend:function(){b("i",b(".spinner")).General_AddRemoveSpinnerIcon()},complete:function(){b("i",b(".spinner")).General_AddRemoveSpinnerIcon()}})}};return{init:function(){a()}}}(jQuery));var Profile=function(){var a=function(){$(".DeleteAllNotifications").on("click",function(g){g.preventDefault();var f=$(this);bootbox.confirm({title:"Confirm",message:"Do you really want to delete all unread notifications?",callback:function(e){if(e){$.ajax({type:"POST",url:baseHttpPath+"/user/delete-notification",dataType:"json",data:{id:0,deleteall:1,_csrf:yii.getCsrfToken()},success:function(i,j,h){$("ul.NotificationsList").remove();$("span.NotificationCount").html("0");$("div.UserNotifications").append('<p class=" no-data">No notification(s) found.</p>');$(".DeleteAllNotifications").parent("span").addClass("hide");$().General_ShowNotification({message:totalCount+" notifications deleted successfully."})},error:function(h,j,i){$().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(i,h){$("i",f).General_AddRemoveSpinnerIcon()},complete:function(h,i){$("i",f).General_AddRemoveSpinnerIcon()}})}}})});$(".NotificationsLoadMore").on("click",function(g){g.preventDefault();var f=parseInt($(this).data("page"));if(isNaN(f)||f<=0){$(this).addClass("hide");return}var h=$(this);$.ajax({type:"POST",url:baseHttpPath+"/user/dashboard",dataType:"json",data:{page:f,_csrf:yii.getCsrfToken()},success:function(k,n,j){if(k.notifications.length>0){var i=$("#notification-template").html();var e=Handlebars.compile(i);for(var m in k.notifications){var l=k.notifications[m];$("ul.NotificationsList").append(e(l))}$(h).data("page",(f+1))}if(k.notifications.length<notificationsLimit){$(h).addClass("hide")}},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(i,e){$("i",h).General_AddRemoveSpinnerIcon()},complete:function(e,i){$("i",h).General_AddRemoveSpinnerIcon()}})});$(".UserNotifications").on("click",".markReadNotification",function(h){h.preventDefault();var g=$(this);var f=parseInt($(this).data("id"));if(isNaN(f)||f<=0){$().General_ShowErrorMessage({message:"Error marking notification as read."});return}$.ajax({type:"POST",url:baseHttpPath+"/user/mark-read-notification",dataType:"json",data:{id:f,_csrf:yii.getCsrfToken()},success:function(k,l,i){$("li.Notification"+f).remove();var e=parseInt($("span.NotificationCount").html());if(!isNaN(e)&&e>0){var j=e-1;$("span.NotificationCount").html(j);if(j<=0){$("div.UserNotifications").append('<p class=" no-data">No notification(s) found.</p>')}}$().General_ShowNotification({message:"Successfully marked as read."})},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(i,e){$("i",g).General_AddRemoveSpinnerIcon()},complete:function(e,i){$("i",g).General_AddRemoveSpinnerIcon()}})});$(".UserNotifications").on("click",".deleteNotification",function(h){h.preventDefault();var g=$(this);var f=parseInt($(this).data("id"));if(isNaN(f)||f<=0){$().General_ShowErrorMessage({message:"Error deleting notification."});return}$.ajax({type:"POST",url:baseHttpPath+"/user/delete-notification",dataType:"json",data:{id:f,deleteall:0,_csrf:yii.getCsrfToken()},success:function(k,l,i){$("li.Notification"+f).remove();var e=parseInt($("span.NotificationCount").html());if(!isNaN(e)&&e>0){var j=e-1;$("span.NotificationCount").html(j);if(j<=0){$("div.UserNotifications").append('<p class=" no-data">No notification(s) found.</p>')}}$().General_ShowNotification({message:"Successfully deleted."})},error:function(e,j,i){$().General_ShowErrorMessage({message:e.responseText})},beforeSend:function(i,e){$("i",g).General_AddRemoveSpinnerIcon()},complete:function(e,i){$("i",g).General_AddRemoveSpinnerIcon()}})});$(".deleteBlog").deleteBlog({onSuccess:function(e,f){$().General_ShowNotification({message:"Successfully deleted"});$("li.blogId_"+$(f).data("id")).slideUp().remove()},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon()}});$(".blogSettingsBtn").on("click",function(g){g.preventDefault();var f=$(this).data("id");window.location=baseHttpPath+"/user-blogs/settings?blogId="+f})};var d=function(){$(".AddMoreWebsiteUrl").on("click",function(g){g.preventDefault();var f=$(this).attr("shownext");$(".field-blogsetting-website_url"+f).slideDown("slow");$(this).hide()});$(".RemoveWebsiteUrl").on("click",function(i){i.preventDefault();var g=$(this).attr("removenum");$("#blogsetting-website_url"+g).val("");var j=$(this).parent("div");var h=g-1;var f=j.siblings(".field-blogsetting-website_url"+h);f.children(".AddMoreWebsiteUrl").show();$(".field-blogsetting-website_url"+g).slideUp("slow")})};var b=function(){$(".FollowProfileUser").followWriter({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();if($(e).data("status")==="follow"){$(e).removeClass("red").addClass("green");$(e).html('<i class="fa fa-star"></i>Follow')}else{$(e).removeClass("green").addClass("red");$(e).html('<i class="fa fa-star"></i>Following')}}});$(".FollowProfileBlog").followBlog({onSuccess:function(f,g){var e=$(g).data("status");(e==="follow")?$(g).removeClass("selected"):$(g).addClass("selected")},onError:function(f,e){$().General_ShowErrorMessage({message:e})}});$(".FollowCode").followCode({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();($(e).data("status")==="follow")?$(e).removeClass("selected"):$(e).addClass("selected")}});$(".FollowClub").followBlog({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();($(e).data("status")==="follow")?$(e).removeClass("selected"):$(e).addClass("selected")}});$(".FollowBlog").followBlog({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();($(e).data("status")==="follow")?$(e).removeClass("selected"):$(e).addClass("selected")}});$(".FollowWriter").followWriter({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();($(e).data("status")==="follow")?$(e).removeClass("selected"):$(e).addClass("selected")}});$(".FollowUnfollowUser").followWriter({onSuccess:function(e,f){},onError:function(f,e){$().General_ShowErrorMessage({message:e})},beforeSend:function(e){$("i",e).General_AddRemoveSpinnerIcon()},onComplete:function(e){$("i",e).General_AddRemoveSpinnerIcon();($(e).data("status")==="follow")?$(e).removeClass("selected"):$(e).addClass("selected")}})};var c=function(){$(".card p.card__news-description, .card h1.card__news-heading").dotdotdot();var g=function(i){var k={loader:$("div.loader"),container:$("div.posts"),onSuccess:false,onError:false,beforeSend:false,onComplete:false};var j=$.extend({},k,i);var m=$(j.container).data("username");var h=parseInt($(j.container).data("total-count"));var l=parseInt($(j.container).data("offset"));if(m===""||m===undefined){return}if(isNaN(h)||isNaN(l)){return}l=l+postsOffset;if(l>h){return}$(j.container).data("offset",l);$.ajax({type:"POST",url:baseHttpPath+"/profile/"+m+"/posts",dataType:"json",data:{offset:l},success:function(s,t,p){if(s.articles.length>0){for(var r in s.articles){var q=$("#post-listing-template").html();var o=Handlebars.compile(q);var n=o(s.articles[r]);$(j.container).append(n)}$(".card p.card__news-description, .card h1.card__news-heading").dotdotdot();if(s.articles.length<postsOffset){e.destroy()}else{Waypoint.refreshAll()}}if(j.onSuccess&&typeof j.onSuccess==="function"){j.onSuccess(s)}},error:function(n,p,o){if(j.onError&&typeof j.onError==="function"){j.onError(n.responseText)}},beforeSend:function(o,n){$(j.loader).removeClass("hide");if(j.beforeSend&&typeof j.beforeSend==="function"){j.beforeSend()}},complete:function(n,o){$(j.loader).addClass("hide");if(j.onComplete&&typeof j.onComplete==="function"){j.onComplete()}}})};var f=parseInt($("div.posts").data("total-count"));if(f>postsOffset){var e=new Waypoint({element:$("#LoadMoreArticles"),offset:"80%",handler:function(h){if(h=="down"){g({})}}})}};return{init:function(){b();d()},dashboard:function(){a()},userArticles:function(){c()}}}();var ContactController=(function(a){return{map:function(){ContactController.Map.init()}}}(jQuery));ContactController.Map=(function(b){var a=function(){var f=b("#map");var g=f.data("lat");var d=f.data("lng");var c=f.data("address");google.maps.event.addDomListener(window,"load",e);function e(){var j=new google.maps.LatLng(parseFloat(g),parseFloat(d));var l=new google.maps.Map(document.getElementById("map"),{zoom:12,center:j});var i=new google.maps.Marker({position:{lat:g,lng:d},map:l});var k=c;h(i,k)}function h(i,j){var k=new google.maps.InfoWindow({content:j});i.addListener("click",function(){k.open(i.get("map"),i)})}};return{init:function(){a()}}}(jQuery));function additionalFamily(c,d,b,a){if($("#MemberType").val()==="family"&&$("#AdditionalFamily").val()===""){d.push("required")}}function studentNumber(c,d,b,a){if(($("#MemberType").val()==="student"||$("#MemberType").val()==="pensioner")&&$("#StudentCardNumber").val()===""){d.push("required")}}function fireArms(c,d,b,a){if(($("#FirearmMake").val()!==""||$("#FirearmModel").val()!==""||$("#FirearmCalibre").val()!==""||$("#SerialNumber").val()!==""||$("#AdditionalFirearms").is(":checked"))&&c.val()===""){d.push("required")}}function donationVal(c,d,b,a){if(($("#Donate").is(":checked")||$("#FightingFund").is(":checked"))&&$("#donation").val()===""){d.push("required")}}var FieldGameAuthController=(function(a){return{signup:function(){FieldGameAuthController.Signup.init()},signupv2:function(){FieldGameAuthController.SignupV2.init()}}}(jQuery));FieldGameAuthController.SignupV2=(function(b){var a=function(){var c=StripeCheckout.configure({key:stripePublishKey,image:baseHttpPath+"/resources/fieldgames/images/favicons/apple-touch-icon-152x152.png",locale:"auto","allow-remember-me":false,token:function(d){b("#stripe_token").val(d.id);b("#signupForm").submit()}});b(".CreditCardBtn").on("click",function(j){j.preventDefault();b(".OtherPaymentOptions").addClass("hide");b("#ElectronicFundsTransfer,#PaymentByCheque").prop("checked",false);var g=b("#signupForm").validationEngine("validate");if(!g){return}var f=parseFloat(b("#MemberType").find(":selected").data("cost"));if(b("#donation").val()!=""){var h=b("#donation").val();h=h.replace(/[^\d\.]+/g,"");h=h.replace(/(\..*)\./g,"$1");var i=parseFloat(h);if(!isNaN(i)&&i>0){f=i+f}}var d=f*100;if(isNaN(d)||d<=0){alert("Please select a Membership Type");return false}c.open({name:"Field & Game",description:"Field & Game Membership",currency:"AUD",email:b("#Email").val(),amount:d})});window.addEventListener("popstate",function(){c.close()});b(".OtherPaymentOptionsBtn").on("click",function(){b(".OtherPaymentOptions").removeClass("hide")});b("#signupForm").validationEngine({prettySelect:true,promptPosition:"topRight",showOneMessage:true,onValidationComplete:function(e,d){if(d==true){e.on("submit",function(g){g.preventDefault()});if(b(".OtherPaymentOptions").hasClass("hide")&&b("#stripe_token").val()==""){alert("Please click on Pay by Credit Card to connect");return false}if(!b(".OtherPaymentOptions").hasClass("hide")&&!b("#ElectronicFundsTransfer").is(":checked")&&!b("#PaymentByCheque").is(":checked")){alert("Please select atleast one payment method");return false}var f=b("#signupForm").serialize();f+="&_csrf="+yii.getCsrfToken();b.ajax({url:baseHttpPath+"/auth/save-user",type:"post",data:f,dataType:"json",success:function(g){if(g.success===1){window.location=baseHttpPath+"/auth/complete-signup"}else{b(".alert.alert-danger p.error-message").html(g.error);b(".alert.alert-danger").removeClass("hide")}},error:function(g,i,h){b().General_ShowNotification({type:"error",message:g.responseText})},beforeSend:function(h,g){b("body").addClass("Signup__Error")},complete:function(g,h){b("body").removeClass("Signup__Error")}});return true}}});b("select.form-control").select2({blurOnChange:true,dropdownAutoWidth:true});b("#DOB.date").datepicker({autoclose:true,format:"dd/mm/yyyy"});b("#donation").on("keyup",function(h){if(h.which===18){h.preventDefault()}var i=parseFloat(b("#MemberType").find(":selected").data("cost"));var f=i;var d=b(this).val();d=d.replace(/[^\d\.]+/g,"");d=d.replace(/(\..*)\./g,"$1");var g=parseFloat(d);if(!isNaN(g)&&g>0){f=i+g}b("#TotalPayable").val("$ "+f.toFixed(2)+" inc GST")});b("#MemberType").on("change",function(i){var j=parseFloat(b(this).find(":selected").data("cost"));var d=new Number(j);b("#TotalMembershipFees").val("$ "+d.toFixed(2)+" inc GST");if(b("#donation").val()!=""){var g=b("#donation").val();g=g.replace(/[^\d\.]+/g,"");g=g.replace(/(\..*)\./g,"$1");var h=parseFloat(g);if(!isNaN(h)&&h>0){j+=h}}d=new Number(j);b("#TotalPayable").val("$ "+d.toFixed(2)+" inc GST");var f=b(this).val();if(f==="family"){b(".additional-family-row").removeClass("hide");b(".type-help").html("(Spouse or Child U18)");b(".type-help").removeClass("hide")}else{b(".additional-family-row").addClass("hide");if(f==="student"||f==="pensioner"){b(".type-help").html("Proof must be provided");b(".type-help").removeClass("hide")}else{b(".type-help").addClass("hide")}}if(f==="junior"||f==="superjunior"){b(".firearm").val("");b(".firearm").prop("disabled",true)}else{b(".firearm").prop("disabled",false)}b("#donation").prop("disabled",false)});b("#SameResidentialAddress").on("click",function(f){if(b(this).is(":checked")){b("#PostalAddress").val(b("#ResidentialAddress").val());b("#Suburb2").val(b("#Suburb").val());b("#Postcode2").val(b("#Postcode").val());var d=b("#State2").select();d.val(b("#State").val()).trigger("change")}})};return{init:function(){a()}}}(jQuery));FieldGameAuthController.Signup=(function(b){var a=function(){b("#same_as_postal").click(function(c){if(b(this).is(":checked")){b("#signupform-residential_address").val(b("#signupform-postal_address").val());b("#signupform-residential_postcode").val(b("#signupform-postal_postcode").val())}});b("#signupform-dateofbirth").datetimepicker({autoclose:true,format:"dd-mm-yyyy",pickerPosition:"bottom-left",initialDate:"01-01-1980",minView:2});b(".membershipSignupForm").on("click",function(){var c=b(this);var d=c.data("membership");var e=c.data("cost");b(".membershipForm").find(".active").removeClass("active");c.addClass("active");b("#memberTypeInput").val(d);b("#cost").removeClass("hide");b("#cost").children("span").text(e);if(c.hasClass("family")){b(".additionalInfo").removeClass("hide")}else{b(".additionalInfo").addClass("hide");b("#additionalFamilyInfo").val("")}})};return{init:function(){a()}}}(jQuery));var FieldGamePopularController=(function(a){return{branch:function(){FieldGamePopularController.Branch.init()}}}(jQuery));FieldGamePopularController.Branch=(function(c){var b=function(){c("button.follow").followBlog({onSuccess:function(d,e){},onError:function(e,d){c().General_ShowErrorMessage({message:d})},beforeSend:function(d){c("i",d).General_AddRemoveSpinnerIcon()},onComplete:function(d){c("i",d).General_AddRemoveSpinnerIcon();(c(d).data("status")==="follow")?c(d).html("<i class='fa fa-star'></i> Follow"):c(d).html("<i class='fa fa-star'></i> Following")}})};var a=function(){b();var e=Handlebars.compile(clubs_index_club);c(".blog-post-search form").submit(function(f){f.preventDefault();d()});c("#filter a").click(function(f){f.preventDefault();if(c(this).hasClass("selected")){return}c("#filter a").removeClass("selected");c(this).addClass("selected");c(".blog-post-search form input.c9n-ippt").val("");d()});function d(){var g=c("#filter a.selected").data("code");var f=c(".blog-post-search input.c9n-ippt").val();c.ajax({url:baseHttpPath+"/branch/index",type:"get",data:{s:f,code:g,_csrf:c('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(i){c("#clubBlogs").empty();Handlebars.registerHelper("loggedUser",function(j,k){var m=k.fn,l=k.inverse;return j=i.loggedUser==true?m():l()});var h=i.clubs;if(h.length<=0){c(".polpular-writers").addClass("hide");c(".no-data").removeClass("hide")}else{c(".polpular-writers").removeClass("hide");c(".no-data").addClass("hide");c("#clubBlogs").append(e(h));c(".forceLogin").unbind("click");ApplicationController.init();b()}},error:function(h,j,i){c().General_ShowErrorMessage({message:h.responseText})},beforeSend:function(){c("i",c(".blog-post-search form button")).General_AddRemoveSpinnerIcon()},complete:function(){c("i",c(".blog-post-search form button")).General_AddRemoveSpinnerIcon()}})}};return{init:function(){a()}}}(jQuery));